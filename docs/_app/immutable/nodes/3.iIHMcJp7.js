import{s as ji,z as _n,A as Ci,B as Ba,C as Wa,D as Ha,E as Va,w as Za,e as Ke,a as Le,c as Je,b as Sn,F as Jr,g as De,f as fe,u as Ae,i as ve,h as Ie,G as Xa,H as Ya,q as qa,t as Qe,d as $e,n as Qr,o as Mi,j as Ga}from"../chunks/scheduler.BeLRReWv.js";import{S as zi,i as Bi,b as ne,d as ie,m as oe,a as zt,t as Wt,e as ae,f as Ka,c as En,g as In}from"../chunks/index.DqTjYTGe.js";import{I as Ja,g as Qa,a as $a,B as $r,t as Te}from"../chunks/Toaster.svelte_svelte_type_style_lang.DAcGVVf-.js";import{c as ts,S as es,L as Ui,R as Wi,I as rs,P as ns,T as Hi,a as Vi,D as is,b as os}from"../chunks/loader-circle.CznPcOWw.js";let Zi,Ar="";function as(ct,A){globalThis.Buffer=A,globalThis.fs=ct,globalThis.fs.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048};let F="";globalThis.fs.writeSyncOriginal=globalThis.fs.writeSync,globalThis.fs.writeSync=function(d,D){if(d===1||d===2){F+=w.decode(D);const E=F.lastIndexOf(`
`);return E!=-1&&(Ar+=F.substring(0,E+1),console.log(F.substring(0,E)),F=F.substring(E+1)),D.length}else return globalThis.fs.writeSyncOriginal(...arguments)},globalThis.fs.writeOriginal=globalThis.fs.write,globalThis.fs.write=function(d,D,E,O,_,p){if(d===1||d===2){if(E!==0||O!==D.length||_!==null)throw new Error("not implemented");const s=this.writeSync(d,D);p(null,s,D)}else return arguments[1]=globalThis.Buffer.from(arguments[1]),globalThis.fs.writeOriginal(...arguments)},globalThis.fs.openOriginal=globalThis.fs.open,globalThis.fs.open=function(d,D,E,O){var _="r",p=globalThis.fs.constants;if(D&p.O_WRONLY)_="w",D&p.O_EXCL&&(_="wx");else if(D&p.O_RDWR)D&p.O_CREAT&&D&p.O_TRUNC?D&p.O_EXCL?_="wx+":_="w+":_="r+";else if(D&p.O_APPEND)throw new Error("Not implmented");return globalThis.fs.openOriginal(d,_,E,O)},globalThis.fs.fstatOriginal=globalThis.fs.fstat,globalThis.fs.fstat=function(d,D){return globalThis.fs.fstatOriginal(d,function(){var E=arguments[1];return delete E.fileData,E.atimeMs=E.atime.getTime(),E.mtimeMs=E.mtime.getTime(),E.ctimeMs=E.ctime.getTime(),E.birthtimeMs=E.birthtime.getTime(),D(arguments[0],E)})},globalThis.fs.closeOriginal=globalThis.fs.close,globalThis.fs.close=function(d,D){return globalThis.fs.closeOriginal(d,function(){return typeof arguments[0]>"u"&&(arguments[0]=null),D(...arguments)})};const S=new TextEncoder("utf-8"),w=new TextDecoder("utf-8");Zi=class{constructor(){this.argv=["js"],this.env={},this.exit=v=>{this.exitCode=v,v!==0&&console.warn("exit code:",v)},this._exitPromise=new Promise(v=>{this._resolveExitPromise=v}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;const d=()=>new DataView(this._inst.exports.mem.buffer),D=(v,I)=>{d().setUint32(v+0,I,!0),d().setUint32(v+4,Math.floor(I/4294967296),!0)},E=v=>{const I=d().getUint32(v+0,!0),T=d().getInt32(v+4,!0);return I+T*4294967296},O=v=>{const I=d().getFloat64(v,!0);if(I===0)return;if(!isNaN(I))return I;const T=d().getUint32(v,!0);return this._values[T]},_=(v,I)=>{if(typeof I=="number"){if(isNaN(I)){d().setUint32(v+4,2146959360,!0),d().setUint32(v,0,!0);return}if(I===0){d().setUint32(v+4,2146959360,!0),d().setUint32(v,1,!0);return}d().setFloat64(v,I,!0);return}switch(I){case void 0:d().setFloat64(v,0,!0);return;case null:d().setUint32(v+4,2146959360,!0),d().setUint32(v,2,!0);return;case!0:d().setUint32(v+4,2146959360,!0),d().setUint32(v,3,!0);return;case!1:d().setUint32(v+4,2146959360,!0),d().setUint32(v,4,!0);return}let x=this._refs.get(I);x===void 0&&(x=this._values.length,this._values.push(I),this._refs.set(I,x));let M=0;switch(typeof I){case"string":M=1;break;case"symbol":M=2;break;case"function":M=3;break}d().setUint32(v+4,2146959360|M,!0),d().setUint32(v,x,!0)},p=v=>{const I=E(v+0),T=E(v+8);return new Uint8Array(this._inst.exports.mem.buffer,I,T)},s=v=>{const I=E(v+0),T=E(v+8),x=new Array(T);for(let M=0;M<T;M++)x[M]=O(I+M*8);return x},m=v=>{const I=E(v+0),T=E(v+8);return w.decode(new DataView(this._inst.exports.mem.buffer,I,T))},c=Date.now()-performance.now();this.importObject={go:{"runtime.wasmExit":v=>{const I=d().getInt32(v+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._refs,this.exit(I)},"runtime.wasmWrite":v=>{const I=E(v+8),T=E(v+16),x=d().getInt32(v+24,!0);ct.writeSync(I,new Uint8Array(this._inst.exports.mem.buffer,T,x))},"runtime.nanotime":v=>{D(v+8,(c+performance.now())*1e6)},"runtime.walltime":v=>{const I=new Date().getTime();D(v+8,I/1e3),d().setInt32(v+16,I%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":v=>{const I=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(I,setTimeout(()=>{this._resume()},E(v+8)+1)),d().setInt32(v+16,I,!0)},"runtime.clearTimeoutEvent":v=>{const I=d().getInt32(v+8,!0);clearTimeout(this._scheduledTimeouts.get(I)),this._scheduledTimeouts.delete(I)},"runtime.getRandomData":v=>{crypto.getRandomValues(p(v+8))},"syscall/js.stringVal":v=>{_(v+24,m(v+8))},"syscall/js.valueGet":v=>{const I=Reflect.get(O(v+8),m(v+16));v=this._inst.exports.getsp(),_(v+32,I)},"syscall/js.valueSet":v=>{Reflect.set(O(v+8),m(v+16),O(v+32))},"syscall/js.valueIndex":v=>{_(v+24,Reflect.get(O(v+8),E(v+16)))},"syscall/js.valueSetIndex":v=>{Reflect.set(O(v+8),E(v+16),O(v+24))},"syscall/js.valueCall":v=>{try{const I=O(v+8),T=Reflect.get(I,m(v+16)),x=s(v+32),M=Reflect.apply(T,I,x);v=this._inst.exports.getsp(),_(v+56,M),d().setUint8(v+64,1)}catch(I){_(v+56,I),d().setUint8(v+64,0)}},"syscall/js.valueInvoke":v=>{try{const I=O(v+8),T=s(v+16),x=Reflect.apply(I,void 0,T);v=this._inst.exports.getsp(),_(v+40,x),d().setUint8(v+48,1)}catch(I){_(v+40,I),d().setUint8(v+48,0)}},"syscall/js.valueNew":v=>{try{const I=O(v+8),T=s(v+16),x=Reflect.construct(I,T);v=this._inst.exports.getsp(),_(v+40,x),d().setUint8(v+48,1)}catch(I){_(v+40,I),d().setUint8(v+48,0)}},"syscall/js.valueLength":v=>{D(v+16,parseInt(O(v+8).length))},"syscall/js.valuePrepareString":v=>{const I=S.encode(String(O(v+8)));_(v+16,I),D(v+24,I.length)},"syscall/js.valueLoadString":v=>{const I=O(v+8);p(v+16).set(I)},"syscall/js.valueInstanceOf":v=>{d().setUint8(v+24,O(v+8)instanceof O(v+16))},debug:v=>{console.log(v)}}}}async run(d){this._inst=d,this._values=[NaN,0,null,!0,!1,globalThis,this._inst.exports.mem,this],this._refs=new Map,this.exited=!1,Ar="";const D=new DataView(this._inst.exports.mem.buffer);let E=4096;const O=c=>{let v=E;return new Uint8Array(D.buffer,E,c.length+1).set(S.encode(c+"\0")),E+=c.length+(8-c.length%8),v},_=this.argv.length,p=[];this.argv.forEach(c=>{p.push(O(c))});const s=Object.keys(this.env).sort();p.push(s.length),s.forEach(c=>{p.push(O(`${c}=${this.env[c]}`))});const m=E;p.forEach(c=>{D.setUint32(E,c,!0),D.setUint32(E+4,0,!0),E+=8}),this._inst.exports.run(_,m),this.exited&&this._resolveExitPromise(),await this._exitPromise}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(d){const D=this;return function(){const E={id:d,this:this,args:arguments};return D._pendingEvent=E,D._resume(),E.result}}}}var Xi={exports:{}};(function(ct,A){(function(S,w){ct.exports=w()})(ts,function(){return function(F){var S={};function w(d){if(S[d])return S[d].exports;var D=S[d]={exports:{},id:d,loaded:!1};return F[d].call(D.exports,D,D.exports,w),D.loaded=!0,D.exports}return w.m=F,w.c=S,w.p="",w(0)}([function(F,S,w){(function(d,D,E,O){Object.defineProperty(S,"__esModule",{value:!0});var _=w(2),p=w(9),s;(function(n){n[n.EPERM=1]="EPERM",n[n.ENOENT=2]="ENOENT",n[n.EIO=5]="EIO",n[n.EBADF=9]="EBADF",n[n.EACCES=13]="EACCES",n[n.EBUSY=16]="EBUSY",n[n.EEXIST=17]="EEXIST",n[n.ENOTDIR=20]="ENOTDIR",n[n.EISDIR=21]="EISDIR",n[n.EINVAL=22]="EINVAL",n[n.EFBIG=27]="EFBIG",n[n.ENOSPC=28]="ENOSPC",n[n.EROFS=30]="EROFS",n[n.ENOTEMPTY=39]="ENOTEMPTY",n[n.ENOTSUP=95]="ENOTSUP"})(s||(s={}));var m={};m[s.EPERM]="Operation not permitted.",m[s.ENOENT]="No such file or directory.",m[s.EIO]="Input/output error.",m[s.EBADF]="Bad file descriptor.",m[s.EACCES]="Permission denied.",m[s.EBUSY]="Resource busy or locked.",m[s.EEXIST]="File exists.",m[s.ENOTDIR]="File is not a directory.",m[s.EISDIR]="File is a directory.",m[s.EINVAL]="Invalid argument.",m[s.EFBIG]="File is too big.",m[s.ENOSPC]="No space left on disk.",m[s.EROFS]="Cannot modify a read-only file system.",m[s.ENOTEMPTY]="Directory is not empty.",m[s.ENOTSUP]="Operation is not supported.";var c=function(n){function t(r,e,i){e===void 0&&(e=m[r]),n.call(this,e),this.syscall="",this.errno=r,this.code=s[r],this.path=i,this.stack=new n().stack,this.message="Error: "+this.code+": "+e+(this.path?", '"+this.path+"'":"")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.fromJSON=function(e){var i=new t(0);return i.errno=e.errno,i.code=e.code,i.path=e.path,i.stack=e.stack,i.message=e.message,i},t.fromBuffer=function(e,i){return i===void 0&&(i=0),t.fromJSON(JSON.parse(e.toString("utf8",i+4,i+4+e.readUInt32LE(i))))},t.FileError=function(e,i){return new t(e,m[e],i)},t.ENOENT=function(e){return this.FileError(s.ENOENT,e)},t.EEXIST=function(e){return this.FileError(s.EEXIST,e)},t.EISDIR=function(e){return this.FileError(s.EISDIR,e)},t.ENOTDIR=function(e){return this.FileError(s.ENOTDIR,e)},t.EPERM=function(e){return this.FileError(s.EPERM,e)},t.ENOTEMPTY=function(e){return this.FileError(s.ENOTEMPTY,e)},t.prototype.toString=function(){return this.message},t.prototype.toJSON=function(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}},t.prototype.writeToBuffer=function(e,i){e===void 0&&(e=d.alloc(this.bufferSize())),i===void 0&&(i=0);var o=e.write(JSON.stringify(this.toJSON()),i+4);return e.writeUInt32LE(o,i),e},t.prototype.bufferSize=function(){return 4+d.byteLength(JSON.stringify(this.toJSON()))},t}(Error),v=Object.freeze({get ErrorCode(){return s},ErrorStrings:m,ApiError:c}),I;(function(n){n[n.NOP=0]="NOP",n[n.THROW_EXCEPTION=1]="THROW_EXCEPTION",n[n.TRUNCATE_FILE=2]="TRUNCATE_FILE",n[n.CREATE_FILE=3]="CREATE_FILE"})(I||(I={}));var T=function n(t){if(this.flagStr=t,n.validFlagStrs.indexOf(t)<0)throw new c(s.EINVAL,"Invalid flag: "+t)};T.getFileFlag=function(t){return T.flagCache.hasOwnProperty(t)?T.flagCache[t]:T.flagCache[t]=new T(t)},T.prototype.getFlagString=function(){return this.flagStr},T.prototype.isReadable=function(){return this.flagStr.indexOf("r")!==-1||this.flagStr.indexOf("+")!==-1},T.prototype.isWriteable=function(){return this.flagStr.indexOf("w")!==-1||this.flagStr.indexOf("a")!==-1||this.flagStr.indexOf("+")!==-1},T.prototype.isTruncating=function(){return this.flagStr.indexOf("w")!==-1},T.prototype.isAppendable=function(){return this.flagStr.indexOf("a")!==-1},T.prototype.isSynchronous=function(){return this.flagStr.indexOf("s")!==-1},T.prototype.isExclusive=function(){return this.flagStr.indexOf("x")!==-1},T.prototype.pathExistsAction=function(){return this.isExclusive()?I.THROW_EXCEPTION:this.isTruncating()?I.TRUNCATE_FILE:I.NOP},T.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&this.flagStr!=="r+"?I.CREATE_FILE:I.THROW_EXCEPTION},T.flagCache={},T.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"];var x;(function(n){n[n.FILE=32768]="FILE",n[n.DIRECTORY=16384]="DIRECTORY",n[n.SYMLINK=40960]="SYMLINK"})(x||(x={}));var M=function(t,r,e,i,o,a){if(i===void 0&&(i=new Date),o===void 0&&(o=new Date),a===void 0&&(a=new Date),this.size=r,this.atime=i,this.mtime=o,this.ctime=a,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,this.birthtime=new Date(0),this.fileData=null,e)this.mode=e;else switch(t){case x.FILE:this.mode=420;break;case x.DIRECTORY:default:this.mode=511}this.blocks=Math.ceil(r/512),this.mode<4096&&(this.mode|=t)};M.fromBuffer=function(t){var r=t.readUInt32LE(0),e=t.readUInt32LE(4),i=t.readDoubleLE(8),o=t.readDoubleLE(16),a=t.readDoubleLE(24);return new M(e&61440,r,e&4095,new Date(i),new Date(o),new Date(a))},M.prototype.toBuffer=function(){var t=d.alloc(32);return t.writeUInt32LE(this.size,0),t.writeUInt32LE(this.mode,4),t.writeDoubleLE(this.atime.getTime(),8),t.writeDoubleLE(this.mtime.getTime(),16),t.writeDoubleLE(this.ctime.getTime(),24),t},M.prototype.clone=function(){return new M(this.mode&61440,this.size,this.mode&4095,this.atime,this.mtime,this.ctime)},M.prototype.isFile=function(){return(this.mode&61440)===x.FILE},M.prototype.isDirectory=function(){return(this.mode&61440)===x.DIRECTORY},M.prototype.isSymbolicLink=function(){return(this.mode&61440)===x.SYMLINK},M.prototype.chmod=function(t){this.mode=this.mode&61440|t},M.prototype.isSocket=function(){return!1},M.prototype.isBlockDevice=function(){return!1},M.prototype.isCharacterDevice=function(){return!1},M.prototype.isFIFO=function(){return!1};var K=function(n,t){return n};function B(n){if(n)return n;throw new c(s.EIO,"Initialize BrowserFS with a file system using BrowserFS.initialize(filesystem)")}function V(n,t){switch(typeof n){case"number":return n;case"string":var r=parseInt(n,8);return isNaN(r)?t:r;default:return t}}function vt(n){if(n instanceof Date)return n;if(typeof n=="number")return new Date(n*1e3);throw new c(s.EINVAL,"Invalid time.")}function $(n){if(n.indexOf("\0")>=0)throw new c(s.EINVAL,"Path must be a string without null bytes.");if(n==="")throw new c(s.EINVAL,"Path must not be empty.");return p.resolve(n)}function dt(n,t,r,e){switch(typeof n){case"object":return{encoding:typeof n.encoding<"u"?n.encoding:t,flag:typeof n.flag<"u"?n.flag:r,mode:V(n.mode,e)};case"string":return{encoding:n,flag:r,mode:e};default:return{encoding:t,flag:r,mode:e}}}function ft(){}var z=function(){this.F_OK=0,this.R_OK=4,this.W_OK=2,this.X_OK=1,this.root=null,this.fdMap={},this.nextFd=100};z.prototype.initialize=function(t){if(!t.constructor.isAvailable())throw new c(s.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return this.root=t},z.prototype._toUnixTimestamp=function(t){if(typeof t=="number")return t;if(t instanceof Date)return t.getTime()/1e3;throw new Error("Cannot parse time: "+t)},z.prototype.getRootFS=function(){return this.root?this.root:null},z.prototype.rename=function(t,r,e){e===void 0&&(e=ft);var i=K(e,1);try{B(this.root).rename($(t),$(r),i)}catch(o){i(o)}},z.prototype.renameSync=function(t,r){B(this.root).renameSync($(t),$(r))},z.prototype.exists=function(t,r){r===void 0&&(r=ft);var e=K(r,1);try{return B(this.root).exists($(t),e)}catch{return e(!1)}},z.prototype.existsSync=function(t){try{return B(this.root).existsSync($(t))}catch{return!1}},z.prototype.stat=function(t,r){r===void 0&&(r=ft);var e=K(r,2);try{return B(this.root).stat($(t),!1,e)}catch(i){return e(i)}},z.prototype.statSync=function(t){return B(this.root).statSync($(t),!1)},z.prototype.lstat=function(t,r){r===void 0&&(r=ft);var e=K(r,2);try{return B(this.root).stat($(t),!0,e)}catch(i){return e(i)}},z.prototype.lstatSync=function(t){return B(this.root).statSync($(t),!0)},z.prototype.truncate=function(t,r,e){r===void 0&&(r=0),e===void 0&&(e=ft);var i=0;typeof r=="function"?e=r:typeof r=="number"&&(i=r);var o=K(e,1);try{if(i<0)throw new c(s.EINVAL);return B(this.root).truncate($(t),i,o)}catch(a){return o(a)}},z.prototype.truncateSync=function(t,r){if(r===void 0&&(r=0),r<0)throw new c(s.EINVAL);return B(this.root).truncateSync($(t),r)},z.prototype.unlink=function(t,r){r===void 0&&(r=ft);var e=K(r,1);try{return B(this.root).unlink($(t),e)}catch(i){return e(i)}},z.prototype.unlinkSync=function(t){return B(this.root).unlinkSync($(t))},z.prototype.open=function(t,r,e,i){var o=this;i===void 0&&(i=ft);var a=V(e,420);i=typeof e=="function"?e:i;var u=K(i,2);try{B(this.root).open($(t),T.getFileFlag(r),a,function(h,y){y?u(h,o.getFdForFile(y)):u(h)})}catch(h){u(h)}},z.prototype.openSync=function(t,r,e){return e===void 0&&(e=420),this.getFdForFile(B(this.root).openSync($(t),T.getFileFlag(r),V(e,420)))},z.prototype.readFile=function(t,r,e){r===void 0&&(r={}),e===void 0&&(e=ft);var i=dt(r,null,"r",null);e=typeof r=="function"?r:e;var o=K(e,2);try{var a=T.getFileFlag(i.flag);return a.isReadable()?B(this.root).readFile($(t),i.encoding,a,o):o(new c(s.EINVAL,"Flag passed to readFile must allow for reading."))}catch(u){return o(u)}},z.prototype.readFileSync=function(t,r){r===void 0&&(r={});var e=dt(r,null,"r",null),i=T.getFileFlag(e.flag);if(!i.isReadable())throw new c(s.EINVAL,"Flag passed to readFile must allow for reading.");return B(this.root).readFileSync($(t),e.encoding,i)},z.prototype.writeFile=function(t,r,e,i){e===void 0&&(e={}),i===void 0&&(i=ft);var o=dt(e,"utf8","w",420);i=typeof e=="function"?e:i;var a=K(i,1);try{var u=T.getFileFlag(o.flag);return u.isWriteable()?B(this.root).writeFile($(t),r,o.encoding,u,o.mode,a):a(new c(s.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(h){return a(h)}},z.prototype.writeFileSync=function(t,r,e){var i=dt(e,"utf8","w",420),o=T.getFileFlag(i.flag);if(!o.isWriteable())throw new c(s.EINVAL,"Flag passed to writeFile must allow for writing.");return B(this.root).writeFileSync($(t),r,i.encoding,o,i.mode)},z.prototype.appendFile=function(t,r,e,i){i===void 0&&(i=ft);var o=dt(e,"utf8","a",420);i=typeof e=="function"?e:i;var a=K(i,1);try{var u=T.getFileFlag(o.flag);if(!u.isAppendable())return a(new c(s.EINVAL,"Flag passed to appendFile must allow for appending."));B(this.root).appendFile($(t),r,o.encoding,u,o.mode,a)}catch(h){a(h)}},z.prototype.appendFileSync=function(t,r,e){var i=dt(e,"utf8","a",420),o=T.getFileFlag(i.flag);if(!o.isAppendable())throw new c(s.EINVAL,"Flag passed to appendFile must allow for appending.");return B(this.root).appendFileSync($(t),r,i.encoding,o,i.mode)},z.prototype.fstat=function(t,r){r===void 0&&(r=ft);var e=K(r,2);try{var i=this.fd2file(t);i.stat(e)}catch(o){e(o)}},z.prototype.fstatSync=function(t){return this.fd2file(t).statSync()},z.prototype.close=function(t,r){var e=this;r===void 0&&(r=ft);var i=K(r,1);try{this.fd2file(t).close(function(o){o||e.closeFd(t),i(o)})}catch(o){i(o)}},z.prototype.closeSync=function(t){this.fd2file(t).closeSync(),this.closeFd(t)},z.prototype.ftruncate=function(t,r,e){e===void 0&&(e=ft);var i=typeof r=="number"?r:0;e=typeof r=="function"?r:e;var o=K(e,1);try{var a=this.fd2file(t);if(i<0)throw new c(s.EINVAL);a.truncate(i,o)}catch(u){o(u)}},z.prototype.ftruncateSync=function(t,r){r===void 0&&(r=0);var e=this.fd2file(t);if(r<0)throw new c(s.EINVAL);e.truncateSync(r)},z.prototype.fsync=function(t,r){r===void 0&&(r=ft);var e=K(r,1);try{this.fd2file(t).sync(e)}catch(i){e(i)}},z.prototype.fsyncSync=function(t){this.fd2file(t).syncSync()},z.prototype.fdatasync=function(t,r){r===void 0&&(r=ft);var e=K(r,1);try{this.fd2file(t).datasync(e)}catch(i){e(i)}},z.prototype.fdatasyncSync=function(t){this.fd2file(t).datasyncSync()},z.prototype.write=function(t,r,e,i,o,a){a===void 0&&(a=ft);var u,h,y,L=null;if(typeof r=="string"){var U="utf8";switch(typeof e){case"function":a=e;break;case"number":L=e,U=typeof i=="string"?i:"utf8",a=typeof o=="function"?o:a;break;default:return a=typeof i=="function"?i:typeof o=="function"?o:a,a(new c(s.EINVAL,"Invalid arguments."))}u=d.from(r,U),h=0,y=u.length}else u=r,h=e,y=i,L=typeof o=="number"?o:null,a=typeof o=="function"?o:a;var Z=K(a,3);try{var et=this.fd2file(t);L==null&&(L=et.getPos()),et.write(u,h,y,L,Z)}catch(rt){Z(rt)}},z.prototype.writeSync=function(t,r,e,i,o){var a,u=0,h,y;if(typeof r=="string"){y=typeof e=="number"?e:null;var L=typeof i=="string"?i:"utf8";u=0,a=d.from(r,L),h=a.length}else a=r,u=e,h=i,y=typeof o=="number"?o:null;var U=this.fd2file(t);return y==null&&(y=U.getPos()),U.writeSync(a,u,h,y)},z.prototype.read=function(t,r,e,i,o,a){a===void 0&&(a=ft);var u,h,y,L,U;if(typeof r=="number"){y=r,u=e;var Z=i;a=typeof o=="function"?o:a,h=0,L=d.alloc(y),U=K(function(rt,ht,wt){if(rt)return a(rt);a(rt,wt.toString(Z),ht)},3)}else L=r,h=e,y=i,u=o,U=K(a,3);try{var et=this.fd2file(t);u==null&&(u=et.getPos()),et.read(L,h,y,u,U)}catch(rt){U(rt)}},z.prototype.readSync=function(t,r,e,i,o){var a=!1,u,h,y,L,U="utf8";typeof r=="number"?(y=r,L=e,U=i,h=0,u=d.alloc(y),a=!0):(u=r,h=e,y=i,L=o);var Z=this.fd2file(t);L==null&&(L=Z.getPos());var et=Z.readSync(u,h,y,L);return a?[u.toString(U),et]:et},z.prototype.fchown=function(t,r,e,i){i===void 0&&(i=ft);var o=K(i,1);try{this.fd2file(t).chown(r,e,o)}catch(a){o(a)}},z.prototype.fchownSync=function(t,r,e){this.fd2file(t).chownSync(r,e)},z.prototype.fchmod=function(t,r,e){var i=K(e,1);try{var o=typeof r=="string"?parseInt(r,8):r;this.fd2file(t).chmod(o,i)}catch(a){i(a)}},z.prototype.fchmodSync=function(t,r){var e=typeof r=="string"?parseInt(r,8):r;this.fd2file(t).chmodSync(e)},z.prototype.futimes=function(t,r,e,i){i===void 0&&(i=ft);var o=K(i,1);try{var a=this.fd2file(t);typeof r=="number"&&(r=new Date(r*1e3)),typeof e=="number"&&(e=new Date(e*1e3)),a.utimes(r,e,o)}catch(u){o(u)}},z.prototype.futimesSync=function(t,r,e){this.fd2file(t).utimesSync(vt(r),vt(e))},z.prototype.rmdir=function(t,r){r===void 0&&(r=ft);var e=K(r,1);try{t=$(t),B(this.root).rmdir(t,e)}catch(i){e(i)}},z.prototype.rmdirSync=function(t){return t=$(t),B(this.root).rmdirSync(t)},z.prototype.mkdir=function(t,r,e){e===void 0&&(e=ft),typeof r=="function"&&(e=r,r=511);var i=K(e,1);try{t=$(t),B(this.root).mkdir(t,r,i)}catch(o){i(o)}},z.prototype.mkdirSync=function(t,r){B(this.root).mkdirSync($(t),V(r,511))},z.prototype.readdir=function(t,r){r===void 0&&(r=ft);var e=K(r,2);try{t=$(t),B(this.root).readdir(t,e)}catch(i){e(i)}},z.prototype.readdirSync=function(t){return t=$(t),B(this.root).readdirSync(t)},z.prototype.link=function(t,r,e){e===void 0&&(e=ft);var i=K(e,1);try{t=$(t),r=$(r),B(this.root).link(t,r,i)}catch(o){i(o)}},z.prototype.linkSync=function(t,r){return t=$(t),r=$(r),B(this.root).linkSync(t,r)},z.prototype.symlink=function(t,r,e,i){i===void 0&&(i=ft);var o=typeof e=="string"?e:"file";i=typeof e=="function"?e:i;var a=K(i,1);try{if(o!=="file"&&o!=="dir")return a(new c(s.EINVAL,"Invalid type: "+o));t=$(t),r=$(r),B(this.root).symlink(t,r,o,a)}catch(u){a(u)}},z.prototype.symlinkSync=function(t,r,e){if(!e)e="file";else if(e!=="file"&&e!=="dir")throw new c(s.EINVAL,"Invalid type: "+e);return t=$(t),r=$(r),B(this.root).symlinkSync(t,r,e)},z.prototype.readlink=function(t,r){r===void 0&&(r=ft);var e=K(r,2);try{t=$(t),B(this.root).readlink(t,e)}catch(i){e(i)}},z.prototype.readlinkSync=function(t){return t=$(t),B(this.root).readlinkSync(t)},z.prototype.chown=function(t,r,e,i){i===void 0&&(i=ft);var o=K(i,1);try{t=$(t),B(this.root).chown(t,!1,r,e,o)}catch(a){o(a)}},z.prototype.chownSync=function(t,r,e){t=$(t),B(this.root).chownSync(t,!1,r,e)},z.prototype.lchown=function(t,r,e,i){i===void 0&&(i=ft);var o=K(i,1);try{t=$(t),B(this.root).chown(t,!0,r,e,o)}catch(a){o(a)}},z.prototype.lchownSync=function(t,r,e){t=$(t),B(this.root).chownSync(t,!0,r,e)},z.prototype.chmod=function(t,r,e){e===void 0&&(e=ft);var i=K(e,1);try{var o=V(r,-1);if(o<0)throw new c(s.EINVAL,"Invalid mode.");B(this.root).chmod($(t),!1,o,i)}catch(a){i(a)}},z.prototype.chmodSync=function(t,r){var e=V(r,-1);if(e<0)throw new c(s.EINVAL,"Invalid mode.");t=$(t),B(this.root).chmodSync(t,!1,e)},z.prototype.lchmod=function(t,r,e){e===void 0&&(e=ft);var i=K(e,1);try{var o=V(r,-1);if(o<0)throw new c(s.EINVAL,"Invalid mode.");B(this.root).chmod($(t),!0,o,i)}catch(a){i(a)}},z.prototype.lchmodSync=function(t,r){var e=V(r,-1);if(e<1)throw new c(s.EINVAL,"Invalid mode.");B(this.root).chmodSync($(t),!0,e)},z.prototype.utimes=function(t,r,e,i){i===void 0&&(i=ft);var o=K(i,1);try{B(this.root).utimes($(t),vt(r),vt(e),o)}catch(a){o(a)}},z.prototype.utimesSync=function(t,r,e){B(this.root).utimesSync($(t),vt(r),vt(e))},z.prototype.realpath=function(t,r,e){e===void 0&&(e=ft);var i=typeof r=="object"?r:{};e=typeof r=="function"?r:ft;var o=K(e,2);try{t=$(t),B(this.root).realpath(t,i,o)}catch(a){o(a)}},z.prototype.realpathSync=function(t,r){return r===void 0&&(r={}),t=$(t),B(this.root).realpathSync(t,r)},z.prototype.watchFile=function(t,r,e){throw new c(s.ENOTSUP)},z.prototype.unwatchFile=function(t,r){throw new c(s.ENOTSUP)},z.prototype.watch=function(t,r,e){throw new c(s.ENOTSUP)},z.prototype.access=function(t,r,e){throw new c(s.ENOTSUP)},z.prototype.accessSync=function(t,r){throw new c(s.ENOTSUP)},z.prototype.createReadStream=function(t,r){throw new c(s.ENOTSUP)},z.prototype.createWriteStream=function(t,r){throw new c(s.ENOTSUP)},z.prototype.wrapCallbacks=function(t){K=t},z.prototype.getFdForFile=function(t){var r=this.nextFd++;return this.fdMap[r]=t,r},z.prototype.fd2file=function(t){var r=this.fdMap[t];if(r)return r;throw new c(s.EBADF,"Invalid file descriptor.")},z.prototype.closeFd=function(t){delete this.fdMap[t]},z.Stats=M;var Q=new z,st={},Ft=z.prototype;Object.keys(Ft).forEach(function(n){typeof Q[n]=="function"?st[n]=function(){return Q[n].apply(Q,arguments)}:st[n]=Q[n]}),st.changeFSModule=function(n){Q=n},st.getFSModule=function(){return Q},st.FS=z;function mt(n,t,r,e,i){return n<t||r<t?n>r?r+1:n+1:e===i?t:t+1}function Lt(n,t){if(n===t)return 0;if(n.length>t.length){var r=n;n=t,t=r}for(var e=n.length,i=t.length;e>0&&n.charCodeAt(e-1)===t.charCodeAt(i-1);)e--,i--;for(var o=0;o<e&&n.charCodeAt(o)===t.charCodeAt(o);)o++;if(e-=o,i-=o,e===0||i===1)return i;for(var a=new Array(e<<1),u=0;u<e;)a[e+u]=n.charCodeAt(o+u),a[u]=++u;var h,y,L,U,Z;for(h=0;h+3<i;)for(var et=t.charCodeAt(o+(y=h)),rt=t.charCodeAt(o+(L=h+1)),ht=t.charCodeAt(o+(U=h+2)),wt=t.charCodeAt(o+(Z=h+3)),Rt=h+=4,qt=0;qt<e;){var pe=a[e+qt],ze=a[qt];y=mt(ze,y,L,et,pe),L=mt(y,L,U,rt,pe),U=mt(L,U,Z,ht,pe),Rt=mt(U,Z,Rt,wt,pe),a[qt++]=Rt,Z=U,U=L,L=y,y=ze}for(var Be=0;h<i;){var Sr=t.charCodeAt(o+(y=h));Be=++h;for(var Xe=0;Xe<e;Xe++){var Ye=a[Xe];a[Xe]=Be=Ye<y||Be<y?Ye>Be?Be+1:Ye+1:Sr===a[e+Xe]?y:y+1,y=Ye}}return Be}function Ot(n,t,r){n&&console.warn("["+t+"] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '"+t+".Create("+JSON.stringify(r)+", callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.")}var gt=typeof navigator<"u"&&!!(/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||navigator.userAgent.indexOf("Trident")!==-1),Ht=typeof window>"u";function P(){throw new Error("BFS has reached an impossible code path; please file a bug.")}function C(n,t,r){r.existsSync(n)||(C(p.dirname(n),t,r),r.mkdirSync(n,t))}function H(n){var t=at(n),r=t.byteOffset,e=t.byteLength;return r===0&&e===t.buffer.byteLength?t.buffer:t.buffer.slice(r,r+e)}function at(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function kt(n){return n instanceof d?n:n instanceof Uint8Array?_t(n):d.from(n)}function _t(n){return n instanceof d?n:n.byteOffset===0&&n.byteLength===n.buffer.byteLength?Et(n.buffer):d.from(n.buffer,n.byteOffset,n.byteLength)}function Et(n){return d.from(n)}function Tt(n,t,r){if(t===void 0&&(t=0),r===void 0&&(r=n.length),t<0||r<0||r>n.length||t>r)throw new TypeError("Invalid slice bounds on buffer of length "+n.length+": ["+t+", "+r+"]");if(n.length===0)return Mt();var e=at(n),i=n[0],o=(i+1)%255;return n[0]=o,e[0]===o?(e[0]=i,_t(e.slice(t,r))):(n[0]=i,_t(e.subarray(t,r)))}var Ut=null;function Mt(){return Ut||(Ut=d.alloc(0))}function R(n,t){d.isBuffer(n)?t():t(new c(s.EINVAL,"option must be a Buffer."))}function N(n,t,r){var e=n.Options,i=n.Name,o=0,a=!1,u=!1;function h(Z){a||(Z&&(a=!0,r(Z)),o--,o===0&&u&&r())}var y=function(Z){if(e.hasOwnProperty(Z)){var et=e[Z],rt=t[Z];if(rt==null){if(!et.optional){var ht=Object.keys(t).filter(function(Rt){return!(Rt in e)}).map(function(Rt){return{str:Rt,distance:Lt(Z,Rt)}}).filter(function(Rt){return Rt.distance<5}).sort(function(Rt,qt){return Rt.distance-qt.distance});return a?{}:(a=!0,{v:r(new c(s.EINVAL,"["+i+"] Required option '"+Z+"' not provided."+(ht.length>0?" You provided unrecognized option '"+ht[0].str+"'; perhaps you meant to type '"+Z+"'.":"")+`
Option description: `+et.description))})}}else{var wt=!1;if(Array.isArray(et.type)?wt=et.type.indexOf(typeof rt)!==-1:wt=typeof rt===et.type,wt)et.validator&&(o++,et.validator(rt,h));else return a?{}:(a=!0,{v:r(new c(s.EINVAL,"["+i+"] Value provided for option "+Z+" is not the proper type. Expected "+(Array.isArray(et.type)?"one of {"+et.type.join(", ")+"}":et.type)+", but received "+typeof rt+`
Option description: `+et.description))})}}};for(var L in e){var U=y(L);if(U)return U.v}u=!0,o===0&&!a&&r()}var G=Object.freeze({deprecationMessage:Ot,isIE:gt,isWebWorker:Ht,fail:P,mkdirpSync:C,buffer2ArrayBuffer:H,buffer2Uint8array:at,arrayish2Buffer:kt,uint8Array2Buffer:_t,arrayBuffer2Buffer:Et,copyingSlice:Tt,emptyBuffer:Mt,bufferValidator:R,checkOptions:N}),nt=function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()};nt.prototype.open=function(t){var r=this.fs.realPath(t.node),e=this.FS;try{e.isFile(t.node.mode)&&(t.nfd=this.nodefs.openSync(r,this.fs.flagsToPermissionString(t.flags)))}catch(i){throw i.code?new e.ErrnoError(this.ERRNO_CODES[i.code]):i}},nt.prototype.close=function(t){var r=this.FS;try{r.isFile(t.node.mode)&&t.nfd&&this.nodefs.closeSync(t.nfd)}catch(e){throw e.code?new r.ErrnoError(this.ERRNO_CODES[e.code]):e}},nt.prototype.read=function(t,r,e,i,o){try{return this.nodefs.readSync(t.nfd,_t(r),e,i,o)}catch(a){throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}},nt.prototype.write=function(t,r,e,i,o){try{return this.nodefs.writeSync(t.nfd,_t(r),e,i,o)}catch(a){throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}},nt.prototype.llseek=function(t,r,e){var i=r;if(e===1)i+=t.position;else if(e===2&&this.FS.isFile(t.node.mode))try{var o=this.nodefs.fstatSync(t.nfd);i+=o.size}catch(a){throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}if(i<0)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return t.position=i,i};var yt=function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()};yt.prototype.getattr=function(t){var r=this.fs.realPath(t),e;try{e=this.nodefs.lstatSync(r)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}return{dev:e.dev,ino:e.ino,mode:e.mode,nlink:e.nlink,uid:e.uid,gid:e.gid,rdev:e.rdev,size:e.size,atime:e.atime,mtime:e.mtime,ctime:e.ctime,blksize:e.blksize,blocks:e.blocks}},yt.prototype.setattr=function(t,r){var e=this.fs.realPath(t);try{if(r.mode!==void 0&&(this.nodefs.chmodSync(e,r.mode),t.mode=r.mode),r.timestamp!==void 0){var i=new Date(r.timestamp);this.nodefs.utimesSync(e,i,i)}}catch(o){if(!o.code)throw o;if(o.code!=="ENOTSUP")throw new this.FS.ErrnoError(this.ERRNO_CODES[o.code])}if(r.size!==void 0)try{this.nodefs.truncateSync(e,r.size)}catch(o){throw o.code?new this.FS.ErrnoError(this.ERRNO_CODES[o.code]):o}},yt.prototype.lookup=function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r),i=this.fs.getMode(e);return this.fs.createNode(t,r,i)},yt.prototype.mknod=function(t,r,e,i){var o=this.fs.createNode(t,r,e,i),a=this.fs.realPath(o);try{this.FS.isDir(o.mode)?this.nodefs.mkdirSync(a,o.mode):this.nodefs.writeFileSync(a,"",{mode:o.mode})}catch(u){throw u.code?new this.FS.ErrnoError(this.ERRNO_CODES[u.code]):u}return o},yt.prototype.rename=function(t,r,e){var i=this.fs.realPath(t),o=this.PATH.join2(this.fs.realPath(r),e);try{this.nodefs.renameSync(i,o),t.name=e,t.parent=r}catch(a){throw a.code?new this.FS.ErrnoError(this.ERRNO_CODES[a.code]):a}},yt.prototype.unlink=function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.unlinkSync(e)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}},yt.prototype.rmdir=function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.rmdirSync(e)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}},yt.prototype.readdir=function(t){var r=this.fs.realPath(t);try{var e=this.nodefs.readdirSync(r);return e.push(".",".."),e}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}},yt.prototype.symlink=function(t,r,e){var i=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.symlinkSync(e,i)}catch(o){throw o.code?new this.FS.ErrnoError(this.ERRNO_CODES[o.code]):o}},yt.prototype.readlink=function(t){var r=this.fs.realPath(t);try{return this.nodefs.readlinkSync(r)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}};var bt=function(t,r,e,i){t===void 0&&(t=self.FS),r===void 0&&(r=self.PATH),e===void 0&&(e=self.ERRNO_CODES),i===void 0&&(i=st),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},this.nodefs=i,this.FS=t,this.PATH=r,this.ERRNO_CODES=e,this.node_ops=new yt(this),this.stream_ops=new nt(this)};bt.prototype.mount=function(t){return this.createNode(null,"/",this.getMode(t.opts.root),0)},bt.prototype.createNode=function(t,r,e,i){var o=this.FS;if(!o.isDir(e)&&!o.isFile(e)&&!o.isLink(e))throw new o.ErrnoError(this.ERRNO_CODES.EINVAL);var a=o.createNode(t,r,e);return a.node_ops=this.node_ops,a.stream_ops=this.stream_ops,a},bt.prototype.getMode=function(t){var r;try{r=this.nodefs.lstatSync(t)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}return r.mode},bt.prototype.realPath=function(t){for(var r=[];t.parent!==t;)r.push(t.name),t=t.parent;return r.push(t.mount.opts.root),r.reverse(),this.PATH.join.apply(null,r)},bt.prototype.flagsToPermissionString=function(t){var r=typeof t=="string"?parseInt(t,10):t;return r&=8191,r in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[r]:t},bt.prototype.getNodeFS=function(){return this.nodefs},bt.prototype.getFS=function(){return this.FS},bt.prototype.getPATH=function(){return this.PATH},bt.prototype.getERRNO_CODES=function(){return this.ERRNO_CODES};var tt=function(){};tt.prototype.supportsLinks=function(){return!1},tt.prototype.diskSpace=function(t,r){r(0,0)},tt.prototype.openFile=function(t,r,e){throw new c(s.ENOTSUP)},tt.prototype.createFile=function(t,r,e,i){throw new c(s.ENOTSUP)},tt.prototype.open=function(t,r,e,i){var o=this,a=function(u,h){if(u)switch(r.pathNotExistsAction()){case I.CREATE_FILE:return o.stat(p.dirname(t),!1,function(y,L){y?i(y):L&&!L.isDirectory()?i(c.ENOTDIR(p.dirname(t))):o.createFile(t,r,e,i)});case I.THROW_EXCEPTION:return i(c.ENOENT(t));default:return i(new c(s.EINVAL,"Invalid FileFlag object."))}else{if(h&&h.isDirectory())return i(c.EISDIR(t));switch(r.pathExistsAction()){case I.THROW_EXCEPTION:return i(c.EEXIST(t));case I.TRUNCATE_FILE:return o.openFile(t,r,function(y,L){y?i(y):L?L.truncate(0,function(){L.sync(function(){i(null,L)})}):P()});case I.NOP:return o.openFile(t,r,i);default:return i(new c(s.EINVAL,"Invalid FileFlag object."))}}};this.stat(t,!1,a)},tt.prototype.rename=function(t,r,e){e(new c(s.ENOTSUP))},tt.prototype.renameSync=function(t,r){throw new c(s.ENOTSUP)},tt.prototype.stat=function(t,r,e){e(new c(s.ENOTSUP))},tt.prototype.statSync=function(t,r){throw new c(s.ENOTSUP)},tt.prototype.openFileSync=function(t,r,e){throw new c(s.ENOTSUP)},tt.prototype.createFileSync=function(t,r,e){throw new c(s.ENOTSUP)},tt.prototype.openSync=function(t,r,e){var i;try{i=this.statSync(t,!1)}catch{switch(r.pathNotExistsAction()){case I.CREATE_FILE:var o=this.statSync(p.dirname(t),!1);if(!o.isDirectory())throw c.ENOTDIR(p.dirname(t));return this.createFileSync(t,r,e);case I.THROW_EXCEPTION:throw c.ENOENT(t);default:throw new c(s.EINVAL,"Invalid FileFlag object.")}}if(i.isDirectory())throw c.EISDIR(t);switch(r.pathExistsAction()){case I.THROW_EXCEPTION:throw c.EEXIST(t);case I.TRUNCATE_FILE:return this.unlinkSync(t),this.createFileSync(t,r,i.mode);case I.NOP:return this.openFileSync(t,r,e);default:throw new c(s.EINVAL,"Invalid FileFlag object.")}},tt.prototype.unlink=function(t,r){r(new c(s.ENOTSUP))},tt.prototype.unlinkSync=function(t){throw new c(s.ENOTSUP)},tt.prototype.rmdir=function(t,r){r(new c(s.ENOTSUP))},tt.prototype.rmdirSync=function(t){throw new c(s.ENOTSUP)},tt.prototype.mkdir=function(t,r,e){e(new c(s.ENOTSUP))},tt.prototype.mkdirSync=function(t,r){throw new c(s.ENOTSUP)},tt.prototype.readdir=function(t,r){r(new c(s.ENOTSUP))},tt.prototype.readdirSync=function(t){throw new c(s.ENOTSUP)},tt.prototype.exists=function(t,r){this.stat(t,null,function(e){r(!e)})},tt.prototype.existsSync=function(t){try{return this.statSync(t,!0),!0}catch{return!1}},tt.prototype.realpath=function(t,r,e){if(this.supportsLinks())for(var i=t.split(p.sep),o=0;o<i.length;o++){var a=i.slice(0,o+1);i[o]=p.join.apply(null,a)}else this.exists(t,function(u){u?e(null,t):e(c.ENOENT(t))})},tt.prototype.realpathSync=function(t,r){if(this.supportsLinks()){for(var e=t.split(p.sep),i=0;i<e.length;i++){var o=e.slice(0,i+1);e[i]=p.join.apply(p,o)}return e.join(p.sep)}else{if(this.existsSync(t))return t;throw c.ENOENT(t)}},tt.prototype.truncate=function(t,r,e){this.open(t,T.getFileFlag("r+"),420,function(i,o){if(i)return e(i);o.truncate(r,function(a){o.close(function(u){e(a||u)})})})},tt.prototype.truncateSync=function(t,r){var e=this.openSync(t,T.getFileFlag("r+"),420);try{e.truncateSync(r)}catch(i){throw i}finally{e.closeSync()}},tt.prototype.readFile=function(t,r,e,i){var o=i;this.open(t,e,420,function(a,u){if(a)return i(a);i=function(h,y){u.close(function(L){return h||(h=L),o(h,y)})},u.stat(function(h,y){if(h)return i(h);var L=d.alloc(y.size);u.read(L,0,y.size,0,function(U){if(U)return i(U);if(r===null)return i(U,L);try{i(null,L.toString(r))}catch(Z){i(Z)}})})})},tt.prototype.readFileSync=function(t,r,e){var i=this.openSync(t,e,420);try{var o=i.statSync(),a=d.alloc(o.size);return i.readSync(a,0,o.size,0),i.closeSync(),r===null?a:a.toString(r)}finally{i.closeSync()}},tt.prototype.writeFile=function(t,r,e,i,o,a){var u=a;this.open(t,i,420,function(h,y){if(h)return a(h);a=function(L){y.close(function(U){u(L||U)})};try{typeof r=="string"&&(r=d.from(r,e))}catch(L){return a(L)}y.write(r,0,r.length,0,a)})},tt.prototype.writeFileSync=function(t,r,e,i,o){var a=this.openSync(t,i,o);try{typeof r=="string"&&(r=d.from(r,e)),a.writeSync(r,0,r.length,0)}finally{a.closeSync()}},tt.prototype.appendFile=function(t,r,e,i,o,a){var u=a;this.open(t,i,o,function(h,y){if(h)return a(h);a=function(L){y.close(function(U){u(L||U)})},typeof r=="string"&&(r=d.from(r,e)),y.write(r,0,r.length,null,a)})},tt.prototype.appendFileSync=function(t,r,e,i,o){var a=this.openSync(t,i,o);try{typeof r=="string"&&(r=d.from(r,e)),a.writeSync(r,0,r.length,null)}finally{a.closeSync()}},tt.prototype.chmod=function(t,r,e,i){i(new c(s.ENOTSUP))},tt.prototype.chmodSync=function(t,r,e){throw new c(s.ENOTSUP)},tt.prototype.chown=function(t,r,e,i,o){o(new c(s.ENOTSUP))},tt.prototype.chownSync=function(t,r,e,i){throw new c(s.ENOTSUP)},tt.prototype.utimes=function(t,r,e,i){i(new c(s.ENOTSUP))},tt.prototype.utimesSync=function(t,r,e){throw new c(s.ENOTSUP)},tt.prototype.link=function(t,r,e){e(new c(s.ENOTSUP))},tt.prototype.linkSync=function(t,r){throw new c(s.ENOTSUP)},tt.prototype.symlink=function(t,r,e,i){i(new c(s.ENOTSUP))},tt.prototype.symlinkSync=function(t,r,e){throw new c(s.ENOTSUP)},tt.prototype.readlink=function(t,r){r(new c(s.ENOTSUP))},tt.prototype.readlinkSync=function(t){throw new c(s.ENOTSUP)};var se=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.supportsSynch=function(){return!0},t.prototype.rename=function(e,i,o){try{this.renameSync(e,i),o()}catch(a){o(a)}},t.prototype.stat=function(e,i,o){try{o(null,this.statSync(e,i))}catch(a){o(a)}},t.prototype.open=function(e,i,o,a){try{a(null,this.openSync(e,i,o))}catch(u){a(u)}},t.prototype.unlink=function(e,i){try{this.unlinkSync(e),i()}catch(o){i(o)}},t.prototype.rmdir=function(e,i){try{this.rmdirSync(e),i()}catch(o){i(o)}},t.prototype.mkdir=function(e,i,o){try{this.mkdirSync(e,i),o()}catch(a){o(a)}},t.prototype.readdir=function(e,i){try{i(null,this.readdirSync(e))}catch(o){i(o)}},t.prototype.chmod=function(e,i,o,a){try{this.chmodSync(e,i,o),a()}catch(u){a(u)}},t.prototype.chown=function(e,i,o,a,u){try{this.chownSync(e,i,o,a),u()}catch(h){u(h)}},t.prototype.utimes=function(e,i,o,a){try{this.utimesSync(e,i,o),a()}catch(u){a(u)}},t.prototype.link=function(e,i,o){try{this.linkSync(e,i),o()}catch(a){o(a)}},t.prototype.symlink=function(e,i,o,a){try{this.symlinkSync(e,i,o),a()}catch(u){a(u)}},t.prototype.readlink=function(e,i){try{i(null,this.readlinkSync(e))}catch(o){i(o)}},t}(tt),St=function(){};St.prototype.sync=function(t){t(new c(s.ENOTSUP))},St.prototype.syncSync=function(){throw new c(s.ENOTSUP)},St.prototype.datasync=function(t){this.sync(t)},St.prototype.datasyncSync=function(){return this.syncSync()},St.prototype.chown=function(t,r,e){e(new c(s.ENOTSUP))},St.prototype.chownSync=function(t,r){throw new c(s.ENOTSUP)},St.prototype.chmod=function(t,r){r(new c(s.ENOTSUP))},St.prototype.chmodSync=function(t){throw new c(s.ENOTSUP)},St.prototype.utimes=function(t,r,e){e(new c(s.ENOTSUP))},St.prototype.utimesSync=function(t,r){throw new c(s.ENOTSUP)};var le=function(n){function t(r,e,i,o,a){if(n.call(this),this._pos=0,this._dirty=!1,this._fs=r,this._path=e,this._flag=i,this._stat=o,a?this._buffer=a:this._buffer=Mt(),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw new Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getBuffer=function(){return this._buffer},t.prototype.getStats=function(){return this._stat},t.prototype.getFlag=function(){return this._flag},t.prototype.getPath=function(){return this._path},t.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},t.prototype.advancePos=function(e){return this._pos+=e},t.prototype.setPos=function(e){return this._pos=e},t.prototype.sync=function(e){try{this.syncSync(),e()}catch(i){e(i)}},t.prototype.syncSync=function(){throw new c(s.ENOTSUP)},t.prototype.close=function(e){try{this.closeSync(),e()}catch(i){e(i)}},t.prototype.closeSync=function(){throw new c(s.ENOTSUP)},t.prototype.stat=function(e){try{e(null,this._stat.clone())}catch(i){e(i)}},t.prototype.statSync=function(){return this._stat.clone()},t.prototype.truncate=function(e,i){try{this.truncateSync(e),this._flag.isSynchronous()&&!st.getRootFS().supportsSynch()&&this.sync(i),i()}catch(o){return i(o)}},t.prototype.truncateSync=function(e){if(this._dirty=!0,!this._flag.isWriteable())throw new c(s.EPERM,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,e>this._buffer.length){var i=d.alloc(e-this._buffer.length,0);this.writeSync(i,0,i.length,this._buffer.length),this._flag.isSynchronous()&&st.getRootFS().supportsSynch()&&this.syncSync();return}this._stat.size=e;var o=d.alloc(e);this._buffer.copy(o,0,0,e),this._buffer=o,this._flag.isSynchronous()&&st.getRootFS().supportsSynch()&&this.syncSync()},t.prototype.write=function(e,i,o,a,u){try{u(null,this.writeSync(e,i,o,a),e)}catch(h){u(h)}},t.prototype.writeSync=function(e,i,o,a){if(this._dirty=!0,a==null&&(a=this.getPos()),!this._flag.isWriteable())throw new c(s.EPERM,"File not opened with a writeable mode.");var u=a+o;if(u>this._stat.size&&(this._stat.size=u,u>this._buffer.length)){var h=d.alloc(u);this._buffer.copy(h),this._buffer=h}var y=e.copy(this._buffer,a,i,i+o);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),y):(this.setPos(a+y),y)},t.prototype.read=function(e,i,o,a,u){try{u(null,this.readSync(e,i,o,a),e)}catch(h){u(h)}},t.prototype.readSync=function(e,i,o,a){if(!this._flag.isReadable())throw new c(s.EPERM,"File not opened with a readable mode.");a==null&&(a=this.getPos());var u=a+o;u>this._stat.size&&(o=this._stat.size-a);var h=this._buffer.copy(e,i,a,a+o);return this._stat.atime=new Date,this._pos=a+o,h},t.prototype.chmod=function(e,i){try{this.chmodSync(e),i()}catch(o){i(o)}},t.prototype.chmodSync=function(e){if(!this._fs.supportsProps())throw new c(s.ENOTSUP);this._dirty=!0,this._stat.chmod(e),this.syncSync()},t.prototype.isDirty=function(){return this._dirty},t.prototype.resetDirty=function(){this._dirty=!1},t}(St),de=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.close=function(e){e()},t.prototype.closeSync=function(){},t}(le),xe=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t}(le),b=function(n){function t(r,e,i){if(i===void 0&&(i=!0),n.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._initializeCallbacks=[],this._sync=r,this._async=e,!r.supportsSynch())throw new Error("The first argument to AsyncMirror needs to be a synchronous file system.");Ot(i,t.Name,{sync:"sync file system instance",async:"async file system instance"})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){try{var o=new t(e.sync,e.async,!1);o.initialize(function(a){a?i(a):i(null,o)},!1)}catch(a){i(a)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){return t.Name},t.prototype._syncSync=function(e){this._sync.writeFileSync(e.getPath(),e.getBuffer(),null,T.getFileFlag("w"),e.getStats().mode),this.enqueueOp({apiMethod:"writeFile",arguments:[e.getPath(),e.getBuffer(),null,e.getFlag(),e.getStats().mode]})},t.prototype.initialize=function(e,i){var o=this;i===void 0&&(i=!0),i&&console.warn("[AsyncMirror] AsyncMirror.initialize() is deprecated and will be removed in the next major version. Please use 'AsyncMirror.Create({ sync: (sync file system instance), async: (async file system instance)}, cb)' to create and initialize AsyncMirror instances.");var a=this._initializeCallbacks,u=function(U){o._isInitialized=!U,o._initializeCallbacks=[],a.forEach(function(Z){return Z(U)})};if(this._isInitialized)e();else if(a.push(e)===1){var h=function(U,Z,et){U!=="/"&&o._sync.mkdirSync(U,Z),o._async.readdir(U,function(rt,ht){var wt=0;function Rt(qt){qt?et(qt):wt<ht.length?(L(p.join(U,ht[wt]),Rt),wt++):et()}rt?et(rt):Rt()})},y=function(U,Z,et){o._async.readFile(U,null,T.getFileFlag("r"),function(rt,ht){if(rt)et(rt);else try{o._sync.writeFileSync(U,ht,null,T.getFileFlag("w"),Z)}catch(wt){rt=wt}finally{et(rt)}})},L=function(U,Z){o._async.stat(U,!1,function(et,rt){et?Z(et):rt.isDirectory()?h(U,rt.mode,Z):y(U,rt.mode,Z)})};h("/",0,u)}},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._sync.supportsProps()&&this._async.supportsProps()},t.prototype.renameSync=function(e,i){this.checkInitialized(),this._sync.renameSync(e,i),this.enqueueOp({apiMethod:"rename",arguments:[e,i]})},t.prototype.statSync=function(e,i){return this.checkInitialized(),this._sync.statSync(e,i)},t.prototype.openSync=function(e,i,o){this.checkInitialized();var a=this._sync.openSync(e,i,o);return a.closeSync(),new xe(this,e,i,this._sync.statSync(e,!1),this._sync.readFileSync(e,null,T.getFileFlag("r")))},t.prototype.unlinkSync=function(e){this.checkInitialized(),this._sync.unlinkSync(e),this.enqueueOp({apiMethod:"unlink",arguments:[e]})},t.prototype.rmdirSync=function(e){this.checkInitialized(),this._sync.rmdirSync(e),this.enqueueOp({apiMethod:"rmdir",arguments:[e]})},t.prototype.mkdirSync=function(e,i){this.checkInitialized(),this._sync.mkdirSync(e,i),this.enqueueOp({apiMethod:"mkdir",arguments:[e,i]})},t.prototype.readdirSync=function(e){return this.checkInitialized(),this._sync.readdirSync(e)},t.prototype.existsSync=function(e){return this.checkInitialized(),this._sync.existsSync(e)},t.prototype.chmodSync=function(e,i,o){this.checkInitialized(),this._sync.chmodSync(e,i,o),this.enqueueOp({apiMethod:"chmod",arguments:[e,i,o]})},t.prototype.chownSync=function(e,i,o,a){this.checkInitialized(),this._sync.chownSync(e,i,o,a),this.enqueueOp({apiMethod:"chown",arguments:[e,i,o,a]})},t.prototype.utimesSync=function(e,i,o){this.checkInitialized(),this._sync.utimesSync(e,i,o),this.enqueueOp({apiMethod:"utimes",arguments:[e,i,o]})},t.prototype.checkInitialized=function(){if(!this._isInitialized)throw new c(s.EPERM,"AsyncMirrorFS is not initialized. Please initialize AsyncMirrorFS using its initialize() method before using it.")},t.prototype.enqueueOp=function(e){var i=this;if(this._queue.push(e),!this._queueRunning){this._queueRunning=!0;var o=function(a){if(a&&console.error("WARNING: File system has desynchronized. Received following error: "+a+`
$`),i._queue.length>0){var u=i._queue.shift(),h=u.arguments;h.push(o),i._async[u.apiMethod].apply(i._async,h)}else i._queueRunning=!1};o()}},t}(se);b.Name="AsyncMirror",b.Options={sync:{type:"object",description:"The synchronous file system to mirror the asynchronous file system to."},async:{type:"object",description:"The asynchronous file system to mirror."}};function f(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}var l=Math.max;function k(n,t,r){return t=l(t===void 0?n.length-1:t,0),function(){for(var e=arguments,i=-1,o=l(e.length-t,0),a=Array(o);++i<o;)a[i]=e[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=e[i];return u[t]=r(a),f(n,this,u)}}function j(n){return n}function X(n,t){return k(n,t,j)}var J=function(n){return X(function(t){var r=t.pop();n.call(this,t,r)})};function Nt(n){return X(function(t,r){var e=J(function(i,o){var a=this;return n(t,function(u,h){u.apply(a,i.concat(h))},o)});return r.length?e.apply(this,r):e})}var xt=typeof D=="object"&&D&&D.Object===Object&&D,Pt=typeof self=="object"&&self&&self.Object===Object&&self,Jt=xt||Pt||Function("return this")(),Ct=Jt.Symbol,Ce=Object.prototype,lr=Ce.hasOwnProperty,tr=Ce.toString,er=Ct?Ct.toStringTag:void 0;function tn(n){var t=lr.call(n,er),r=n[er];try{n[er]=void 0;var e=!0}catch{}var i=tr.call(n);return e&&(t?n[er]=r:delete n[er]),i}var en=Object.prototype,rn=en.toString;function W(n){return rn.call(n)}var ot="[object Null]",g="[object Undefined]",lt=Ct?Ct.toStringTag:void 0;function jt(n){return n==null?n===void 0?g:ot:lt&&lt in Object(n)?tn(n):W(n)}function it(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var ge="[object AsyncFunction]",ut="[object Function]",Qt="[object GeneratorFunction]",q="[object Proxy]";function Y(n){if(!it(n))return!1;var t=jt(n);return t==ut||t==Qt||t==ge||t==q}var hr=9007199254740991;function Bt(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=hr}function pt(n){return n!=null&&Bt(n.length)&&!Y(n)}var rr={};function We(){}function Xt(n){return function(){if(n!==null){var t=n;n=null,t.apply(this,arguments)}}}var Dt=typeof Symbol=="function"&&Symbol.iterator,ue=function(n){return Dt&&n[Dt]&&n[Dt]()};function ye(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function ce(n){return n!=null&&typeof n=="object"}var pr="[object Arguments]";function nr(n){return ce(n)&&jt(n)==pr}var Gt=Object.prototype,me=Gt.hasOwnProperty,re=Gt.propertyIsEnumerable,Me=nr(function(){return arguments}())?nr:function(n){return ce(n)&&me.call(n,"callee")&&!re.call(n,"callee")},Re=Array.isArray;function xr(){return!1}var bn=typeof S=="object"&&S&&!S.nodeType&&S,kn=bn&&typeof E=="object"&&E&&!E.nodeType&&E,Yi=kn&&kn.exports===bn,On=Yi?Jt.Buffer:void 0,qi=On?On.isBuffer:void 0,Gi=qi||xr,Ki=9007199254740991,Ji=/^(?:0|[1-9]\d*)$/;function Qi(n,t){return t=t??Ki,!!t&&(typeof n=="number"||Ji.test(n))&&n>-1&&n%1==0&&n<t}var $i="[object Arguments]",to="[object Array]",eo="[object Boolean]",ro="[object Date]",no="[object Error]",io="[object Function]",oo="[object Map]",ao="[object Number]",so="[object Object]",uo="[object RegExp]",co="[object Set]",fo="[object String]",lo="[object WeakMap]",ho="[object ArrayBuffer]",po="[object DataView]",yo="[object Float32Array]",vo="[object Float64Array]",go="[object Int8Array]",mo="[object Int16Array]",wo="[object Int32Array]",_o="[object Uint8Array]",So="[object Uint8ClampedArray]",Eo="[object Uint16Array]",Io="[object Uint32Array]",Vt={};Vt[yo]=Vt[vo]=Vt[go]=Vt[mo]=Vt[wo]=Vt[_o]=Vt[So]=Vt[Eo]=Vt[Io]=!0,Vt[$i]=Vt[to]=Vt[ho]=Vt[eo]=Vt[po]=Vt[ro]=Vt[no]=Vt[io]=Vt[oo]=Vt[ao]=Vt[so]=Vt[uo]=Vt[co]=Vt[fo]=Vt[lo]=!1;function bo(n){return ce(n)&&Bt(n.length)&&!!Vt[jt(n)]}function ko(n){return function(t){return n(t)}}var Rn=typeof S=="object"&&S&&!S.nodeType&&S,Nn=Rn&&typeof E=="object"&&E&&!E.nodeType&&E,Oo=Nn&&Nn.exports===Rn,nn=Oo&&xt.process,Fn=function(){try{return nn&&nn.binding&&nn.binding("util")}catch{}}(),Tn=Fn&&Fn.isTypedArray,Ro=Tn?ko(Tn):bo,No=Object.prototype,Fo=No.hasOwnProperty;function To(n,t){var r=Re(n),e=!r&&Me(n),i=!r&&!e&&Gi(n),o=!r&&!e&&!i&&Ro(n),a=r||e||i||o,u=a?ye(n.length,String):[],h=u.length;for(var y in n)(t||Fo.call(n,y))&&!(a&&(y=="length"||i&&(y=="offset"||y=="parent")||o&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||Qi(y,h)))&&u.push(y);return u}var Lo=Object.prototype;function Do(n){var t=n&&n.constructor,r=typeof t=="function"&&t.prototype||Lo;return n===r}function Ao(n,t){return function(r){return n(t(r))}}var xo=Ao(Object.keys,Object),Co=Object.prototype,Mo=Co.hasOwnProperty;function Uo(n){if(!Do(n))return xo(n);var t=[];for(var r in Object(n))Mo.call(n,r)&&r!="constructor"&&t.push(r);return t}function Po(n){return pt(n)?To(n):Uo(n)}function jo(n){var t=-1,r=n.length;return function(){return++t<r?{value:n[t],key:t}:null}}function zo(n){var t=-1;return function(){var e=n.next();return e.done?null:(t++,{value:e.value,key:t})}}function Bo(n){var t=Po(n),r=-1,e=t.length;return function(){var o=t[++r];return r<e?{value:n[o],key:o}:null}}function Wo(n){if(pt(n))return jo(n);var t=ue(n);return t?zo(t):Bo(n)}function Ln(n){return function(){if(n===null)throw new Error("Callback was already called.");var t=n;n=null,t.apply(this,arguments)}}function Dn(n){return function(t,r,e){if(e=Xt(e||We),n<=0||!t)return e(null);var i=Wo(t),o=!1,a=0;function u(y,L){if(a-=1,y)o=!0,e(y);else{if(L===rr||o&&a<=0)return o=!0,e(null);h()}}function h(){for(;a<n&&!o;){var y=i();if(y===null){o=!0,a<=0&&e(null);return}a+=1,r(y.value,y.key,Ln(u))}}h()}}function An(n,t,r,e){Dn(t)(n,r,e)}function on(n,t){return function(r,e,i){return n(r,t,e,i)}}function Ho(n,t,r){r=Xt(r||We);var e=0,i=0,o=n.length;o===0&&r(null);function a(u,h){u?r(u):(++i===o||h===rr)&&r(null)}for(;e<o;e++)t(n[e],e,Ln(a))}var Vo=on(An,1/0),xn=function(n,t,r){var e=pt(n)?Ho:Vo;e(n,t,r)};function Zo(n){return function(t,r,e){return n(xn,t,r,e)}}function Cn(n,t,r,e){e=e||We,t=t||[];var i=[],o=0;n(t,function(a,u,h){var y=o++;r(a,function(L,U){i[y]=U,h(L)})},function(a){e(a,i)})}var Xo=Zo(Cn);Nt(Xo);function Yo(n){return function(t,r,e,i){return n(Dn(r),t,e,i)}}var qo=Yo(Cn),Go=on(qo,1);Nt(Go),X(function(n,t){return X(function(r){return n.apply(null,t.concat(r))})});function Ko(n,t){for(var r=-1,e=n==null?0:n.length;++r<e&&t(n[r],r,n)!==!1;);return n}var Mn=typeof setImmediate=="function"&&setImmediate,Un=typeof O=="object"&&typeof O.nextTick=="function";function Pn(n){setTimeout(n,0)}function jn(n){return X(function(t,r){n(function(){t.apply(null,r)})})}var Cr;Mn?Cr=setImmediate:Un?Cr=O.nextTick:Cr=Pn,jn(Cr);var Jo=on(An,1);function Qo(n,t,r,e){e=Xt(e||We),Jo(n,function(i,o,a){r(t,i,function(u,h){t=h,a(u)})},function(i){e(i,t)})}var $o=X(function(t){return X(function(r){var e=this,i=r[r.length-1];typeof i=="function"?r.pop():i=We,Qo(t,r,function(o,a,u){a.apply(e,o.concat(X(function(h,y){u(h,y)})))},function(o,a){i.apply(e,[o].concat(a))})})});X(function(n){return $o.apply(null,n.reverse())}),X(function(n){var t=[null].concat(n);return J(function(r,e){return e.apply(this,t)})});function zn(n){return X(function(t,r){t.apply(null,r.concat(X(function(e,i){typeof console=="object"&&(e?console.error&&console.error(e):console[n]&&Ko(i,function(o){console[n](o)}))})))})}zn("dir");function ta(n){return function(t,r,e){return n(t,e)}}function Bn(n,t,r){xn(n,ta(t),r)}zn("log");var Mr;Un?Mr=O.nextTick:Mn?Mr=setImmediate:Mr=Pn,jn(Mr);var we;function ea(){we||(we={},we[Dropbox.ApiError.NETWORK_ERROR]=s.EIO,we[Dropbox.ApiError.INVALID_PARAM]=s.EINVAL,we[Dropbox.ApiError.INVALID_TOKEN]=s.EPERM,we[Dropbox.ApiError.OAUTH_ERROR]=s.EPERM,we[Dropbox.ApiError.NOT_FOUND]=s.ENOENT,we[Dropbox.ApiError.INVALID_METHOD]=s.EINVAL,we[Dropbox.ApiError.NOT_ACCEPTABLE]=s.EINVAL,we[Dropbox.ApiError.CONFLICT]=s.EINVAL,we[Dropbox.ApiError.RATE_LIMITED]=s.EBUSY,we[Dropbox.ApiError.SERVER_ERROR]=s.EBUSY,we[Dropbox.ApiError.OVER_QUOTA]=s.ENOSPC)}function ra(n){return n&&n.stat.isFile}function na(n){return n&&n.stat.isFolder}function ia(n){return n==null||typeof n=="object"&&typeof n.byteLength=="number"}var he=function(t){this._cache={},this._client=t};he.prototype.readdir=function(t,r){var e=this,i=this.getCachedDirInfo(t);this._wrap(function(o){i!==null&&i.contents?e._client.readdir(t,{contentHash:i.stat.contentHash},o):e._client.readdir(t,o)},function(o,a,u,h){o?o.status===Dropbox.ApiError.NO_CONTENT&&i!==null?r(null,i.contents.slice(0)):r(o):(e.updateCachedDirInfo(t,u,a.slice(0)),h.forEach(function(y){e.updateCachedInfo(p.join(t,y.name),y)}),r(null,a))})},he.prototype.remove=function(t,r){var e=this;this._wrap(function(i){e._client.remove(t,i)},function(i,o){i||e.updateCachedInfo(t,o),r(i)})},he.prototype.move=function(t,r,e){var i=this;this._wrap(function(o){i._client.move(t,r,o)},function(o,a){o||(i.deleteCachedInfo(t),i.updateCachedInfo(r,a)),e(o)})},he.prototype.stat=function(t,r){var e=this;this._wrap(function(i){e._client.stat(t,i)},function(i,o){i||e.updateCachedInfo(t,o),r(i,o)})},he.prototype.readFile=function(t,r){var e=this,i=this.getCachedFileInfo(t);i!==null&&i.contents!==null?this.stat(t,function(o,a){o?r(o):a.contentHash===i.stat.contentHash?r(o,i.contents.slice(0),i.stat):e.readFile(t,r)}):this._wrap(function(o){e._client.readFile(t,{arrayBuffer:!0},o)},function(o,a,u){o||e.updateCachedInfo(t,u,a.slice(0)),r(o,a,u)})},he.prototype.writeFile=function(t,r,e){var i=this;this._wrap(function(o){i._client.writeFile(t,r,o)},function(o,a){o||i.updateCachedInfo(t,a,r.slice(0)),e(o,a)})},he.prototype.mkdir=function(t,r){var e=this;this._wrap(function(i){e._client.mkdir(t,i)},function(i,o){i||e.updateCachedInfo(t,o,[]),r(i)})},he.prototype._wrap=function(t,r){var e=0,i=function(o){var a=2;if(o&&3>++e)switch(o.status){case Dropbox.ApiError.SERVER_ERROR:case Dropbox.ApiError.NETWORK_ERROR:case Dropbox.ApiError.RATE_LIMITED:setTimeout(function(){t(i)},a*1e3);break;default:r.apply(null,arguments);break}else r.apply(null,arguments)};t(i)},he.prototype.getCachedInfo=function(t){return this._cache[t.toLowerCase()]},he.prototype.putCachedInfo=function(t,r){this._cache[t.toLowerCase()]=r},he.prototype.deleteCachedInfo=function(t){delete this._cache[t.toLowerCase()]},he.prototype.getCachedDirInfo=function(t){var r=this.getCachedInfo(t);return na(r)?r:null},he.prototype.getCachedFileInfo=function(t){var r=this.getCachedInfo(t);return ra(r)?r:null},he.prototype.updateCachedDirInfo=function(t,r,e){e===void 0&&(e=null);var i=this.getCachedInfo(t);r.contentHash!==null&&(i===void 0||i.stat.contentHash!==r.contentHash)&&this.putCachedInfo(t,{stat:r,contents:e})},he.prototype.updateCachedFileInfo=function(t,r,e){e===void 0&&(e=null);var i=this.getCachedInfo(t);r.versionTag!==null&&(i===void 0||i.stat.versionTag!==r.versionTag)&&this.putCachedInfo(t,{stat:r,contents:e})},he.prototype.updateCachedInfo=function(t,r,e){e===void 0&&(e=null),r.isFile&&ia(e)?this.updateCachedFileInfo(t,r,e):r.isFolder&&Array.isArray(e)&&this.updateCachedDirInfo(t,r,e)};var oa=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;if(this.isDirty()){var o=this.getBuffer(),a=H(o);this._fs._writeFileStrict(this.getPath(),a,function(u){u||i.resetDirty(),e(u)})}else e()},t.prototype.close=function(e){this.sync(e)},t}(le),Ur=function(n){function t(r,e){e===void 0&&(e=!0),n.call(this),this._client=new he(r),Ot(e,t.Name,{client:"authenticated dropbox client instance"}),ea()}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t(e.client,!1))},t.isAvailable=function(){return typeof Dropbox<"u"},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.empty=function(e){var i=this;this._client.readdir("/",function(o,a){if(o)e(i.convert(o,"/"));else{var u=function(y,L){var U=p.join("/",y);i._client.remove(U,function(Z){L(Z?i.convert(Z,U):null)})},h=function(y){y?e(y):e()};Bn(a,u,h)}})},t.prototype.rename=function(e,i,o){var a=this;this._client.move(e,i,function(u){u?a._client.stat(i,function(h,y){if(h||y.isFolder){var L=u.response.error.indexOf(e)>-1?e:i;o(a.convert(u,L))}else a._client.remove(i,function(U){U?o(a.convert(U,i)):a.rename(e,i,o)})}):o()})},t.prototype.stat=function(e,i,o){var a=this;this._client.stat(e,function(u,h){if(u)o(a.convert(u,e));else if(h&&h.isRemoved)o(c.FileError(s.ENOENT,e));else{var y=new M(a._statType(h),h.size);return o(null,y)}})},t.prototype.open=function(e,i,o,a){var u=this;this._client.readFile(e,function(h,y,L){if(h)if(i.isReadable())a(u.convert(h,e));else switch(h.status){case Dropbox.ApiError.NOT_FOUND:var U=new ArrayBuffer(0);return u._writeFileStrict(e,U,function(rt,ht){if(rt)a(rt);else{var wt=u._makeFile(e,i,ht,Et(U));a(null,wt)}});default:return a(u.convert(h,e))}else{var Z;y===null?Z=Mt():Z=Et(y);var et=u._makeFile(e,i,L,Z);return a(null,et)}})},t.prototype._writeFileStrict=function(e,i,o){var a=this,u=p.dirname(e);this.stat(u,!1,function(h,y){h?o(c.FileError(s.ENOENT,u)):a._client.writeFile(e,i,function(L,U){L?o(a.convert(L,e)):o(null,U)})})},t.prototype._statType=function(e){return e.isFile?x.FILE:x.DIRECTORY},t.prototype._makeFile=function(e,i,o,a){var u=this._statType(o),h=new M(u,o.size);return new oa(this,e,i,h,a)},t.prototype._remove=function(e,i,o){var a=this;this._client.stat(e,function(u,h){u?i(a.convert(u,e)):h.isFile&&!o?i(c.FileError(s.ENOTDIR,e)):!h.isFile&&o?i(c.FileError(s.EISDIR,e)):a._client.remove(e,function(y){i(y?a.convert(y,e):null)})})},t.prototype.unlink=function(e,i){this._remove(e,i,!0)},t.prototype.rmdir=function(e,i){this._remove(e,i,!1)},t.prototype.mkdir=function(e,i,o){var a=this,u=p.dirname(e);this._client.stat(u,function(h,y){h?o(a.convert(h,u)):a._client.mkdir(e,function(L){o(L?c.FileError(s.EEXIST,e):null)})})},t.prototype.readdir=function(e,i){var o=this;this._client.readdir(e,function(a,u){return a?i(o.convert(a)):i(null,u)})},t.prototype.convert=function(e,i){i===void 0&&(i=null);var o=we[e.status];return o===void 0&&(o=s.EIO),i?c.FileError(o,i):new c(o)},t}(tt);Ur.Name="Dropbox",Ur.Options={client:{type:"object",description:"An *authenticated* Dropbox client. Must be from the 0.10 JS SDK.",validator:function(n,t){n.isAuthenticated&&n.isAuthenticated()?t():t(new c(s.EINVAL,"'client' option must be an authenticated Dropbox client from the v0.10 JS SDK."))}}};function Kt(n,t){t===void 0&&(t="");for(var r=n.errno,e=n.node,i=[];e&&(i.unshift(e.name),e!==e.parent);)e=e.parent;return new c(r,m[r],i.length>0?"/"+i.join("/"):t)}var aa=function(n){function t(r,e,i,o){n.call(this),this._fs=r,this._FS=e,this._path=i,this._stream=o}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getPos=function(){},t.prototype.close=function(e){var i=null;try{this.closeSync()}catch(o){i=o}finally{e(i)}},t.prototype.closeSync=function(){try{this._FS.close(this._stream)}catch(e){throw Kt(e,this._path)}},t.prototype.stat=function(e){try{e(null,this.statSync())}catch(i){e(i)}},t.prototype.statSync=function(){try{return this._fs.statSync(this._path,!1)}catch(e){throw Kt(e,this._path)}},t.prototype.truncate=function(e,i){var o=null;try{this.truncateSync(e)}catch(a){o=a}finally{i(o)}},t.prototype.truncateSync=function(e){try{this._FS.ftruncate(this._stream.fd,e)}catch(i){throw Kt(i,this._path)}},t.prototype.write=function(e,i,o,a,u){try{u(null,this.writeSync(e,i,o,a),e)}catch(h){u(h)}},t.prototype.writeSync=function(e,i,o,a){try{var u=at(e),h=a===null?void 0:a;return this._FS.write(this._stream,u,i,o,h)}catch(y){throw Kt(y,this._path)}},t.prototype.read=function(e,i,o,a,u){try{u(null,this.readSync(e,i,o,a),e)}catch(h){u(h)}},t.prototype.readSync=function(e,i,o,a){try{var u=at(e),h=a===null?void 0:a;return this._FS.read(this._stream,u,i,o,h)}catch(y){throw Kt(y,this._path)}},t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.chown=function(e,i,o){var a=null;try{this.chownSync(e,i)}catch(u){a=u}finally{o(a)}},t.prototype.chownSync=function(e,i){try{this._FS.fchown(this._stream.fd,e,i)}catch(o){throw Kt(o,this._path)}},t.prototype.chmod=function(e,i){var o=null;try{this.chmodSync(e)}catch(a){o=a}finally{i(o)}},t.prototype.chmodSync=function(e){try{this._FS.fchmod(this._stream.fd,e)}catch(i){throw Kt(i,this._path)}},t.prototype.utimes=function(e,i,o){var a=null;try{this.utimesSync(e,i)}catch(u){a=u}finally{o(a)}},t.prototype.utimesSync=function(e,i){this._fs.utimesSync(this._path,e,i)},t}(St),Pr=function(n){function t(r){n.call(this),this._FS=r}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t(e.FS))},t.isAvailable=function(){return!0},t.prototype.getName=function(){return this._FS.DB_NAME()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsLinks=function(){return!0},t.prototype.supportsProps=function(){return!0},t.prototype.supportsSynch=function(){return!0},t.prototype.renameSync=function(e,i){try{this._FS.rename(e,i)}catch(o){throw o.errno===s.ENOENT?Kt(o,this.existsSync(e)?i:e):Kt(o)}},t.prototype.statSync=function(e,i){try{var o=i?this._FS.lstat(e):this._FS.stat(e),a=this.modeToFileType(o.mode);return new M(a,o.size,o.mode,o.atime,o.mtime,o.ctime)}catch(u){throw Kt(u,e)}},t.prototype.openSync=function(e,i,o){try{var a=this._FS.open(e,i.getFlagString(),o);if(this._FS.isDir(a.node.mode))throw this._FS.close(a),c.EISDIR(e);return new aa(this,this._FS,e,a)}catch(u){throw Kt(u,e)}},t.prototype.unlinkSync=function(e){try{this._FS.unlink(e)}catch(i){throw Kt(i,e)}},t.prototype.rmdirSync=function(e){try{this._FS.rmdir(e)}catch(i){throw Kt(i,e)}},t.prototype.mkdirSync=function(e,i){try{this._FS.mkdir(e,i)}catch(o){throw Kt(o,e)}},t.prototype.readdirSync=function(e){try{return this._FS.readdir(e).filter(function(i){return i!=="."&&i!==".."})}catch(i){throw Kt(i,e)}},t.prototype.truncateSync=function(e,i){try{this._FS.truncate(e,i)}catch(o){throw Kt(o,e)}},t.prototype.readFileSync=function(e,i,o){try{var a=this._FS.readFile(e,{flags:o.getFlagString()}),u=_t(a);return i?u.toString(i):u}catch(h){throw Kt(h,e)}},t.prototype.writeFileSync=function(e,i,o,a,u){try{o&&(i=d.from(i,o));var h=at(i);this._FS.writeFile(e,h,{flags:a.getFlagString(),encoding:"binary"}),this._FS.chmod(e,u)}catch(y){throw Kt(y,e)}},t.prototype.chmodSync=function(e,i,o){try{i?this._FS.lchmod(e,o):this._FS.chmod(e,o)}catch(a){throw Kt(a,e)}},t.prototype.chownSync=function(e,i,o,a){try{i?this._FS.lchown(e,o,a):this._FS.chown(e,o,a)}catch(u){throw Kt(u,e)}},t.prototype.symlinkSync=function(e,i,o){try{this._FS.symlink(e,i)}catch(a){throw Kt(a)}},t.prototype.readlinkSync=function(e){try{return this._FS.readlink(e)}catch(i){throw Kt(i,e)}},t.prototype.utimesSync=function(e,i,o){try{this._FS.utime(e,i.getTime(),o.getTime())}catch(a){throw Kt(a,e)}},t.prototype.modeToFileType=function(e){if(this._FS.isDir(e))return x.DIRECTORY;if(this._FS.isFile(e))return x.FILE;if(this._FS.isLink(e))return x.SYMLINK;throw c.EPERM("Invalid mode: "+e)},t}(se);Pr.Name="EmscriptenFileSystem",Pr.Options={FS:{type:"object",description:"The Emscripten file system to use (the `FS` variable)"}};var dr=function(n){function t(r,e){n.call(this),this._folder=r,this._wrapped=e}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t(e.folder,e.wrapped))},t.isAvailable=function(){return!0},t.prototype.initialize=function(e){var i=this;this._wrapped.exists(this._folder,function(o){o?e():i._wrapped.isReadOnly()?e(c.ENOENT(i._folder)):i._wrapped.mkdir(i._folder,511,e)})},t.prototype.getName=function(){return this._wrapped.getName()},t.prototype.isReadOnly=function(){return this._wrapped.isReadOnly()},t.prototype.supportsProps=function(){return this._wrapped.supportsProps()},t.prototype.supportsSynch=function(){return this._wrapped.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t}(tt);dr.Name="FolderAdapter",dr.Options={folder:{type:"string",description:"The folder to use as the root directory"},wrapped:{type:"object",description:"The file system to wrap"}};function Wn(n,t){if(t!==null&&typeof t=="object"){var r=t,e=r.path;e&&(e="/"+p.relative(n,e),r.message=r.message.replace(r.path,e),r.path=e)}return t}function sa(n,t){return typeof t=="function"?function(r){arguments.length>0&&(arguments[0]=Wn(n,r)),t.apply(null,arguments)}:t}function Hn(n,t,r){return n.slice(n.length-4)!=="Sync"?function(){return arguments.length>0&&(t&&(arguments[0]=p.join(this._folder,arguments[0])),r&&(arguments[1]=p.join(this._folder,arguments[1])),arguments[arguments.length-1]=sa(this._folder,arguments[arguments.length-1])),this._wrapped[n].apply(this._wrapped,arguments)}:function(){try{return t&&(arguments[0]=p.join(this._folder,arguments[0])),r&&(arguments[1]=p.join(this._folder,arguments[1])),this._wrapped[n].apply(this._wrapped,arguments)}catch(e){throw Wn(this._folder,e)}}}["diskSpace","stat","statSync","open","openSync","unlink","unlinkSync","rmdir","rmdirSync","mkdir","mkdirSync","readdir","readdirSync","exists","existsSync","realpath","realpathSync","truncate","truncateSync","readFile","readFileSync","writeFile","writeFileSync","appendFile","appendFileSync","chmod","chmodSync","chown","chownSync","utimes","utimesSync","readlink","readlinkSync"].forEach(function(n){dr.prototype[n]=Hn(n,!0,!1)}),["rename","renameSync","link","linkSync","symlink","symlinkSync"].forEach(function(n){dr.prototype[n]=Hn(n,!0,!0)});var jr;typeof window<"u"?jr=window:typeof self<"u"?jr=self:jr=D;var $t=jr;function ua(n){return n.isDirectory}var an=$t.webkitRequestFileSystem||$t.requestFileSystem||null;function ca(n,t,r,e){if(typeof navigator.webkitPersistentStorage<"u")switch(n){case $t.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(t,r,e);break;case $t.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(t,r,e);break;default:e(new TypeError("Invalid storage type: "+n));break}else $t.webkitStorageInfo.requestQuota(n,t,r,e)}function fa(n){return Array.prototype.slice.call(n||[],0)}function Ue(n,t,r){switch(n.name){case"PathExistsError":return c.EEXIST(t);case"QuotaExceededError":return c.FileError(s.ENOSPC,t);case"NotFoundError":return c.ENOENT(t);case"SecurityError":return c.FileError(s.EACCES,t);case"InvalidModificationError":return c.FileError(s.EPERM,t);case"TypeMismatchError":return c.FileError(r?s.ENOTDIR:s.EISDIR,t);case"EncodingError":case"InvalidStateError":case"NoModificationAllowedError":default:return c.FileError(s.EINVAL,t)}}var la=function(n){function t(r,e,i,o,a,u){n.call(this,r,i,o,a,u),this._entry=e}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;if(!this.isDirty())return e();this._entry.createWriter(function(o){var a=i.getBuffer(),u=new Blob([H(a)]),h=u.size;o.onwriteend=function(y){o.onwriteend=null,o.onerror=null,o.truncate(h),i.resetDirty(),e()},o.onerror=function(y){e(Ue(y,i.getPath(),!1))},o.write(u)})},t.prototype.close=function(e){this.sync(e)},t}(le),zr=function(n){function t(r,e,i){r===void 0&&(r=5),e===void 0&&(e=$t.PERSISTENT),i===void 0&&(i=!0),n.call(this),this.size=1024*1024*r,this.type=e,Ot(i,t.Name,{size:r,type:e})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o=new t(e.size,e.type,!1);o.allocate(function(a){return a?i(a):i(null,o)},!1)},t.isAvailable=function(){return!!an},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.allocate=function(e,i){var o=this;e===void 0&&(e=function(){}),i===void 0&&(i=!0),i&&console.warn("[HTML5FS] HTML5FS.allocate() is deprecated and will be removed in the next major release. Please use 'HTML5FS.Create({type: "+this.type+", size: "+this.size+"}, cb)' to create and allocate HTML5FS instances.");var a=function(h){o.fs=h,e()},u=function(h){e(Ue(h,"/",!0))};this.type===$t.PERSISTENT?ca(this.type,this.size,function(h){an(o.type,h,a,u)},u):an(this.type,this.size,a,u)},t.prototype.empty=function(e){this._readdir("/",function(i,o){if(i)console.error("Failed to empty FS"),e(i);else{var a=function(h){i?(console.error("Failed to empty FS"),e(i)):e()},u=function(h,y){var L=function(){y()},U=function(Z){y(Ue(Z,h.fullPath,!h.isDirectory))};ua(h)?h.removeRecursively(L,U):h.remove(L,U)};Bn(o,u,a)}})},t.prototype.rename=function(e,i,o){var a=this,u=2,h=0,y=this.fs.root,L=e,U=function(et){--u<=0&&o(Ue(et,L,!1))},Z=function(et){if(++h===2)return o(new c(s.EINVAL,"Something was identified as both a file and a directory. This should never happen."));if(e===i)return o();L=p.dirname(i),y.getDirectory(L,{},function(rt){L=p.basename(i),et.moveTo(rt,L,function(ht){o()},function(ht){et.isDirectory?(L=i,a.unlink(i,function(wt){wt?U(ht):a.rename(e,i,o)})):U(ht)})},U)};y.getFile(e,{},Z,U),y.getDirectory(e,{},Z,U)},t.prototype.stat=function(e,i,o){var a=this,u={create:!1},h=function(Z){var et=function(rt){var ht=new M(x.FILE,rt.size);o(null,ht)};Z.file(et,L)},y=function(Z){var et=4096,rt=new M(x.DIRECTORY,et);o(null,rt)},L=function(Z){o(Ue(Z,e,!1))},U=function(){a.fs.root.getDirectory(e,u,y,L)};this.fs.root.getFile(e,u,h,U)},t.prototype.open=function(e,i,o,a){var u=this,h=function(y){y.name==="InvalidModificationError"&&i.isExclusive()?a(c.EEXIST(e)):a(Ue(y,e,!1))};this.fs.root.getFile(e,{create:i.pathNotExistsAction()===I.CREATE_FILE,exclusive:i.isExclusive()},function(y){y.file(function(L){var U=new FileReader;U.onloadend=function(Z){var et=u._makeFile(e,y,i,L,U.result);a(null,et)},U.onerror=function(Z){h(U.error)},U.readAsArrayBuffer(L)},h)},h)},t.prototype.unlink=function(e,i){this._remove(e,i,!0)},t.prototype.rmdir=function(e,i){var o=this;this.readdir(e,function(a,u){a?i(a):u.length>0?i(c.ENOTEMPTY(e)):o._remove(e,i,!1)})},t.prototype.mkdir=function(e,i,o){var a={create:!0,exclusive:!0},u=function(y){o()},h=function(y){o(Ue(y,e,!0))};this.fs.root.getDirectory(e,a,u,h)},t.prototype.readdir=function(e,i){this._readdir(e,function(o,a){if(a){for(var u=[],h=0,y=a;h<y.length;h+=1){var L=y[h];u.push(L.name)}i(null,u)}else return i(o)})},t.prototype._makeFile=function(e,i,o,a,u){u===void 0&&(u=new ArrayBuffer(0));var h=new M(x.FILE,a.size),y=Et(u);return new la(this,i,e,o,h,y)},t.prototype._readdir=function(e,i){var o=function(a){i(Ue(a,e,!0))};this.fs.root.getDirectory(e,{create:!1},function(a){var u=a.createReader(),h=[],y=function(){u.readEntries(function(L){L.length?(h=h.concat(fa(L)),y()):i(null,h)},o)};y()},o)},t.prototype._remove=function(e,i,o){var a=function(y){var L=function(){i()},U=function(Z){i(Ue(Z,e,!o))};y.remove(L,U)},u=function(y){i(Ue(y,e,!o))},h={create:!1};o?this.fs.root.getFile(e,h,a,u):this.fs.root.getDirectory(e,h,a,u)},t}(tt);zr.Name="HTML5FS",zr.Options={size:{type:"number",optional:!0,description:"Storage quota to request, in megabytes. Allocated value may be less. Defaults to 5."},type:{type:"number",optional:!0,description:"window.PERSISTENT or window.TEMPORARY. Defaults to PERSISTENT."}};var _e=function(t,r,e,i,o,a){this.id=t,this.size=r,this.mode=e,this.atime=i,this.mtime=o,this.ctime=a};_e.fromBuffer=function(t){if(t===void 0)throw new Error("NO");return new _e(t.toString("ascii",30),t.readUInt32LE(0),t.readUInt16LE(4),t.readDoubleLE(6),t.readDoubleLE(14),t.readDoubleLE(22))},_e.prototype.toStats=function(){return new M((this.mode&61440)===x.DIRECTORY?x.DIRECTORY:x.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},_e.prototype.getSize=function(){return 30+this.id.length},_e.prototype.toBuffer=function(t){return t===void 0&&(t=d.alloc(this.getSize())),t.writeUInt32LE(this.size,0),t.writeUInt16LE(this.mode,4),t.writeDoubleLE(this.atime,6),t.writeDoubleLE(this.mtime,14),t.writeDoubleLE(this.ctime,22),t.write(this.id,30,this.id.length,"ascii"),t},_e.prototype.update=function(t){var r=!1;this.size!==t.size&&(this.size=t.size,r=!0),this.mode!==t.mode&&(this.mode=t.mode,r=!0);var e=t.atime.getTime();this.atime!==e&&(this.atime=e,r=!0);var i=t.mtime.getTime();this.mtime!==i&&(this.mtime=i,r=!0);var o=t.ctime.getTime();return this.ctime!==o&&(this.ctime=o,r=!0),r},_e.prototype.isFile=function(){return(this.mode&61440)===x.FILE},_e.prototype.isDirectory=function(){return(this.mode&61440)===x.DIRECTORY};var qe="/",sn=null;function Vn(){return sn||(sn=d.from("{}"))}function Br(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,r=n==="x"?t:t&3|8;return r.toString(16)})}function be(n,t){return n?(t(n),!1):!0}function ee(n,t,r){return n?(t.abort(function(){r(n)}),!1):!0}var He=function(t){this.store=t,this.originalData={},this.modifiedKeys=[]};He.prototype.get=function(t){var r=this.store.get(t);return this.stashOldValue(t,r),r},He.prototype.put=function(t,r,e){return this.markModified(t),this.store.put(t,r,e)},He.prototype.del=function(t){this.markModified(t),this.store.del(t)},He.prototype.commit=function(){},He.prototype.abort=function(){for(var t=this,r=0,e=t.modifiedKeys;r<e.length;r+=1){var i=e[r],o=t.originalData[i];o?t.store.put(i,o,!0):t.store.del(i)}},He.prototype.stashOldValue=function(t,r){this.originalData.hasOwnProperty(t)||(this.originalData[t]=r)},He.prototype.markModified=function(t){this.modifiedKeys.indexOf(t)===-1&&(this.modifiedKeys.push(t),this.originalData.hasOwnProperty(t)||(this.originalData[t]=this.store.get(t)))};var Zn=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t}(le),Xn=function(n){function t(r){n.call(this),this.store=r.store,this.makeRootDirectory()}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.getName=function(){return this.store.name()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.empty=function(){this.store.clear(),this.makeRootDirectory()},t.prototype.renameSync=function(e,i){var o=this.store.beginTransaction("readwrite"),a=p.dirname(e),u=p.basename(e),h=p.dirname(i),y=p.basename(i),L=this.findINode(o,a),U=this.getDirListing(o,a,L);if(!U[u])throw c.ENOENT(e);var Z=U[u];if(delete U[u],(h+"/").indexOf(e+"/")===0)throw new c(s.EBUSY,a);var et,rt;if(h===a?(et=L,rt=U):(et=this.findINode(o,h),rt=this.getDirListing(o,h,et)),rt[y]){var ht=this.getINode(o,i,rt[y]);if(ht.isFile())try{o.del(ht.id),o.del(rt[y])}catch(wt){throw o.abort(),wt}else throw c.EPERM(i)}rt[y]=Z;try{o.put(L.id,d.from(JSON.stringify(U)),!0),o.put(et.id,d.from(JSON.stringify(rt)),!0)}catch(wt){throw o.abort(),wt}o.commit()},t.prototype.statSync=function(e,i){return this.findINode(this.store.beginTransaction("readonly"),e).toStats()},t.prototype.createFileSync=function(e,i,o){var a=this.store.beginTransaction("readwrite"),u=Mt(),h=this.commitNewFile(a,e,x.FILE,o,u);return new Zn(this,e,i,h.toStats(),u)},t.prototype.openFileSync=function(e,i){var o=this.store.beginTransaction("readonly"),a=this.findINode(o,e),u=o.get(a.id);if(u===void 0)throw c.ENOENT(e);return new Zn(this,e,i,a.toStats(),u)},t.prototype.unlinkSync=function(e){this.removeEntry(e,!1)},t.prototype.rmdirSync=function(e){if(this.readdirSync(e).length>0)throw c.ENOTEMPTY(e);this.removeEntry(e,!0)},t.prototype.mkdirSync=function(e,i){var o=this.store.beginTransaction("readwrite"),a=d.from("{}");this.commitNewFile(o,e,x.DIRECTORY,i,a)},t.prototype.readdirSync=function(e){var i=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(i,e,this.findINode(i,e)))},t.prototype._syncSync=function(e,i,o){var a=this.store.beginTransaction("readwrite"),u=this._findINode(a,p.dirname(e),p.basename(e)),h=this.getINode(a,e,u),y=h.update(o);try{a.put(h.id,i,!0),y&&a.put(u,h.toBuffer(),!0)}catch(L){throw a.abort(),L}a.commit()},t.prototype.makeRootDirectory=function(){var e=this.store.beginTransaction("readwrite");if(e.get(qe)===void 0){var i=new Date().getTime(),o=new _e(Br(),4096,511|x.DIRECTORY,i,i,i);e.put(o.id,Vn(),!1),e.put(qe,o.toBuffer(),!1),e.commit()}},t.prototype._findINode=function(e,i,o){var a=this,u=function(h){var y=a.getDirListing(e,i,h);if(y[o])return y[o];throw c.ENOENT(p.resolve(i,o))};return i==="/"?o===""?qe:u(this.getINode(e,i,qe)):u(this.getINode(e,i+p.sep+o,this._findINode(e,p.dirname(i),p.basename(i))))},t.prototype.findINode=function(e,i){return this.getINode(e,i,this._findINode(e,p.dirname(i),p.basename(i)))},t.prototype.getINode=function(e,i,o){var a=e.get(o);if(a===void 0)throw c.ENOENT(i);return _e.fromBuffer(a)},t.prototype.getDirListing=function(e,i,o){if(!o.isDirectory())throw c.ENOTDIR(i);var a=e.get(o.id);if(a===void 0)throw c.ENOENT(i);return JSON.parse(a.toString())},t.prototype.addNewNode=function(e,i){for(var o=0,a;o<5;)try{return a=Br(),e.put(a,i,!1),a}catch{}throw new c(s.EIO,"Unable to commit data to key-value store.")},t.prototype.commitNewFile=function(e,i,o,a,u){var h=p.dirname(i),y=p.basename(i),L=this.findINode(e,h),U=this.getDirListing(e,h,L),Z=new Date().getTime();if(i==="/"||U[y])throw c.EEXIST(i);var et;try{var rt=this.addNewNode(e,u);et=new _e(rt,u.length,a|o,Z,Z,Z);var ht=this.addNewNode(e,et.toBuffer());U[y]=ht,e.put(L.id,d.from(JSON.stringify(U)),!0)}catch(wt){throw e.abort(),wt}return e.commit(),et},t.prototype.removeEntry=function(e,i){var o=this.store.beginTransaction("readwrite"),a=p.dirname(e),u=this.findINode(o,a),h=this.getDirListing(o,a,u),y=p.basename(e);if(!h[y])throw c.ENOENT(e);var L=h[y];delete h[y];var U=this.getINode(o,e,L);if(!i&&U.isDirectory())throw c.EISDIR(e);if(i&&!U.isDirectory())throw c.ENOTDIR(e);try{o.del(U.id),o.del(L),o.put(u.id,d.from(JSON.stringify(h)),!0)}catch(Z){throw o.abort(),Z}o.commit()},t}(se),Yn=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),function(o){o||i.resetDirty(),e(o)}):e()},t.prototype.close=function(e){this.sync(e)},t}(le),ha=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.init=function(e,i){this.store=e,this.makeRootDirectory(i)},t.prototype.getName=function(){return this.store.name()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.empty=function(e){var i=this;this.store.clear(function(o){be(o,e)&&i.makeRootDirectory(e)})},t.prototype.rename=function(e,i,o){var a=this,u=this.store.beginTransaction("readwrite"),h=p.dirname(e),y=p.basename(e),L=p.dirname(i),U=p.basename(i),Z={},et={},rt=!1;if((L+"/").indexOf(e+"/")===0)return o(new c(s.EBUSY,h));var ht=function(){if(!(rt||!et.hasOwnProperty(h)||!et.hasOwnProperty(L))){var Rt=et[h],qt=Z[h],pe=et[L],ze=Z[L];if(!Rt[y])o(c.ENOENT(e));else{var Be=Rt[y];delete Rt[y];var Sr=function(){pe[U]=Be,u.put(qt.id,d.from(JSON.stringify(Rt)),!0,function(Xe){ee(Xe,u,o)&&(h===L?u.commit(o):u.put(ze.id,d.from(JSON.stringify(pe)),!0,function(Ye){ee(Ye,u,o)&&u.commit(o)}))})};pe[U]?a.getINode(u,i,pe[U],function(Xe,Ye){ee(Xe,u,o)&&(Ye.isFile()?u.del(Ye.id,function(xi){ee(xi,u,o)&&u.del(pe[U],function(za){ee(za,u,o)&&Sr()})}):u.abort(function(xi){o(c.EPERM(i))}))}):Sr()}}},wt=function(Rt){a.findINodeAndDirListing(u,Rt,function(qt,pe,ze){qt?rt||(rt=!0,u.abort(function(){o(qt)})):(Z[Rt]=pe,et[Rt]=ze,ht())})};wt(h),h!==L&&wt(L)},t.prototype.stat=function(e,i,o){var a=this.store.beginTransaction("readonly");this.findINode(a,e,function(u,h){be(u,o)&&o(null,h.toStats())})},t.prototype.createFile=function(e,i,o,a){var u=this,h=this.store.beginTransaction("readwrite"),y=Mt();this.commitNewFile(h,e,x.FILE,o,y,function(L,U){be(L,a)&&a(null,new Yn(u,e,i,U.toStats(),y))})},t.prototype.openFile=function(e,i,o){var a=this,u=this.store.beginTransaction("readonly");this.findINode(u,e,function(h,y){be(h,o)&&u.get(y.id,function(L,U){be(L,o)&&(U===void 0?o(c.ENOENT(e)):o(null,new Yn(a,e,i,y.toStats(),U)))})})},t.prototype.unlink=function(e,i){this.removeEntry(e,!1,i)},t.prototype.rmdir=function(e,i){var o=this;this.readdir(e,function(a,u){a?i(a):u.length>0?i(c.ENOTEMPTY(e)):o.removeEntry(e,!0,i)})},t.prototype.mkdir=function(e,i,o){var a=this.store.beginTransaction("readwrite"),u=d.from("{}");this.commitNewFile(a,e,x.DIRECTORY,i,u,o)},t.prototype.readdir=function(e,i){var o=this,a=this.store.beginTransaction("readonly");this.findINode(a,e,function(u,h){be(u,i)&&o.getDirListing(a,e,h,function(y,L){be(y,i)&&i(null,Object.keys(L))})})},t.prototype._sync=function(e,i,o,a){var u=this,h=this.store.beginTransaction("readwrite");this._findINode(h,p.dirname(e),p.basename(e),function(y,L){ee(y,h,a)&&u.getINode(h,e,L,function(U,Z){if(ee(U,h,a)){var et=Z.update(o);h.put(Z.id,i,!0,function(rt){ee(rt,h,a)&&(et?h.put(L,Z.toBuffer(),!0,function(ht){ee(ht,h,a)&&h.commit(a)}):h.commit(a))})}})})},t.prototype.makeRootDirectory=function(e){var i=this.store.beginTransaction("readwrite");i.get(qe,function(o,a){if(o||a===void 0){var u=new Date().getTime(),h=new _e(Br(),4096,511|x.DIRECTORY,u,u,u);i.put(h.id,Vn(),!1,function(y){ee(y,i,e)&&i.put(qe,h.toBuffer(),!1,function(L){L?i.abort(function(){e(L)}):i.commit(e)})})}else i.commit(e)})},t.prototype._findINode=function(e,i,o,a){var u=this,h=function(y,L,U){y?a(y):U[o]?a(null,U[o]):a(c.ENOENT(p.resolve(i,o)))};i==="/"?o===""?a(null,qe):this.getINode(e,i,qe,function(y,L){be(y,a)&&u.getDirListing(e,i,L,function(U,Z){h(U,L,Z)})}):this.findINodeAndDirListing(e,i,h)},t.prototype.findINode=function(e,i,o){var a=this;this._findINode(e,p.dirname(i),p.basename(i),function(u,h){be(u,o)&&a.getINode(e,i,h,o)})},t.prototype.getINode=function(e,i,o,a){e.get(o,function(u,h){be(u,a)&&(h===void 0?a(c.ENOENT(i)):a(null,_e.fromBuffer(h)))})},t.prototype.getDirListing=function(e,i,o,a){o.isDirectory()?e.get(o.id,function(u,h){if(be(u,a))try{a(null,JSON.parse(h.toString()))}catch{a(c.ENOENT(i))}}):a(c.ENOTDIR(i))},t.prototype.findINodeAndDirListing=function(e,i,o){var a=this;this.findINode(e,i,function(u,h){be(u,o)&&a.getDirListing(e,i,h,function(y,L){be(y,o)&&o(null,h,L)})})},t.prototype.addNewNode=function(e,i,o){var a=0,u,h=function(){++a===5?o(new c(s.EIO,"Unable to commit data to key-value store.")):(u=Br(),e.put(u,i,!1,function(y,L){y||!L?h():o(null,u)}))};h()},t.prototype.commitNewFile=function(e,i,o,a,u,h){var y=this,L=p.dirname(i),U=p.basename(i),Z=new Date().getTime();if(i==="/")return h(c.EEXIST(i));this.findINodeAndDirListing(e,L,function(et,rt,ht){ee(et,e,h)&&(ht[U]?e.abort(function(){h(c.EEXIST(i))}):y.addNewNode(e,u,function(wt,Rt){if(ee(wt,e,h)){var qt=new _e(Rt,u.length,a|o,Z,Z,Z);y.addNewNode(e,qt.toBuffer(),function(pe,ze){ee(pe,e,h)&&(ht[U]=ze,e.put(rt.id,d.from(JSON.stringify(ht)),!0,function(Be){ee(Be,e,h)&&e.commit(function(Sr){ee(Sr,e,h)&&h(null,qt)})}))})}}))})},t.prototype.removeEntry=function(e,i,o){var a=this,u=this.store.beginTransaction("readwrite"),h=p.dirname(e),y=p.basename(e);this.findINodeAndDirListing(u,h,function(L,U,Z){if(ee(L,u,o))if(!Z[y])u.abort(function(){o(c.ENOENT(e))});else{var et=Z[y];delete Z[y],a.getINode(u,e,et,function(rt,ht){ee(rt,u,o)&&(!i&&ht.isDirectory()?u.abort(function(){o(c.EISDIR(e))}):i&&!ht.isDirectory()?u.abort(function(){o(c.ENOTDIR(e))}):u.del(ht.id,function(wt){ee(wt,u,o)&&u.del(et,function(Rt){ee(Rt,u,o)&&u.put(U.id,d.from(JSON.stringify(Z)),!0,function(qt){ee(qt,u,o)&&u.commit(o)})})}))})}})},t}(tt),ir=function(){this.store={}};ir.prototype.name=function(){return yr.Name},ir.prototype.clear=function(){this.store={}},ir.prototype.beginTransaction=function(t){return new He(this)},ir.prototype.get=function(t){return this.store[t]},ir.prototype.put=function(t,r,e){return!e&&this.store.hasOwnProperty(t)?!1:(this.store[t]=r,!0)},ir.prototype.del=function(t){delete this.store[t]};var yr=function(n){function t(){n.call(this,{store:new ir})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t)},t}(Xn);yr.Name="InMemory",yr.Options={};var un=$t.indexedDB||$t.mozIndexedDB||$t.webkitIndexedDB||$t.msIndexedDB;function Er(n,t){switch(t===void 0&&(t=n.toString()),n.name){case"NotFoundError":return new c(s.ENOENT,t);case"QuotaExceededError":return new c(s.ENOSPC,t);default:return new c(s.EIO,t)}}function Ir(n,t,r){return t===void 0&&(t=s.EIO),r===void 0&&(r=null),function(e){e.preventDefault(),n(new c(t,r!==null?r:void 0))}}var cn=function(t,r){this.tx=t,this.store=r};cn.prototype.get=function(t,r){try{var e=this.store.get(t);e.onerror=Ir(r),e.onsuccess=function(i){var o=i.target.result;o===void 0?r(null,o):r(null,Et(o))}}catch(i){r(Er(i))}};var pa=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.put=function(e,i,o,a){try{var u=H(i),h;o?h=this.store.put(u,e):h=this.store.add(u,e),h.onerror=Ir(a),h.onsuccess=function(y){a(null,!0)}}catch(y){a(Er(y))}},t.prototype.del=function(e,i){try{var o=this.store.delete(e);o.onerror=Ir(i),o.onsuccess=function(a){i()}}catch(a){i(Er(a))}},t.prototype.commit=function(e){setTimeout(e,0)},t.prototype.abort=function(e){var i=null;try{this.tx.abort()}catch(o){i=Er(o)}finally{e(i)}},t}(cn),Wr=function(t,r){var e=this;r===void 0&&(r="browserfs"),this.storeName=r;var i=un.open(this.storeName,1);i.onupgradeneeded=function(o){var a=o.target.result;a.objectStoreNames.contains(e.storeName)&&a.deleteObjectStore(e.storeName),a.createObjectStore(e.storeName)},i.onsuccess=function(o){e.db=o.target.result,t(null,e)},i.onerror=Ir(t,s.EACCES)};Wr.prototype.name=function(){return br.Name+" - "+this.storeName},Wr.prototype.clear=function(t){try{var r=this.db.transaction(this.storeName,"readwrite"),e=r.objectStore(this.storeName),i=e.clear();i.onsuccess=function(o){setTimeout(t,0)},i.onerror=Ir(t)}catch(o){t(Er(o))}},Wr.prototype.beginTransaction=function(t){t===void 0&&(t="readonly");var r=this.db.transaction(this.storeName,t),e=r.objectStore(this.storeName);if(t==="readwrite")return new pa(r,e);if(t==="readonly")return new cn(r,e);throw new c(s.EINVAL,"Invalid transaction type.")};var br=function(n){function t(r,e,i){var o=this;i===void 0&&(i=!0),n.call(this),this.store=new Wr(function(a){a?r(a):o.init(o.store,function(u){r(u,o)})},e),Ot(i,t.Name,{storeName:e})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){new t(i,e.storeName,!1)},t.isAvailable=function(){try{return typeof un<"u"&&un.open("__browserfs_test__")!==null}catch{return!1}},t}(ha);br.Name="IndexedDB",br.Options={storeName:{type:"string",optional:!0,description:"The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name."}};var fn=!1,kr;try{$t.localStorage.setItem("__test__","\uD800"),fn=$t.localStorage.getItem("__test__")==="\uD800"}catch{fn=!1}kr=fn?"binary_string":"binary_string_ie",d.isEncoding(kr)||(kr="base64");var or=function(){};or.prototype.name=function(){return Or.Name},or.prototype.clear=function(){$t.localStorage.clear()},or.prototype.beginTransaction=function(t){return new He(this)},or.prototype.get=function(t){try{var r=$t.localStorage.getItem(t);if(r!==null)return d.from(r,kr)}catch{}},or.prototype.put=function(t,r,e){try{return!e&&$t.localStorage.getItem(t)!==null?!1:($t.localStorage.setItem(t,r.toString(kr)),!0)}catch{throw new c(s.ENOSPC,"LocalStorage is full.")}},or.prototype.del=function(t){try{$t.localStorage.removeItem(t)}catch(r){throw new c(s.EIO,"Unable to delete key "+t+": "+r)}};var Or=function(n){function t(){n.call(this,{store:new or})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t)},t.isAvailable=function(){return typeof $t.localStorage<"u"},t}(Xn);Or.Name="LocalStorage",Or.Options={};var vr=function(n){function t(){n.call(this),this.mountList=[],this.mntMap={},this.rootFs=new yr}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o=new t;Object.keys(e).forEach(function(a){o.mount(a,e[a])}),i(null,o)},t.isAvailable=function(){return!0},t.prototype.mount=function(e,i){if(e[0]!=="/"&&(e="/"+e),e=p.resolve(e),this.mntMap[e])throw new c(s.EINVAL,"Mount point "+e+" is already taken.");C(e,511,this.rootFs),this.mntMap[e]=i,this.mountList.push(e),this.mountList=this.mountList.sort(function(o,a){return a.length-o.length})},t.prototype.umount=function(e){var i=this;if(e[0]!=="/"&&(e="/"+e),e=p.resolve(e),!this.mntMap[e])throw new c(s.EINVAL,"Mount point "+e+" is already unmounted.");for(delete this.mntMap[e],this.mountList.splice(this.mountList.indexOf(e),1);e!=="/"&&i.rootFs.readdirSync(e).length===0;)i.rootFs.rmdirSync(e),e=p.dirname(e)},t.prototype._getFs=function(e){for(var i=this,o=this.mountList,a=o.length,u=0;u<a;u++){var h=o[u];if(h.length<=e.length&&e.indexOf(h)===0)return e=e.substr(h.length>1?h.length:0),e===""&&(e="/"),{fs:i.mntMap[h],path:e}}return{fs:this.rootFs,path:e}},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,i){i(0,0)},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.standardizeError=function(e,i,o){var a=e.message.indexOf(i);return a!==-1&&(e.message=e.message.substr(0,a)+o+e.message.substr(a+i.length),e.path=o),e},t.prototype.rename=function(e,i,o){var a=this,u=this._getFs(e),h=this._getFs(i);return u.fs===h.fs?u.fs.rename(u.path,h.path,function(y){y&&a.standardizeError(a.standardizeError(y,u.path,e),h.path,i),o(y)}):st.readFile(e,function(y,L){if(y)return o(y);st.writeFile(i,L,function(U){if(U)return o(U);st.unlink(e,o)})})},t.prototype.renameSync=function(e,i){var o=this._getFs(e),a=this._getFs(i);if(o.fs===a.fs)try{return o.fs.renameSync(o.path,a.path)}catch(h){throw this.standardizeError(this.standardizeError(h,o.path,e),a.path,i),h}var u=st.readFileSync(e);return st.writeFileSync(i,u),st.unlinkSync(e)},t.prototype.readdirSync=function(e){var i=this._getFs(e),o=null;if(i.fs!==this.rootFs)try{o=this.rootFs.readdirSync(e)}catch{}try{var a=i.fs.readdirSync(i.path);return o===null?a:a.concat(o.filter(function(u){return a.indexOf(u)===-1}))}catch(u){if(o===null)throw this.standardizeError(u,i.path,e);return o}},t.prototype.readdir=function(e,i){var o=this,a=this._getFs(e);a.fs.readdir(a.path,function(u,h){if(a.fs!==o.rootFs)try{var y=o.rootFs.readdirSync(e);h?h=h.concat(y.filter(function(L){return h.indexOf(L)===-1})):h=y}catch{if(u)return i(o.standardizeError(u,a.path,e))}else if(u)return i(o.standardizeError(u,a.path,e));i(null,h)})},t.prototype.rmdirSync=function(e){var i=this._getFs(e);if(this._containsMountPt(e))throw c.ENOTEMPTY(e);try{i.fs.rmdirSync(i.path)}catch(o){throw this.standardizeError(o,i.path,e)}},t.prototype.rmdir=function(e,i){var o=this,a=this._getFs(e);this._containsMountPt(e)?i(c.ENOTEMPTY(e)):a.fs.rmdir(a.path,function(u){i(u?o.standardizeError(u,a.path,e):null)})},t.prototype._containsMountPt=function(e){for(var i=this.mountList,o=i.length,a=0;a<o;a++){var u=i[a];if(u.length>=e.length&&u.slice(0,e.length)===e)return!0}return!1},t}(tt);vr.Name="MountableFileSystem",vr.Options={};function qn(n,t,r){return t?function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];var o=e[0],a=this._getFs(o);e[0]=a.path;try{return a.fs[n].apply(a.fs,e)}catch(u){throw this.standardizeError(u,a.path,o),u}}:function(){for(var e=this,i=[],o=arguments.length;o--;)i[o]=arguments[o];var a=i[0],u=this._getFs(a);if(i[0]=u.path,typeof i[i.length-1]=="function"){var h=i[i.length-1];i[i.length-1]=function(){for(var y=[],L=arguments.length;L--;)y[L]=arguments[L];y.length>0&&y[0]instanceof c&&e.standardizeError(y[0],u.path,a),h.apply(null,y)}}return u.fs[n].apply(u.fs,i)}}for(var Gn=[["exists","unlink","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]],ln=0;ln<Gn.length;ln++)for(var da=Gn[ln],hn=0,Kn=da;hn<Kn.length;hn+=1){var Hr=Kn[hn];vr.prototype[Hr]=qn(Hr,!1),vr.prototype[Hr+"Sync"]=qn(Hr+"Sync",!0)}var Rr;if(typeof setImmediate<"u")Rr=setImmediate;else{var Ne=$t,gr=[],Jn="zero-timeout-message",ya=function(){if(typeof Ne.importScripts<"u"||!Ne.postMessage)return!1;var n=!0,t=Ne.onmessage;return Ne.onmessage=function(){n=!1},Ne.postMessage("","*"),Ne.onmessage=t,n};if(ya()){Rr=function(n){gr.push(n),Ne.postMessage(Jn,"*")};var Qn=function(n){if(n.source===self&&n.data===Jn&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0,gr.length>0)){var t=gr.shift();return t()}};Ne.addEventListener?Ne.addEventListener("message",Qn,!0):Ne.attachEvent("onmessage",Qn)}else if(Ne.MessageChannel){var $n=new Ne.MessageChannel;$n.port1.onmessage=function(n){if(gr.length>0)return gr.shift()()},Rr=function(n){gr.push(n),$n.port2.postMessage("")}}else Rr=function(n){return setTimeout(n,0)}}var pn=Rr,Nr=function(){this._locked=!1,this._waiters=[]};Nr.prototype.lock=function(t){if(this._locked){this._waiters.push(t);return}this._locked=!0,t()},Nr.prototype.unlock=function(){if(!this._locked)throw new Error("unlock of a non-locked mutex");var t=this._waiters.shift();if(t){pn(t);return}this._locked=!1},Nr.prototype.tryLock=function(){return this._locked?!1:(this._locked=!0,!0)},Nr.prototype.isLocked=function(){return this._locked};var It=function(t){this._fs=t,this._mu=new Nr};It.prototype.getName=function(){return"LockedFS<"+this._fs.getName()+">"},It.prototype.getFSUnlocked=function(){return this._fs},It.prototype.initialize=function(t){this._fs.initialize(t)},It.prototype.diskSpace=function(t,r){this._fs.diskSpace(t,r)},It.prototype.isReadOnly=function(){return this._fs.isReadOnly()},It.prototype.supportsLinks=function(){return this._fs.supportsLinks()},It.prototype.supportsProps=function(){return this._fs.supportsProps()},It.prototype.supportsSynch=function(){return this._fs.supportsSynch()},It.prototype.rename=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.rename(t,r,function(o){i._mu.unlock(),e(o)})})},It.prototype.renameSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.renameSync(t,r)},It.prototype.stat=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.stat(t,r,function(o,a){i._mu.unlock(),e(o,a)})})},It.prototype.statSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.statSync(t,r)},It.prototype.open=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.open(t,r,e,function(a,u){o._mu.unlock(),i(a,u)})})},It.prototype.openSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.openSync(t,r,e)},It.prototype.unlink=function(t,r){var e=this;this._mu.lock(function(){e._fs.unlink(t,function(i){e._mu.unlock(),r(i)})})},It.prototype.unlinkSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.unlinkSync(t)},It.prototype.rmdir=function(t,r){var e=this;this._mu.lock(function(){e._fs.rmdir(t,function(i){e._mu.unlock(),r(i)})})},It.prototype.rmdirSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.rmdirSync(t)},It.prototype.mkdir=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.mkdir(t,r,function(o){i._mu.unlock(),e(o)})})},It.prototype.mkdirSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.mkdirSync(t,r)},It.prototype.readdir=function(t,r){var e=this;this._mu.lock(function(){e._fs.readdir(t,function(i,o){e._mu.unlock(),r(i,o)})})},It.prototype.readdirSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readdirSync(t)},It.prototype.exists=function(t,r){var e=this;this._mu.lock(function(){e._fs.exists(t,function(i){e._mu.unlock(),r(i)})})},It.prototype.existsSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.existsSync(t)},It.prototype.realpath=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.realpath(t,r,function(o,a){i._mu.unlock(),e(o,a)})})},It.prototype.realpathSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.realpathSync(t,r)},It.prototype.truncate=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.truncate(t,r,function(o){i._mu.unlock(),e(o)})})},It.prototype.truncateSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.truncateSync(t,r)},It.prototype.readFile=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.readFile(t,r,e,function(a,u){o._mu.unlock(),i(a,u)})})},It.prototype.readFileSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readFileSync(t,r,e)},It.prototype.writeFile=function(t,r,e,i,o,a){var u=this;this._mu.lock(function(){u._fs.writeFile(t,r,e,i,o,function(h){u._mu.unlock(),a(h)})})},It.prototype.writeFileSync=function(t,r,e,i,o){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.writeFileSync(t,r,e,i,o)},It.prototype.appendFile=function(t,r,e,i,o,a){var u=this;this._mu.lock(function(){u._fs.appendFile(t,r,e,i,o,function(h){u._mu.unlock(),a(h)})})},It.prototype.appendFileSync=function(t,r,e,i,o){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.appendFileSync(t,r,e,i,o)},It.prototype.chmod=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.chmod(t,r,e,function(a){o._mu.unlock(),i(a)})})},It.prototype.chmodSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chmodSync(t,r,e)},It.prototype.chown=function(t,r,e,i,o){var a=this;this._mu.lock(function(){a._fs.chown(t,r,e,i,function(u){a._mu.unlock(),o(u)})})},It.prototype.chownSync=function(t,r,e,i){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chownSync(t,r,e,i)},It.prototype.utimes=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.utimes(t,r,e,function(a){o._mu.unlock(),i(a)})})},It.prototype.utimesSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.utimesSync(t,r,e)},It.prototype.link=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.link(t,r,function(o){i._mu.unlock(),e(o)})})},It.prototype.linkSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.linkSync(t,r)},It.prototype.symlink=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.symlink(t,r,e,function(a){o._mu.unlock(),i(a)})})},It.prototype.symlinkSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.symlinkSync(t,r,e)},It.prototype.readlink=function(t,r){var e=this;this._mu.lock(function(){e._fs.readlink(t,function(i,o){e._mu.unlock(),r(i,o)})})},It.prototype.readlinkSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readlinkSync(t)};var Ve="/.deletedFiles.log";function ti(n){return 146|n}function ke(n){return T.getFileFlag(n)}var ei=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;if(!this.isDirty()){e(null);return}this._fs._syncAsync(this,function(o){i.resetDirty(),e(o)})},t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.close=function(e){this.sync(e)},t.prototype.closeSync=function(){this.syncSync()},t}(le),ri=function(n){function t(r,e){if(n.call(this),this._isInitialized=!1,this._initializeCallbacks=[],this._deletedFiles={},this._deleteLog="",this._deleteLogUpdatePending=!1,this._deleteLogUpdateNeeded=!1,this._deleteLogError=null,this._writable=r,this._readable=e,this._writable.isReadOnly())throw new c(s.EINVAL,"Writable file system must be writable.")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.getOverlayedFileSystems=function(){return{readable:this._readable,writable:this._writable}},t.prototype._syncAsync=function(e,i){var o=this;this.createParentDirectoriesAsync(e.getPath(),function(a){if(a)return i(a);o._writable.writeFile(e.getPath(),e.getBuffer(),null,ke("w"),e.getStats().mode,i)})},t.prototype._syncSync=function(e){this.createParentDirectories(e.getPath()),this._writable.writeFileSync(e.getPath(),e.getBuffer(),null,ke("w"),e.getStats().mode)},t.prototype.getName=function(){return Fr.Name},t.prototype.initialize=function(e){var i=this,o=this._initializeCallbacks,a=function(u){i._isInitialized=!u,i._initializeCallbacks=[],o.forEach(function(h){return h(u)})};if(this._isInitialized)return e();o.push(e),o.length===1&&this._writable.readFile(Ve,"utf8",ke("r"),function(u,h){if(u){if(u.errno!==s.ENOENT)return a(u)}else i._deleteLog=h;i._reparseDeletionLog(),a()})},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return this._readable.supportsSynch()&&this._writable.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._readable.supportsProps()&&this._writable.supportsProps()},t.prototype.getDeletionLog=function(){return this._deleteLog},t.prototype.restoreDeletionLog=function(e){this._deleteLog=e,this._reparseDeletionLog(),this.updateLog("")},t.prototype.rename=function(e,i,o){var a=this;if(!(!this.checkInitAsync(o)||this.checkPathAsync(e,o)||this.checkPathAsync(i,o))){if(e===Ve||i===Ve)return o(c.EPERM("Cannot rename deletion log."));if(e===i)return o();this.stat(e,!1,function(u,h){return u?o(u):a.stat(i,!1,function(y,L){var U=a;function Z(rt){var ht=rt.shift();if(!ht)return o();var wt=p.resolve(e,ht),Rt=p.resolve(i,ht);U.rename(wt,Rt,function(qt){if(qt)return o(qt);Z(rt)})}var et=511;if(h.isDirectory()){if(y)return y.errno!==s.ENOENT?o(y):a._writable.exists(e,function(rt){if(rt)return a._writable.rename(e,i,o);a._writable.mkdir(i,et,function(ht){if(ht)return o(ht);a._readable.readdir(e,function(wt,Rt){if(wt)return o();Z(Rt)})})});if(et=L.mode,!L.isDirectory())return o(c.ENOTDIR(i));a.readdir(i,function(rt,ht){if(ht&&ht.length)return o(c.ENOTEMPTY(i));a._readable.readdir(e,function(wt,Rt){if(wt)return o();Z(Rt)})})}if(L&&L.isDirectory())return o(c.EISDIR(i));a.readFile(e,null,ke("r"),function(rt,ht){return rt?o(rt):a.writeFile(i,ht,null,ke("w"),h.mode,function(wt){return wt?o(wt):a.unlink(e,o)})})})})}},t.prototype.renameSync=function(e,i){var o=this;if(this.checkInitialized(),this.checkPath(e),this.checkPath(i),e===Ve||i===Ve)throw c.EPERM("Cannot rename deletion log.");var a=this.statSync(e,!1);if(a.isDirectory()){if(e===i)return;var u=511;if(this.existsSync(i)){var h=this.statSync(i,!1);if(u=h.mode,h.isDirectory()){if(this.readdirSync(i).length>0)throw c.ENOTEMPTY(i)}else throw c.ENOTDIR(i)}this._writable.existsSync(e)?this._writable.renameSync(e,i):this._writable.existsSync(i)||this._writable.mkdirSync(i,u),this._readable.existsSync(e)&&this._readable.readdirSync(e).forEach(function(y){o.renameSync(p.resolve(e,y),p.resolve(i,y))})}else{if(this.existsSync(i)&&this.statSync(i,!1).isDirectory())throw c.EISDIR(i);this.writeFileSync(i,this.readFileSync(e,null,ke("r")),null,ke("w"),a.mode)}e!==i&&this.existsSync(e)&&this.unlinkSync(e)},t.prototype.stat=function(e,i,o){var a=this;this.checkInitAsync(o)&&this._writable.stat(e,i,function(u,h){u&&u.errno===s.ENOENT?(a._deletedFiles[e]&&o(c.ENOENT(e)),a._readable.stat(e,i,function(y,L){L&&(L=L.clone(),L.mode=ti(L.mode)),o(y,L)})):o(u,h)})},t.prototype.statSync=function(e,i){this.checkInitialized();try{return this._writable.statSync(e,i)}catch{if(this._deletedFiles[e])throw c.ENOENT(e);var o=this._readable.statSync(e,i).clone();return o.mode=ti(o.mode),o}},t.prototype.open=function(e,i,o,a){var u=this;!this.checkInitAsync(a)||this.checkPathAsync(e,a)||this.stat(e,!1,function(h,y){if(y)switch(i.pathExistsAction()){case I.TRUNCATE_FILE:return u.createParentDirectoriesAsync(e,function(L){if(L)return a(L);u._writable.open(e,i,o,a)});case I.NOP:return u._writable.exists(e,function(L){L?u._writable.open(e,i,o,a):(y=y.clone(),y.mode=o,u._readable.readFile(e,null,ke("r"),function(U,Z){if(U)return a(U);y.size===-1&&(y.size=Z.length);var et=new ei(u,e,i,y,Z);a(null,et)}))});default:return a(c.EEXIST(e))}else switch(i.pathNotExistsAction()){case I.CREATE_FILE:return u.createParentDirectoriesAsync(e,function(L){return L?a(L):u._writable.open(e,i,o,a)});default:return a(c.ENOENT(e))}})},t.prototype.openSync=function(e,i,o){if(this.checkInitialized(),this.checkPath(e),e===Ve)throw c.EPERM("Cannot open deletion log.");if(this.existsSync(e))switch(i.pathExistsAction()){case I.TRUNCATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,i,o);case I.NOP:if(this._writable.existsSync(e))return this._writable.openSync(e,i,o);var a=this._readable.readFileSync(e,null,ke("r")),u=this._readable.statSync(e,!1).clone();return u.mode=o,new ei(this,e,i,u,a);default:throw c.EEXIST(e)}else switch(i.pathNotExistsAction()){case I.CREATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,i,o);default:throw c.ENOENT(e)}},t.prototype.unlink=function(e,i){var o=this;!this.checkInitAsync(i)||this.checkPathAsync(e,i)||this.exists(e,function(a){if(!a)return i(c.ENOENT(e));o._writable.exists(e,function(u){if(u)return o._writable.unlink(e,function(h){if(h)return i(h);o.exists(e,function(y){y&&o.deletePath(e),i(null)})});o.deletePath(e),i(null)})})},t.prototype.unlinkSync=function(e){if(this.checkInitialized(),this.checkPath(e),this.existsSync(e))this._writable.existsSync(e)&&this._writable.unlinkSync(e),this.existsSync(e)&&this.deletePath(e);else throw c.ENOENT(e)},t.prototype.rmdir=function(e,i){var o=this;if(this.checkInitAsync(i)){var a=function(){o.readdir(e,function(u,h){if(u)return i(u);if(h.length)return i(c.ENOTEMPTY(e));o.deletePath(e),i(null)})};this.exists(e,function(u){if(!u)return i(c.ENOENT(e));o._writable.exists(e,function(h){h?o._writable.rmdir(e,function(y){if(y)return i(y);o._readable.exists(e,function(L){L?a():i()})}):a()})})}},t.prototype.rmdirSync=function(e){if(this.checkInitialized(),this.existsSync(e)){if(this._writable.existsSync(e)&&this._writable.rmdirSync(e),this.existsSync(e)){if(this.readdirSync(e).length>0)throw c.ENOTEMPTY(e);this.deletePath(e)}}else throw c.ENOENT(e)},t.prototype.mkdir=function(e,i,o){var a=this;this.checkInitAsync(o)&&this.exists(e,function(u){if(u)return o(c.EEXIST(e));a.createParentDirectoriesAsync(e,function(h){if(h)return o(h);a._writable.mkdir(e,i,o)})})},t.prototype.mkdirSync=function(e,i){if(this.checkInitialized(),this.existsSync(e))throw c.EEXIST(e);this.createParentDirectories(e),this._writable.mkdirSync(e,i)},t.prototype.readdir=function(e,i){var o=this;this.checkInitAsync(i)&&this.stat(e,!1,function(a,u){if(a)return i(a);if(!u.isDirectory())return i(c.ENOTDIR(e));o._writable.readdir(e,function(h,y){if(h&&h.code!=="ENOENT")return i(h);(h||!y)&&(y=[]),o._readable.readdir(e,function(L,U){(L||!U)&&(U=[]);var Z={},et=y.concat(U.filter(function(rt){return!o._deletedFiles[e+"/"+rt]})).filter(function(rt){var ht=!Z[rt];return Z[rt]=!0,ht});i(null,et)})})})},t.prototype.readdirSync=function(e){var i=this;this.checkInitialized();var o=this.statSync(e,!1);if(!o.isDirectory())throw c.ENOTDIR(e);var a=[];try{a=a.concat(this._writable.readdirSync(e))}catch{}try{a=a.concat(this._readable.readdirSync(e).filter(function(h){return!i._deletedFiles[e+"/"+h]}))}catch{}var u={};return a.filter(function(h){var y=!u[h];return u[h]=!0,y})},t.prototype.exists=function(e,i){var o=this;this.checkInitialized(),this._writable.exists(e,function(a){if(a)return i(!0);o._readable.exists(e,function(u){i(u&&o._deletedFiles[e]!==!0)})})},t.prototype.existsSync=function(e){return this.checkInitialized(),this._writable.existsSync(e)||this._readable.existsSync(e)&&this._deletedFiles[e]!==!0},t.prototype.chmod=function(e,i,o,a){var u=this;this.checkInitAsync(a)&&this.operateOnWritableAsync(e,function(h){if(h)return a(h);u._writable.chmod(e,i,o,a)})},t.prototype.chmodSync=function(e,i,o){var a=this;this.checkInitialized(),this.operateOnWritable(e,function(){a._writable.chmodSync(e,i,o)})},t.prototype.chown=function(e,i,o,a,u){var h=this;this.checkInitAsync(u)&&this.operateOnWritableAsync(e,function(y){if(y)return u(y);h._writable.chown(e,i,o,a,u)})},t.prototype.chownSync=function(e,i,o,a){var u=this;this.checkInitialized(),this.operateOnWritable(e,function(){u._writable.chownSync(e,i,o,a)})},t.prototype.utimes=function(e,i,o,a){var u=this;this.checkInitAsync(a)&&this.operateOnWritableAsync(e,function(h){if(h)return a(h);u._writable.utimes(e,i,o,a)})},t.prototype.utimesSync=function(e,i,o){var a=this;this.checkInitialized(),this.operateOnWritable(e,function(){a._writable.utimesSync(e,i,o)})},t.prototype.deletePath=function(e){this._deletedFiles[e]=!0,this.updateLog("d"+e+`
`)},t.prototype.updateLog=function(e){var i=this;this._deleteLog+=e,this._deleteLogUpdatePending?this._deleteLogUpdateNeeded=!0:(this._deleteLogUpdatePending=!0,this._writable.writeFile(Ve,this._deleteLog,"utf8",T.getFileFlag("w"),420,function(o){i._deleteLogUpdatePending=!1,o?i._deleteLogError=o:i._deleteLogUpdateNeeded&&(i._deleteLogUpdateNeeded=!1,i.updateLog(""))}))},t.prototype._reparseDeletionLog=function(){var e=this;this._deletedFiles={},this._deleteLog.split(`
`).forEach(function(i){e._deletedFiles[i.slice(1)]=i.slice(0,1)==="d"})},t.prototype.checkInitialized=function(){if(this._isInitialized){if(this._deleteLogError!==null){var e=this._deleteLogError;throw this._deleteLogError=null,e}}else throw new c(s.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")},t.prototype.checkInitAsync=function(e){if(this._isInitialized){if(this._deleteLogError!==null){var i=this._deleteLogError;return this._deleteLogError=null,e(i),!1}}else return e(new c(s.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")),!1;return!0},t.prototype.checkPath=function(e){if(e===Ve)throw c.EPERM(e)},t.prototype.checkPathAsync=function(e,i){return e===Ve?(i(c.EPERM(e)),!0):!1},t.prototype.createParentDirectoriesAsync=function(e,i){var o=p.dirname(e),a=[],u=this;this._writable.stat(o,!1,h);function h(L,U){L?(a.push(o),o=p.dirname(o),u._writable.stat(o,!1,h)):y()}function y(){if(!a.length)return i();var L=a.pop();u._readable.stat(L,!1,function(U,Z){if(!Z)return i();u._writable.mkdir(L,Z.mode,function(et){if(et)return i(et);y()})})}},t.prototype.createParentDirectories=function(e){for(var i=this,o=p.dirname(e),a=[];!this._writable.existsSync(o);)a.push(o),o=p.dirname(o);a=a.reverse(),a.forEach(function(u){i._writable.mkdirSync(u,i.statSync(u,!1).mode)})},t.prototype.operateOnWritable=function(e,i){if(this.existsSync(e))this._writable.existsSync(e)||this.copyToWritable(e),i();else throw c.ENOENT(e)},t.prototype.operateOnWritableAsync=function(e,i){var o=this;this.exists(e,function(a){if(!a)return i(c.ENOENT(e));o._writable.exists(e,function(u){if(u)i();else return o.copyToWritableAsync(e,i)})})},t.prototype.copyToWritable=function(e){var i=this.statSync(e,!1);i.isDirectory()?this._writable.mkdirSync(e,i.mode):this.writeFileSync(e,this._readable.readFileSync(e,null,ke("r")),null,ke("w"),this.statSync(e,!1).mode)},t.prototype.copyToWritableAsync=function(e,i){var o=this;this.stat(e,!1,function(a,u){if(a)return i(a);if(u.isDirectory())return o._writable.mkdir(e,u.mode,i);o._readable.readFile(e,null,ke("r"),function(h,y){if(h)return i(h);o.writeFile(e,y,null,ke("w"),u.mode,i)})})},t}(tt),Fr=function(n){function t(r,e,i){i===void 0&&(i=!0),n.call(this,new ri(r,e)),Ot(i,t.Name,{readable:"readable file system",writable:"writable file system"})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){try{var o=new t(e.writable,e.readable,!1);o.initialize(function(a){i(a,o)},!1)}catch(a){i(a)}},t.isAvailable=function(){return ri.isAvailable()},t.prototype.initialize=function(e,i){i===void 0&&(i=!0),i&&console.warn("[OverlayFS] OverlayFS.initialize() is deprecated and will be removed in the next major release. Please use 'OverlayFS.Create({readable: readable file system instance, writable: writable file system instance}, cb)' to create and initialize OverlayFS instances."),n.prototype.initialize.call(this,e)},t.prototype.getOverlayedFileSystems=function(){return n.prototype.getFSUnlocked.call(this).getOverlayedFileSystems()},t.prototype.unwrap=function(){return n.prototype.getFSUnlocked.call(this)},t}(It);Fr.Name="OverlayFS",Fr.Options={writable:{type:"object",description:"The file system to write modified files to."},readable:{type:"object",description:"The file system that initially populates this file system."}};var Yt;(function(n){n[n.CB=0]="CB",n[n.FD=1]="FD",n[n.API_ERROR=2]="API_ERROR",n[n.STATS=3]="STATS",n[n.PROBE=4]="PROBE",n[n.FILEFLAG=5]="FILEFLAG",n[n.BUFFER=6]="BUFFER",n[n.ERROR=7]="ERROR"})(Yt||(Yt={}));var dn=function(){this._callbacks={},this._nextId=0};dn.prototype.toRemoteArg=function(t){var r=this._nextId++;return this._callbacks[r]=t,{type:Yt.CB,id:r}},dn.prototype.toLocalArg=function(t){var r=this._callbacks[t];return delete this._callbacks[t],r};var Vr=function(){this._fileDescriptors={},this._nextId=0};Vr.prototype.toRemoteArg=function(t,r,e,i){var o=this._nextId++,a,u;this._fileDescriptors[o]=t,t.stat(function(h,y){h?i(h):(u=ar(y.toBuffer()),e.isReadable()?t.read(d.alloc(y.size),0,y.size,0,function(L,U,Z){L?i(L):(a=ar(Z),i(null,{type:Yt.FD,id:o,data:a,stat:u,path:r,flag:e.getFlagString()}))}):i(null,{type:Yt.FD,id:o,data:new ArrayBuffer(0),stat:u,path:r,flag:e.getFlagString()}))})},Vr.prototype.applyFdAPIRequest=function(t,r){var e=this,i=t.args[0];this._applyFdChanges(i,function(o,a){o?r(o):a[t.method](function(u){t.method==="close"&&delete e._fileDescriptors[i.id],r(u)})})},Vr.prototype._applyFdChanges=function(t,r){var e=this._fileDescriptors[t.id],i=sr(t.data),o=M.fromBuffer(sr(t.stat)),a=T.getFileFlag(t.flag);a.isWriteable()?e.write(i,0,i.length,a.isAppendable()?e.getPos():0,function(u){function h(){e.stat(function(y,L){y?r(y):L.mode!==o.mode?e.chmod(o.mode,function(U){r(U,e)}):r(y,e)})}u?r(u):a.isAppendable()?h():e.truncate(i.length,function(){h()})}):r(null,e)};function Zr(n){return{type:Yt.API_ERROR,errorData:ar(n.writeToBuffer())}}function ni(n){return c.fromBuffer(sr(n.errorData))}function ii(n){return{type:Yt.ERROR,name:n.name,message:n.message,stack:n.stack}}function oi(n){var t=$t[n.name];typeof t!="function"&&(t=Error);var r=new t(n.message);return r.stack=n.stack,r}function ai(n){return{type:Yt.STATS,statsData:ar(n.toBuffer())}}function si(n){return M.fromBuffer(sr(n.statsData))}function ui(n){return{type:Yt.FILEFLAG,flagStr:n.getFlagString()}}function ci(n){return T.getFileFlag(n.flagStr)}function ar(n){return H(n)}function sr(n){return Et(n)}function fi(n){return{type:Yt.BUFFER,data:ar(n)}}function li(n){return sr(n.data)}function va(n){return n&&typeof n=="object"&&n.hasOwnProperty("browserfsMessage")&&n.browserfsMessage}function ga(n){return n&&typeof n=="object"&&n.hasOwnProperty("browserfsMessage")&&n.browserfsMessage}var hi=function(n){function t(r,e,i,o,a,u){n.call(this,r,e,i,o,u),this._remoteFdId=a}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getRemoteFdId=function(){return this._remoteFdId},t.prototype.toRemoteArg=function(){return{type:Yt.FD,id:this._remoteFdId,data:ar(this.getBuffer()),stat:ar(this.getStats().toBuffer()),path:this.getPath(),flag:this.getFlag().getFlagString()}},t.prototype.sync=function(e){this._syncClose("sync",e)},t.prototype.close=function(e){this._syncClose("close",e)},t.prototype._syncClose=function(e,i){var o=this;this.isDirty()?this._fs.syncClose(e,this,function(a){a||o.resetDirty(),i(a)}):i()},t}(le),Xr=function(n){function t(r,e){var i=this;e===void 0&&(e=!0),n.call(this),this._callbackConverter=new dn,this._isInitialized=!1,this._isReadOnly=!1,this._supportLinks=!1,this._supportProps=!1,this._worker=r,Ot(e,t.Name,{worker:"Web Worker instance"}),this._worker.addEventListener("message",function(o){var a=o.data;if(ga(a)){var u,h=a.args,y=new Array(h.length);for(u=0;u<y.length;u++)y[u]=i._argRemote2Local(h[u]);i._callbackConverter.toLocalArg(a.cbId).apply(null,y)}})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o=new t(e.worker,!1);o.initialize(function(){i(null,o)})},t.isAvailable=function(){return typeof importScripts<"u"||typeof Worker<"u"},t.attachRemoteListener=function(e){var i=new Vr;function o(u,h,y){switch(typeof u){case"object":u instanceof M?y(null,ai(u)):u instanceof c?y(null,Zr(u)):u instanceof St?y(null,i.toRemoteArg(u,h[0],h[1],y)):u instanceof T?y(null,ui(u)):u instanceof d?y(null,fi(u)):u instanceof Error?y(null,ii(u)):y(null,u);break;default:y(null,u);break}}function a(u,h){if(!u)return u;switch(typeof u){case"object":if(typeof u.type=="number"){var y=u;switch(y.type){case Yt.CB:var L=u.id;return function(){var U=arguments,Z,et=new Array(arguments.length),rt,ht=arguments.length;function wt(Rt){ht>0&&(ht=-1,rt={browserfsMessage:!0,cbId:L,args:[Zr(Rt)]},e.postMessage(rt))}for(Z=0;Z<arguments.length;Z++)(function(Rt,qt){o(qt,h,function(pe,ze){et[Rt]=ze,pe?wt(pe):--ht===0&&(rt={browserfsMessage:!0,cbId:L,args:et},e.postMessage(rt))})})(Z,U[Z]);arguments.length===0&&(rt={browserfsMessage:!0,cbId:L,args:et},e.postMessage(rt))};case Yt.API_ERROR:return ni(y);case Yt.STATS:return si(y);case Yt.FILEFLAG:return ci(y);case Yt.BUFFER:return li(y);case Yt.ERROR:return oi(y);default:return u}}else return u;default:return u}}e.addEventListener("message",function(u){var h=u.data;if(va(h)){var y=h.args,L=new Array(y.length);switch(h.method){case"close":case"sync":(function(){var et=y[1];i.applyFdAPIRequest(h,function(rt){var ht={browserfsMessage:!0,cbId:et.id,args:rt?[Zr(rt)]:[]};e.postMessage(ht)})})();break;case"probe":(function(){var et=st.getRootFS(),rt=y[1],ht={type:Yt.PROBE,isReadOnly:et.isReadOnly(),supportsLinks:et.supportsLinks(),supportsProps:et.supportsProps()},wt={browserfsMessage:!0,cbId:rt.id,args:[ht]};e.postMessage(wt)})();break;default:for(var U=0;U<y.length;U++)L[U]=a(y[U],L);var Z=st.getRootFS();Z[h.method].apply(Z,L);break}}})},t.prototype.getName=function(){return t.Name},t.prototype.initialize=function(e){var i=this;if(this._isInitialized)e();else{var o={browserfsMessage:!0,method:"probe",args:[this._argLocal2Remote(Mt()),this._callbackConverter.toRemoteArg(function(a){i._isInitialized=!0,i._isReadOnly=a.isReadOnly,i._supportLinks=a.supportsLinks,i._supportProps=a.supportsProps,e()})]};this._worker.postMessage(o)}},t.prototype.isReadOnly=function(){return this._isReadOnly},t.prototype.supportsSynch=function(){return!1},t.prototype.supportsLinks=function(){return this._supportLinks},t.prototype.supportsProps=function(){return this._supportProps},t.prototype.rename=function(e,i,o){this._rpc("rename",arguments)},t.prototype.stat=function(e,i,o){this._rpc("stat",arguments)},t.prototype.open=function(e,i,o,a){this._rpc("open",arguments)},t.prototype.unlink=function(e,i){this._rpc("unlink",arguments)},t.prototype.rmdir=function(e,i){this._rpc("rmdir",arguments)},t.prototype.mkdir=function(e,i,o){this._rpc("mkdir",arguments)},t.prototype.readdir=function(e,i){this._rpc("readdir",arguments)},t.prototype.exists=function(e,i){this._rpc("exists",arguments)},t.prototype.realpath=function(e,i,o){this._rpc("realpath",arguments)},t.prototype.truncate=function(e,i,o){this._rpc("truncate",arguments)},t.prototype.readFile=function(e,i,o,a){this._rpc("readFile",arguments)},t.prototype.writeFile=function(e,i,o,a,u,h){this._rpc("writeFile",arguments)},t.prototype.appendFile=function(e,i,o,a,u,h){this._rpc("appendFile",arguments)},t.prototype.chmod=function(e,i,o,a){this._rpc("chmod",arguments)},t.prototype.chown=function(e,i,o,a,u){this._rpc("chown",arguments)},t.prototype.utimes=function(e,i,o,a){this._rpc("utimes",arguments)},t.prototype.link=function(e,i,o){this._rpc("link",arguments)},t.prototype.symlink=function(e,i,o,a){this._rpc("symlink",arguments)},t.prototype.readlink=function(e,i){this._rpc("readlink",arguments)},t.prototype.syncClose=function(e,i,o){this._worker.postMessage({browserfsMessage:!0,method:e,args:[i.toRemoteArg(),this._callbackConverter.toRemoteArg(o)]})},t.prototype._argRemote2Local=function(e){if(!e)return e;switch(typeof e){case"object":if(typeof e.type=="number"){var i=e;switch(i.type){case Yt.API_ERROR:return ni(i);case Yt.FD:var o=i;return new hi(this,o.path,T.getFileFlag(o.flag),M.fromBuffer(sr(o.stat)),o.id,sr(o.data));case Yt.STATS:return si(i);case Yt.FILEFLAG:return ci(i);case Yt.BUFFER:return li(i);case Yt.ERROR:return oi(i);default:return e}}else return e;default:return e}},t.prototype._rpc=function(e,i){for(var o=this,a=new Array(i.length),u=0;u<i.length;u++)a[u]=o._argLocal2Remote(i[u]);var h={browserfsMessage:!0,method:e,args:a};this._worker.postMessage(h)},t.prototype._argLocal2Remote=function(e){if(!e)return e;switch(typeof e){case"object":return e instanceof M?ai(e):e instanceof c?Zr(e):e instanceof hi?e.toRemoteArg():e instanceof T?ui(e):e instanceof d?fi(e):e instanceof Error?ii(e):"Unknown argument";case"function":return this._callbackConverter.toRemoteArg(e);default:return e}},t}(tt);Xr.Name="WorkerFS",Xr.Options={worker:{type:"object",description:"The target worker that you want to connect to, or the current worker if in a worker context.",validator:function(n,t){n.postMessage?t():t(new c(s.EINVAL,"option must be a Web Worker instance."))}}};function ma(n,t,r){var e=new XMLHttpRequest;e.open("GET",n,!0);var i=!0;switch(t){case"buffer":e.responseType="arraybuffer";break;case"json":try{e.responseType="json",i=e.responseType==="json"}catch{i=!1}break;default:return r(new c(s.EINVAL,"Invalid download type: "+t))}e.onreadystatechange=function(o){if(e.readyState===4)if(e.status===200)switch(t){case"buffer":return r(null,e.response?d.from(e.response):Mt());case"json":return i?r(null,e.response):r(null,JSON.parse(e.responseText))}else return r(new c(e.status,"XHR error."))},e.send()}function wa(n,t){var r=new XMLHttpRequest;r.open("GET",n,!1);var e=null,i=null;if(r.overrideMimeType("text/plain; charset=x-user-defined"),r.onreadystatechange=function(o){if(r.readyState===4)if(r.status===200)switch(t){case"buffer":var a=r.responseText;e=d.alloc(a.length);for(var u=0;u<a.length;u++)e[u]=a.charCodeAt(u);return;case"json":e=JSON.parse(r.responseText);return}else{i=new c(r.status,"XHR error.");return}},r.send(),i)throw i;return e}function _a(n,t){var r=new XMLHttpRequest;switch(r.open("GET",n,!1),t){case"buffer":r.responseType="arraybuffer";break;case"json":break;default:throw new c(s.EINVAL,"Invalid download type: "+t)}var e,i;if(r.onreadystatechange=function(o){if(r.readyState===4)if(r.status===200)switch(t){case"buffer":e=d.from(r.response);break;case"json":e=JSON.parse(r.response);break}else i=new c(r.status,"XHR error.")},r.send(),i)throw i;return e}function pi(n,t,r){var e=new XMLHttpRequest;e.open("HEAD",t,n),e.onreadystatechange=function(i){if(e.readyState===4)if(e.status===200)try{return r(null,parseInt(e.getResponseHeader("Content-Length")||"-1",10))}catch{return r(new c(s.EIO,"XHR HEAD error: Could not read content-length."))}else return r(new c(e.status,"XHR HEAD error."))},e.send()}var di=ma,Sa=gt&&typeof Blob<"u"?_a:wa;function Ea(n){var t=-1;return pi(!1,n,function(r,e){if(r)throw r;t=e}),t}function Ia(n,t){pi(!0,n,t)}var Fe=function(){this._index={},this.addPath("/",new Se)};Fe.fromListing=function(t){var r=new Fe,e=new Se;r._index["/"]=e;for(var i=[["",t,e]];i.length>0;){var o=void 0,a=i.pop(),u=a[0],h=a[1],y=a[2];for(var L in h)if(h.hasOwnProperty(L)){var U=h[L],Z=u+"/"+L;U?(r._index[Z]=o=new Se,i.push([Z,U,o])):o=new mr(new M(x.FILE,-1,365)),y&&(y._ls[L]=o)}}return r},Fe.prototype.fileIterator=function(t){var r=this;for(var e in r._index)if(r._index.hasOwnProperty(e))for(var i=r._index[e],o=i.getListing(),a=0,u=o;a<u.length;a+=1){var h=u[a],y=i.getItem(h);Ze(y)&&t(y.getData())}},Fe.prototype.addPath=function(t,r){if(!r)throw new Error("Inode must be specified");if(t[0]!=="/")throw new Error("Path must be absolute, got: "+t);if(this._index.hasOwnProperty(t))return this._index[t]===r;var e=this._split_path(t),i=e[0],o=e[1],a=this._index[i];return a===void 0&&t!=="/"&&(a=new Se,!this.addPath(i,a))||t!=="/"&&!a.addItem(o,r)?!1:(Ge(r)&&(this._index[t]=r),!0)},Fe.prototype.addPathFast=function(t,r){var e=t.lastIndexOf("/"),i=e===0?"/":t.substring(0,e),o=t.substring(e+1),a=this._index[i];return a===void 0&&(a=new Se,this.addPathFast(i,a)),a.addItem(o,r)?(r.isDir()&&(this._index[t]=r),!0):!1},Fe.prototype.removePath=function(t){var r=this,e=this._split_path(t),i=e[0],o=e[1],a=this._index[i];if(a===void 0)return null;var u=a.remItem(o);if(u===null)return null;if(Ge(u)){for(var h=u.getListing(),y=0,L=h;y<L.length;y+=1){var U=L[y];r.removePath(t+"/"+U)}t!=="/"&&delete this._index[t]}return u},Fe.prototype.ls=function(t){var r=this._index[t];return r===void 0?null:r.getListing()},Fe.prototype.getInode=function(t){var r=this._split_path(t),e=r[0],i=r[1],o=this._index[e];return o===void 0?null:e===t?o:o.getItem(i)},Fe.prototype._split_path=function(t){var r=p.dirname(t),e=t.substr(r.length+(r==="/"?0:1));return[r,e]};var mr=function(t){this.data=t};mr.prototype.isFile=function(){return!0},mr.prototype.isDir=function(){return!1},mr.prototype.getData=function(){return this.data},mr.prototype.setData=function(t){this.data=t};var Se=function(t){t===void 0&&(t=null),this.data=t,this._ls={}};Se.prototype.isFile=function(){return!1},Se.prototype.isDir=function(){return!0},Se.prototype.getData=function(){return this.data},Se.prototype.getStats=function(){return new M(x.DIRECTORY,4096,365)},Se.prototype.getListing=function(){return Object.keys(this._ls)},Se.prototype.getItem=function(t){var r=this._ls[t];return r||null},Se.prototype.addItem=function(t,r){return t in this._ls?!1:(this._ls[t]=r,!0)},Se.prototype.remItem=function(t){var r=this._ls[t];return r===void 0?null:(delete this._ls[t],r)};function Ze(n){return!!n&&n.isFile()}function Ge(n){return!!n&&n.isDir()}function ba(n,t,r){try{r(null,n.toString(t))}catch(e){r(e)}}var Yr=function(n){function t(r,e,i){e===void 0&&(e=""),i===void 0&&(i=!0),n.call(this),r||(r="index.json"),e.length>0&&e.charAt(e.length-1)!=="/"&&(e=e+"/"),this.prefixUrl=e;var o=null;if(typeof r=="string"){if(o=this._requestFileSync(r,"json"),!o)throw new Error("Unable to find listing at URL: ${listingUrlOrObj}")}else o=r;Ot(i,t.Name,{index:typeof r=="string"?r:"file index as an object",baseUrl:e}),this._index=Fe.fromListing(o)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){e.index===void 0&&(e.index="index.json"),typeof e.index=="string"?t.FromURL(e.index,i,e.baseUrl,!1):i(null,new t(e.index,e.baseUrl,!1))},t.isAvailable=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest!==null},t.FromURL=function(e,i,o,a){o===void 0&&(o=e.slice(0,e.lastIndexOf("/")+1)),a===void 0&&(a=!0),a&&console.warn(`[XmlHttpRequest] XmlHttpRequest.FromURL() is deprecated and will be removed in the next major release. Please use 'XmlHttpRequest.Create({ index: "`+e+'", baseUrl: "'+o+`" }, cb)' instead.`),di(e,"json",function(u,h){u?i(u):i(null,new t(h,o,!1))})},t.prototype.empty=function(){this._index.fileIterator(function(e){e.fileData=null})},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,i){i(0,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.preloadFile=function(e,i){var o=this._index.getInode(e);if(Ze(o)){if(o===null)throw c.ENOENT(e);var a=o.getData();a.size=i.length,a.fileData=i}else throw c.EISDIR(e)},t.prototype.stat=function(e,i,o){var a=this._index.getInode(e);if(a===null)return o(c.ENOENT(e));var u;Ze(a)?(u=a.getData(),u.size<0?this._requestFileSizeAsync(e,function(h,y){if(h)return o(h);u.size=y,o(null,u.clone())}):o(null,u.clone())):Ge(a)?(u=a.getStats(),o(null,u)):o(c.FileError(s.EINVAL,e))},t.prototype.statSync=function(e,i){var o=this._index.getInode(e);if(o===null)throw c.ENOENT(e);var a;if(Ze(o))a=o.getData(),a.size<0&&(a.size=this._requestFileSizeSync(e));else if(Ge(o))a=o.getStats();else throw c.FileError(s.EINVAL,e);return a},t.prototype.open=function(e,i,o,a){if(i.isWriteable())return a(new c(s.EPERM,e));var u=this,h=this._index.getInode(e);if(h===null)return a(c.ENOENT(e));if(Ze(h)){var y=h.getData();switch(i.pathExistsAction()){case I.THROW_EXCEPTION:case I.TRUNCATE_FILE:return a(c.EEXIST(e));case I.NOP:if(y.fileData)return a(null,new de(u,e,i,y.clone(),y.fileData));this._requestFileAsync(e,"buffer",function(L,U){return L?a(L):(y.size=U.length,y.fileData=U,a(null,new de(u,e,i,y.clone(),U)))});break;default:return a(new c(s.EINVAL,"Invalid FileMode object."))}}else return a(c.EISDIR(e))},t.prototype.openSync=function(e,i,o){if(i.isWriteable())throw new c(s.EPERM,e);var a=this._index.getInode(e);if(a===null)throw c.ENOENT(e);if(Ze(a)){var u=a.getData();switch(i.pathExistsAction()){case I.THROW_EXCEPTION:case I.TRUNCATE_FILE:throw c.EEXIST(e);case I.NOP:if(u.fileData)return new de(this,e,i,u.clone(),u.fileData);var h=this._requestFileSync(e,"buffer");return u.size=h.length,u.fileData=h,new de(this,e,i,u.clone(),h);default:throw new c(s.EINVAL,"Invalid FileMode object.")}}else throw c.EISDIR(e)},t.prototype.readdir=function(e,i){try{i(null,this.readdirSync(e))}catch(o){i(o)}},t.prototype.readdirSync=function(e){var i=this._index.getInode(e);if(i===null)throw c.ENOENT(e);if(Ge(i))return i.getListing();throw c.ENOTDIR(e)},t.prototype.readFile=function(e,i,o,a){var u=a;this.open(e,o,420,function(h,y){if(h)return a(h);a=function(Z,et){y.close(function(rt){return Z||(Z=rt),u(Z,et)})};var L=y,U=L.getBuffer();i===null?a(h,Tt(U)):ba(U,i,a)})},t.prototype.readFileSync=function(e,i,o){var a=this.openSync(e,o,420);try{var u=a,h=u.getBuffer();return i===null?Tt(h):h.toString(i)}finally{a.closeSync()}},t.prototype.getXhrPath=function(e){return e.charAt(0)==="/"&&(e=e.slice(1)),this.prefixUrl+e},t.prototype._requestFileAsync=function(e,i,o){di(this.getXhrPath(e),i,o)},t.prototype._requestFileSync=function(e,i){return Sa(this.getXhrPath(e),i)},t.prototype._requestFileSizeAsync=function(e,i){Ia(this.getXhrPath(e),i)},t.prototype._requestFileSizeSync=function(e){return Ea(this.getXhrPath(e))},t}(tt);Yr.Name="XmlHttpRequest",Yr.Options={index:{type:["string","object"],optional:!0,description:"URL to a file index as a JSON file or the file index object itself, generated with the make_xhrfs_index script. Defaults to `index.json`."},baseUrl:{type:"string",optional:!0,description:"Used as the URL prefix for fetched files. Default: Fetch files relative to the index."}};var ur=function(){};ur.str2byte=function(t,r){for(var e=t.length>r.length?r.length:t.length,i=0;i<e;i++){var o=t.charCodeAt(i);if(o>127){var a=ur.extendedChars.indexOf(t.charAt(i));a>-1&&(o=a+128)}r[o]=i}return e},ur.byte2str=function(t){for(var r=new Array(t.length),e=0;e<t.length;e++){var i=t[e];i>127?r[e]=ur.extendedChars[i-128]:r[e]=String.fromCharCode(i)}return r.join("")},ur.byteLength=function(t){return t.length},ur.extendedChars=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","_","_","_","","","","","","","","","+","+","","","+","+","-","-","+","-","+","","","+","+","-","-","","-","+","","","","","","","i","","","","+","+","_","_","","","_","","","","","","","","","","","","","","","","","","","_","","","","","","","","","","","","_"," "];var ka=w(31).inflateRaw,yi={},vi;(function(n){n[n.MSDOS=0]="MSDOS",n[n.AMIGA=1]="AMIGA",n[n.OPENVMS=2]="OPENVMS",n[n.UNIX=3]="UNIX",n[n.VM_CMS=4]="VM_CMS",n[n.ATARI_ST=5]="ATARI_ST",n[n.OS2_HPFS=6]="OS2_HPFS",n[n.MAC=7]="MAC",n[n.Z_SYSTEM=8]="Z_SYSTEM",n[n.CP_M=9]="CP_M",n[n.NTFS=10]="NTFS",n[n.MVS=11]="MVS",n[n.VSE=12]="VSE",n[n.ACORN_RISC=13]="ACORN_RISC",n[n.VFAT=14]="VFAT",n[n.ALT_MVS=15]="ALT_MVS",n[n.BEOS=16]="BEOS",n[n.TANDEM=17]="TANDEM",n[n.OS_400=18]="OS_400",n[n.OSX=19]="OSX"})(vi||(vi={}));var wr;(function(n){n[n.STORED=0]="STORED",n[n.SHRUNK=1]="SHRUNK",n[n.REDUCED_1=2]="REDUCED_1",n[n.REDUCED_2=3]="REDUCED_2",n[n.REDUCED_3=4]="REDUCED_3",n[n.REDUCED_4=5]="REDUCED_4",n[n.IMPLODE=6]="IMPLODE",n[n.DEFLATE=8]="DEFLATE",n[n.DEFLATE64=9]="DEFLATE64",n[n.TERSE_OLD=10]="TERSE_OLD",n[n.BZIP2=12]="BZIP2",n[n.LZMA=14]="LZMA",n[n.TERSE_NEW=18]="TERSE_NEW",n[n.LZ77=19]="LZ77",n[n.WAVPACK=97]="WAVPACK",n[n.PPMD=98]="PPMD"})(wr||(wr={}));function gi(n,t){var r=t&31,e=(t>>5&15)-1,i=(t>>9)+1980,o=n&31,a=n>>5&63,u=n>>11;return new Date(i,e,r,u,a,o)}function qr(n,t,r,e){return e===0?"":t?n.toString("utf8",r,r+e):ur.byte2str(n.slice(r,r+e))}var Oe=function(t){if(this.data=t,t.readUInt32LE(0)!==67324752)throw new c(s.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0))};Oe.prototype.versionNeeded=function(){return this.data.readUInt16LE(4)},Oe.prototype.flags=function(){return this.data.readUInt16LE(6)},Oe.prototype.compressionMethod=function(){return this.data.readUInt16LE(8)},Oe.prototype.lastModFileTime=function(){return gi(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},Oe.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(10)},Oe.prototype.crc32=function(){return this.data.readUInt32LE(14)},Oe.prototype.fileNameLength=function(){return this.data.readUInt16LE(26)},Oe.prototype.extraFieldLength=function(){return this.data.readUInt16LE(28)},Oe.prototype.fileName=function(){return qr(this.data,this.useUTF8(),30,this.fileNameLength())},Oe.prototype.extraField=function(){var t=30+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},Oe.prototype.totalSize=function(){return 30+this.fileNameLength()+this.extraFieldLength()},Oe.prototype.useUTF8=function(){return(this.flags()&2048)===2048};var Tr=function(t,r,e){this.header=t,this.record=r,this.data=e};Tr.prototype.decompress=function(){var t=this.header.compressionMethod(),r=yi[t];if(r)return r(this.data,this.record.compressedSize(),this.record.uncompressedSize(),this.record.flag());var e=wr[t];throw e||(e="Unknown: "+t),new c(s.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+e)},Tr.prototype.getHeader=function(){return this.header},Tr.prototype.getRecord=function(){return this.record},Tr.prototype.getRawData=function(){return this.data};var At=function(t,r){if(this.zipData=t,this.data=r,this.data.readUInt32LE(0)!==33639248)throw new c(s.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));this._filename=this.produceFilename()};At.prototype.versionMadeBy=function(){return this.data.readUInt16LE(4)},At.prototype.versionNeeded=function(){return this.data.readUInt16LE(6)},At.prototype.flag=function(){return this.data.readUInt16LE(8)},At.prototype.compressionMethod=function(){return this.data.readUInt16LE(10)},At.prototype.lastModFileTime=function(){return gi(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},At.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(12)},At.prototype.crc32=function(){return this.data.readUInt32LE(16)},At.prototype.compressedSize=function(){return this.data.readUInt32LE(20)},At.prototype.uncompressedSize=function(){return this.data.readUInt32LE(24)},At.prototype.fileNameLength=function(){return this.data.readUInt16LE(28)},At.prototype.extraFieldLength=function(){return this.data.readUInt16LE(30)},At.prototype.fileCommentLength=function(){return this.data.readUInt16LE(32)},At.prototype.diskNumberStart=function(){return this.data.readUInt16LE(34)},At.prototype.internalAttributes=function(){return this.data.readUInt16LE(36)},At.prototype.externalAttributes=function(){return this.data.readUInt32LE(38)},At.prototype.headerRelativeOffset=function(){return this.data.readUInt32LE(42)},At.prototype.produceFilename=function(){var t=qr(this.data,this.useUTF8(),46,this.fileNameLength());return t.replace(/\\/g,"/")},At.prototype.fileName=function(){return this._filename},At.prototype.rawFileName=function(){return this.data.slice(46,46+this.fileNameLength())},At.prototype.extraField=function(){var t=44+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},At.prototype.fileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return qr(this.data,this.useUTF8(),t,this.fileCommentLength())},At.prototype.rawFileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return this.data.slice(t,t+this.fileCommentLength())},At.prototype.totalSize=function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},At.prototype.isDirectory=function(){var t=this.fileName();return!!(this.externalAttributes()&16)||t.charAt(t.length-1)==="/"},At.prototype.isFile=function(){return!this.isDirectory()},At.prototype.useUTF8=function(){return(this.flag()&2048)===2048},At.prototype.isEncrypted=function(){return(this.flag()&1)===1},At.prototype.getFileData=function(){var t=this.headerRelativeOffset(),r=new Oe(this.zipData.slice(t));return new Tr(r,this,this.zipData.slice(t+r.totalSize()))},At.prototype.getData=function(){return this.getFileData().decompress()},At.prototype.getRawData=function(){return this.getFileData().getRawData()},At.prototype.getStats=function(){return new M(x.FILE,this.uncompressedSize(),365,new Date,this.lastModFileTime())};var Pe=function(t){if(this.data=t,this.data.readUInt32LE(0)!==101010256)throw new c(s.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0))};Pe.prototype.diskNumber=function(){return this.data.readUInt16LE(4)},Pe.prototype.cdDiskNumber=function(){return this.data.readUInt16LE(6)},Pe.prototype.cdDiskEntryCount=function(){return this.data.readUInt16LE(8)},Pe.prototype.cdTotalEntryCount=function(){return this.data.readUInt16LE(10)},Pe.prototype.cdSize=function(){return this.data.readUInt32LE(12)},Pe.prototype.cdOffset=function(){return this.data.readUInt32LE(16)},Pe.prototype.cdZipCommentLength=function(){return this.data.readUInt16LE(20)},Pe.prototype.cdZipComment=function(){return qr(this.data,!0,22,this.cdZipCommentLength())},Pe.prototype.rawCdZipComment=function(){return this.data.slice(22,22+this.cdZipCommentLength())};var mi=function(t,r,e,i){this.index=t,this.directoryEntries=r,this.eocd=e,this.data=i},cr=function(n){function t(r,e,i){e===void 0&&(e=""),i===void 0&&(i=!0),n.call(this),this.name=e,this._index=new Fe,this._directoryEntries=[],this._eocd=null,Ot(i,t.Name,{zipData:"zip data as a Buffer",name:e}),r instanceof mi?(this._index=r.index,this._directoryEntries=r.directoryEntries,this._eocd=r.eocd,this.data=r.data):(this.data=r,this.populateIndex())}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){try{t.computeIndex(e.zipData,function(o){var a=new t(o,e.name,!1);i(null,a)},!1)}catch(o){i(o)}},t.isAvailable=function(){return!0},t.RegisterDecompressionMethod=function(e,i){yi[e]=i},t.computeIndex=function(e,i,o){o===void 0&&(o=!0),o&&console.warn("[ZipFS] ZipFS.computeIndex is now deprecated, and will be removed in the next major release. Please update your code to use 'ZipFS.Create({ zipData: zip file as a Buffer}, cb)' instead.");var a=new Fe,u=t.getEOCD(e);if(u.diskNumber()!==u.cdDiskNumber())throw new c(s.EINVAL,"ZipFS does not support spanned zip files.");var h=u.cdOffset();if(h===4294967295)throw new c(s.EINVAL,"ZipFS does not support Zip64.");var y=h+u.cdSize();t.computeIndexResponsive(e,a,h,y,i,[],u)},t.getEOCD=function(e){for(var i=22,o=Math.min(i+65535,e.length-1),a=i;a<o;a++)if(e.readUInt32LE(e.length-a)===101010256)return new Pe(e.slice(e.length-a));throw new c(s.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.")},t.addToIndex=function(e,i){var o=e.fileName();if(o.charAt(0)==="/")throw new Error("WHY IS THIS ABSOLUTE");o.charAt(o.length-1)==="/"&&(o=o.substr(0,o.length-1)),e.isDirectory()?i.addPathFast("/"+o,new Se(e)):i.addPathFast("/"+o,new mr(e))},t.computeIndexResponsive=function(e,i,o,a,u,h,y){if(o<a){for(var L=0;L++<200&&o<a;){var U=new At(e,e.slice(o));t.addToIndex(U,i),o+=U.totalSize(),h.push(U)}pn(function(){t.computeIndexResponsive(e,i,o,a,u,h,y)})}else u(new mi(i,h,y,e))},t.prototype.getName=function(){return t.Name+(this.name!==""?" "+this.name:"")},t.prototype.getCentralDirectoryEntry=function(e){var i=this._index.getInode(e);if(i===null)throw c.ENOENT(e);if(Ze(i))return i.getData();if(Ge(i))return i.getData();throw c.EPERM("Invalid inode: "+i)},t.prototype.getCentralDirectoryEntryAt=function(e){var i=this._directoryEntries[e];if(!i)throw new RangeError("Invalid directory index: "+e+".");return i},t.prototype.getNumberOfCentralDirectoryEntries=function(){return this._directoryEntries.length},t.prototype.getEndOfCentralDirectory=function(){return this._eocd},t.prototype.diskSpace=function(e,i){i(this.data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,i){var o=this._index.getInode(e);if(o===null)throw c.ENOENT(e);var a;if(Ze(o))a=o.getData().getStats();else if(Ge(o))a=o.getStats();else throw new c(s.EINVAL,"Invalid inode.");return a},t.prototype.openSync=function(e,i,o){if(i.isWriteable())throw new c(s.EPERM,e);var a=this._index.getInode(e);if(a)if(Ze(a)){var u=a.getData(),h=u.getStats();switch(i.pathExistsAction()){case I.THROW_EXCEPTION:case I.TRUNCATE_FILE:throw c.EEXIST(e);case I.NOP:return new de(this,e,i,h,u.getData());default:throw new c(s.EINVAL,"Invalid FileMode object.")}}else throw c.EISDIR(e);else throw c.ENOENT(e)},t.prototype.readdirSync=function(e){var i=this._index.getInode(e);if(i){if(Ge(i))return i.getListing();throw c.ENOTDIR(e)}else throw c.ENOENT(e)},t.prototype.readFileSync=function(e,i,o){var a=this.openSync(e,o,420);try{var u=a,h=u.getBuffer();return i===null?Tt(h):h.toString(i)}finally{a.closeSync()}},t.prototype.populateIndex=function(){var e=this,i=this._eocd=t.getEOCD(this.data);if(i.diskNumber()!==i.cdDiskNumber())throw new c(s.EINVAL,"ZipFS does not support spanned zip files.");var o=i.cdOffset();if(o===4294967295)throw new c(s.EINVAL,"ZipFS does not support Zip64.");for(var a=o+i.cdSize();o<a;){var u=new At(e.data,e.data.slice(o));o+=u.totalSize(),t.addToIndex(u,e._index),e._directoryEntries.push(u)}},t}(se);cr.Name="ZipFS",cr.Options={zipData:{type:"object",description:"The zip file as a Buffer object.",validator:R},name:{type:"string",optional:!0,description:"The name of the zip file (optional)."}},cr.CompressionMethod=wr,cr.RegisterDecompressionMethod(wr.DEFLATE,function(n,t,r){return kt(ka(n.slice(0,t),{chunkSize:r}))}),cr.RegisterDecompressionMethod(wr.STORED,function(n,t,r){return Tt(n,0,r)});var Oa="IEEE_P1282";function Ee(n,t,r){return n.toString("ascii",t,t+r).trim()}function yn(n,t,r){if(r===1)return String.fromCharCode(n[t]);for(var e=Math.floor(r/2),i=new Array(e),o=0;o<e;o++){var a=t+(o<<1);i[o]=String.fromCharCode(n[a+1]|n[a]<<8)}return i.join("")}function je(n,t){var r=parseInt(Ee(n,t,4),10),e=parseInt(Ee(n,t+4,2),10),i=parseInt(Ee(n,t+6,2),10),o=parseInt(Ee(n,t+8,2),10),a=parseInt(Ee(n,t+10,2),10),u=parseInt(Ee(n,t+12,2),10),h=parseInt(Ee(n,t+14,2),10);return new Date(r,e,i,o,a,u,h*100)}function fr(n,t){var r=n[t],e=n[t+1],i=n[t+2],o=n[t+3],a=n[t+4],u=n[t+5];return new Date(r,e-1,i,o,a,u)}function Ra(n,t){var r=n.slice(t),e=new te(r);switch(e.signatureWord()){case 17221:return new Ii(r);case 20548:return new Ta(r);case 21328:return new bi(r);case 21332:return new ki(r);case 17746:return new Oi(r);case 17747:return new La(r);case 20568:return new Ni(r);case 20558:return new Da(r);case 21324:return new vn(r);case 20045:return new Fi(r);case 17228:return new gn(r);case 20556:return new Aa(r);case 21061:return new Ti(r);case 21574:return new Li(r);case 21318:return new xa(r);case 21074:return new Ri(r);default:return e}}function wi(n,t,r,e){r=r-4;for(var i=new Array;t<r;){var o=Ra(n,t),a=o.length();if(a===0)return i;if(t+=a,o instanceof ki)break;o instanceof Ii?i=i.concat(o.getEntries(e)):i.push(o)}return i}var _r=function(t){this._data=t};_r.prototype.type=function(){return this._data[0]},_r.prototype.standardIdentifier=function(){return Ee(this._data,1,5)},_r.prototype.version=function(){return this._data[6]},_r.prototype.data=function(){return this._data.slice(7,2048)};var _i=function(n){function t(r){n.call(this,r),this._root=null}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.systemIdentifier=function(){return this._getString32(8)},t.prototype.volumeIdentifier=function(){return this._getString32(40)},t.prototype.volumeSpaceSize=function(){return this._data.readUInt32LE(80)},t.prototype.volumeSetSize=function(){return this._data.readUInt16LE(120)},t.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(124)},t.prototype.logicalBlockSize=function(){return this._data.readUInt16LE(128)},t.prototype.pathTableSize=function(){return this._data.readUInt32LE(132)},t.prototype.locationOfTypeLPathTable=function(){return this._data.readUInt32LE(140)},t.prototype.locationOfOptionalTypeLPathTable=function(){return this._data.readUInt32LE(144)},t.prototype.locationOfTypeMPathTable=function(){return this._data.readUInt32BE(148)},t.prototype.locationOfOptionalTypeMPathTable=function(){return this._data.readUInt32BE(152)},t.prototype.rootDirectoryEntry=function(e){return this._root===null&&(this._root=this._constructRootDirectoryRecord(this._data.slice(156)),this._root.rootCheckForRockRidge(e)),this._root},t.prototype.volumeSetIdentifier=function(){return this._getString(190,128)},t.prototype.publisherIdentifier=function(){return this._getString(318,128)},t.prototype.dataPreparerIdentifier=function(){return this._getString(446,128)},t.prototype.applicationIdentifier=function(){return this._getString(574,128)},t.prototype.copyrightFileIdentifier=function(){return this._getString(702,38)},t.prototype.abstractFileIdentifier=function(){return this._getString(740,36)},t.prototype.bibliographicFileIdentifier=function(){return this._getString(776,37)},t.prototype.volumeCreationDate=function(){return je(this._data,813)},t.prototype.volumeModificationDate=function(){return je(this._data,830)},t.prototype.volumeExpirationDate=function(){return je(this._data,847)},t.prototype.volumeEffectiveDate=function(){return je(this._data,864)},t.prototype.fileStructureVersion=function(){return this._data[881]},t.prototype.applicationUsed=function(){return this._data.slice(883,1395)},t.prototype.reserved=function(){return this._data.slice(1395,2048)},t.prototype._getString32=function(e){return this._getString(e,32)},t}(_r),Na=function(n){function t(r){if(n.call(this,r),this.type()!==1)throw new c(s.EIO,"Invalid primary volume descriptor.")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"ISO9660"},t.prototype._constructRootDirectoryRecord=function(e){return new Si(e,-1)},t.prototype._getString=function(e,i){return this._getString(e,i)},t}(_i),Fa=function(n){function t(r){if(n.call(this,r),this.type()!==2)throw new c(s.EIO,"Invalid supplementary volume descriptor.");var e=this.escapeSequence(),i=e[2];if(e[0]!==37||e[1]!==47||i!==64&&i!==67&&i!==69)throw new c(s.EIO,"Unrecognized escape sequence for SupplementaryVolumeDescriptor: "+e.toString())}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"Joliet"},t.prototype.escapeSequence=function(){return this._data.slice(88,120)},t.prototype._constructRootDirectoryRecord=function(e){return new Ei(e,-1)},t.prototype._getString=function(e,i){return yn(this._data,e,i)},t}(_i),Zt=function(t,r){this._suEntries=null,this._fileOrDir=null,this._data=t,this._rockRidgeOffset=r};Zt.prototype.hasRockRidge=function(){return this._rockRidgeOffset>-1},Zt.prototype.getRockRidgeOffset=function(){return this._rockRidgeOffset},Zt.prototype.rootCheckForRockRidge=function(t){var r=this.getDirectory(t);this._rockRidgeOffset=r.getDotEntry(t)._getRockRidgeOffset(t),this._rockRidgeOffset>-1&&(this._fileOrDir=null)},Zt.prototype.length=function(){return this._data[0]},Zt.prototype.extendedAttributeRecordLength=function(){return this._data[1]},Zt.prototype.lba=function(){return this._data.readUInt32LE(2)*2048},Zt.prototype.dataLength=function(){return this._data.readUInt32LE(10)},Zt.prototype.recordingDate=function(){return fr(this._data,18)},Zt.prototype.fileFlags=function(){return this._data[25]},Zt.prototype.fileUnitSize=function(){return this._data[26]},Zt.prototype.interleaveGapSize=function(){return this._data[27]},Zt.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(28)},Zt.prototype.identifier=function(){return this._getString(33,this._data[32])},Zt.prototype.fileName=function(t){if(this.hasRockRidge()){var r=this._rockRidgeFilename(t);if(r!==null)return r}var e=this.identifier();if(this.isDirectory(t))return e;var i=e.indexOf(";");return i===-1?e:e[i-1]==="."?e.slice(0,i-1):e.slice(0,i)},Zt.prototype.isDirectory=function(t){var r=!!(this.fileFlags()&2);return!r&&this.hasRockRidge()&&(r=this.getSUEntries(t).filter(function(e){return e instanceof gn}).length>0),r},Zt.prototype.isSymlink=function(t){return this.hasRockRidge()&&this.getSUEntries(t).filter(function(r){return r instanceof vn}).length>0},Zt.prototype.getSymlinkPath=function(t){for(var r="",e=this.getSUEntries(t),i=this._getGetString(),o=0,a=e;o<a.length;o+=1){var u=a[o];if(u instanceof vn){for(var h=u.componentRecords(),y=0,L=h;y<L.length;y+=1){var U=L[y],Z=U.flags();Z&2?r+="./":Z&4?r+="../":Z&8?r+="/":(r+=U.content(i),Z&1||(r+="/"))}if(!u.continueFlag())break}}return r.length>1&&r[r.length-1]==="/"?r.slice(0,r.length-1):r},Zt.prototype.getFile=function(t){if(this.isDirectory(t))throw new Error("Tried to get a File from a directory.");return this._fileOrDir===null&&(this._fileOrDir=t.slice(this.lba(),this.lba()+this.dataLength())),this._fileOrDir},Zt.prototype.getDirectory=function(t){if(!this.isDirectory(t))throw new Error("Tried to get a Directory from a file.");return this._fileOrDir===null&&(this._fileOrDir=this._constructDirectory(t)),this._fileOrDir},Zt.prototype.getSUEntries=function(t){return this._suEntries||this._constructSUEntries(t),this._suEntries},Zt.prototype._rockRidgeFilename=function(t){var r=this.getSUEntries(t).filter(function(h){return h instanceof Fi});if(r.length===0||r[0].flags()&6)return null;for(var e="",i=this._getGetString(),o=0,a=r;o<a.length;o+=1){var u=a[o];if(e+=u.name(i),!(u.flags()&1))break}return e},Zt.prototype._constructSUEntries=function(t){var r=33+this._data[32];r%2===1&&r++,r+=this._rockRidgeOffset,this._suEntries=wi(this._data,r,this.length(),t)},Zt.prototype._getRockRidgeOffset=function(t){this._rockRidgeOffset=0;var r=this.getSUEntries(t);if(r.length>0){var e=r[0];if(e instanceof bi&&e.checkBytesPass())for(var i=1;i<r.length;i++){var o=r[i];if(o instanceof Ri||o instanceof Oi&&o.extensionIdentifier()===Oa)return e.bytesSkipped()}}return this._rockRidgeOffset=-1,-1};var Si=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,i){return Ee(this._data,e,i)},t.prototype._constructDirectory=function(e){return new Ca(this,e)},t.prototype._getGetString=function(){return Ee},t}(Zt),Ei=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,i){return yn(this._data,e,i)},t.prototype._constructDirectory=function(e){return new Ma(this,e)},t.prototype._getGetString=function(){return yn},t}(Zt),te=function(t){this._data=t};te.prototype.signatureWord=function(){return this._data.readUInt16BE(0)},te.prototype.signatureWordString=function(){return Ee(this._data,0,2)},te.prototype.length=function(){return this._data[2]},te.prototype.suVersion=function(){return this._data[3]};var Ii=function(n){function t(r){n.call(this,r),this._entries=null}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.continuationLba=function(){return this._data.readUInt32LE(4)},t.prototype.continuationLbaOffset=function(){return this._data.readUInt32LE(12)},t.prototype.continuationLength=function(){return this._data.readUInt32LE(20)},t.prototype.getEntries=function(e){if(!this._entries){var i=this.continuationLba()*2048+this.continuationLbaOffset();this._entries=wi(e,i,this.continuationLength(),e)}return this._entries},t}(te),Ta=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(te),bi=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.checkBytesPass=function(){return this._data[4]===190&&this._data[5]===239},t.prototype.bytesSkipped=function(){return this._data[6]},t}(te),ki=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(te),Oi=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.identifierLength=function(){return this._data[4]},t.prototype.descriptorLength=function(){return this._data[5]},t.prototype.sourceLength=function(){return this._data[6]},t.prototype.extensionVersion=function(){return this._data[7]},t.prototype.extensionIdentifier=function(){return Ee(this._data,8,this.identifierLength())},t.prototype.extensionDescriptor=function(){return Ee(this._data,8+this.identifierLength(),this.descriptorLength())},t.prototype.extensionSource=function(){return Ee(this._data,8+this.identifierLength()+this.descriptorLength(),this.sourceLength())},t}(te),La=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.extensionSequence=function(){return this._data[4]},t}(te),Ri=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(te),Ni=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.mode=function(){return this._data.readUInt32LE(4)},t.prototype.fileLinks=function(){return this._data.readUInt32LE(12)},t.prototype.uid=function(){return this._data.readUInt32LE(20)},t.prototype.gid=function(){return this._data.readUInt32LE(28)},t.prototype.inode=function(){return this._data.readUInt32LE(36)},t}(te),Da=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.devTHigh=function(){return this._data.readUInt32LE(4)},t.prototype.devTLow=function(){return this._data.readUInt32LE(12)},t}(te),vn=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.continueFlag=function(){return this.flags()&1},t.prototype.componentRecords=function(){for(var e=this,i=new Array,o=5;o<this.length();){var a=new Lr(e._data.slice(o));i.push(a),o+=a.length()}return i},t}(te),Lr=function(t){this._data=t};Lr.prototype.flags=function(){return this._data[0]},Lr.prototype.length=function(){return 2+this.componentLength()},Lr.prototype.componentLength=function(){return this._data[1]},Lr.prototype.content=function(t){return t(this._data,2,this.componentLength())};var Fi=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.name=function(e){return e(this._data,5,this.length()-5)},t}(te),gn=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.childDirectoryLba=function(){return this._data.readUInt32LE(4)},t}(te),Aa=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.parentDirectoryLba=function(){return this._data.readUInt32LE(4)},t}(te),Ti=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(te),Li=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.creation=function(){return this.flags()&1?this._longFormDates()?je(this._data,5):fr(this._data,5):null},t.prototype.modify=function(){if(this.flags()&2){var e=this.flags()&1?1:0;return this._longFormDates?je(this._data,5+e*17):fr(this._data,5+e*7)}else return null},t.prototype.access=function(){if(this.flags()&4){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,this._longFormDates?je(this._data,5+e*17):fr(this._data,5+e*7)}else return null},t.prototype.backup=function(){if(this.flags()&16){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,this._longFormDates?je(this._data,5+e*17):fr(this._data,5+e*7)}else return null},t.prototype.expiration=function(){if(this.flags()&32){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,e+=this.flags()&16?1:0,this._longFormDates?je(this._data,5+e*17):fr(this._data,5+e*7)}else return null},t.prototype.effective=function(){if(this.flags()&64){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,e+=this.flags()&16?1:0,e+=this.flags()&32?1:0,this._longFormDates?je(this._data,5+e*17):fr(this._data,5+e*7)}else return null},t.prototype._longFormDates=function(){return!!this.flags()},t}(te),xa=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.virtualSizeHigh=function(){return this._data.readUInt32LE(4)},t.prototype.virtualSizeLow=function(){return this._data.readUInt32LE(12)},t.prototype.tableDepth=function(){return this._data[20]},t}(te),Dr=function(t,r){var e=this;this._fileList=[],this._fileMap={},this._record=t;var i=t.lba(),o=i+t.dataLength();if(!(t.fileFlags()&2)){var a=t.getSUEntries(r).filter(function(L){return L instanceof gn})[0];i=a.childDirectoryLba()*2048,o=1/0}for(;i<o;){var u=r[i];if(u===0){i++;continue}var h=e._constructDirectoryRecord(r.slice(i)),y=h.fileName(r);y!=="\0"&&y!==""?(!h.hasRockRidge()||h.getSUEntries(r).filter(function(L){return L instanceof Ti}).length===0)&&(e._fileMap[y]=h,e._fileList.push(y)):o===1/0&&(o=i+h.dataLength()),i+=h.length()}};Dr.prototype.getRecord=function(t){return this._fileMap[t]},Dr.prototype.getFileList=function(){return this._fileList},Dr.prototype.getDotEntry=function(t){return this._constructDirectoryRecord(t.slice(this._record.lba()))};var Ca=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new Si(e,this._record.getRockRidgeOffset())},t}(Dr),Ma=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new Ei(e,this._record.getRockRidgeOffset())},t}(Dr),Gr=function(n){function t(r,e,i){var o=this;e===void 0&&(e=""),i===void 0&&(i=!0),n.call(this),this._data=r,Ot(i,t.Name,{data:"ISO data as a Buffer",name:e});for(var a=!1,u=16*2048,h=new Array;!a;){var y=r.slice(u),L=new _r(y);switch(L.type()){case 1:h.push(new Na(y));break;case 2:h.push(new Fa(y));break;case 255:a=!0;break}u+=2048}if(h.length===0)throw new c(s.EIO,"Unable to find a suitable volume descriptor.");h.forEach(function(U){(!o._pvd||o._pvd.type()!==2)&&(o._pvd=U)}),this._root=this._pvd.rootDirectoryEntry(r),this._name=e}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o,a;try{o=new t(e.data,e.name,!1)}catch(u){u=u}finally{i(a,o)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){var e="IsoFS"+this._name+(this._pvd?"-"+this._pvd.name():"");return this._root&&this._root.hasRockRidge()&&(e+="-RockRidge"),e},t.prototype.diskSpace=function(e,i){i(this._data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,i){var o=this._getDirectoryRecord(e);if(o===null)throw c.ENOENT(e);return this._getStats(e,o)},t.prototype.openSync=function(e,i,o){if(i.isWriteable())throw new c(s.EPERM,e);var a=this._getDirectoryRecord(e);if(a){if(a.isSymlink(this._data))return this.openSync(p.resolve(e,a.getSymlinkPath(this._data)),i,o);if(a.isDirectory(this._data))throw c.EISDIR(e);var u=a.getFile(this._data),h=this._getStats(e,a);switch(i.pathExistsAction()){case I.THROW_EXCEPTION:case I.TRUNCATE_FILE:throw c.EEXIST(e);case I.NOP:return new de(this,e,i,h,u);default:throw new c(s.EINVAL,"Invalid FileMode object.")}}else throw c.ENOENT(e)},t.prototype.readdirSync=function(e){var i=this._getDirectoryRecord(e);if(i){if(i.isDirectory(this._data))return i.getDirectory(this._data).getFileList().slice(0);throw c.ENOTDIR(e)}else throw c.ENOENT(e)},t.prototype.readFileSync=function(e,i,o){var a=this.openSync(e,o,420);try{var u=a,h=u.getBuffer();return i===null?Tt(h):h.toString(i)}finally{a.closeSync()}},t.prototype._getDirectoryRecord=function(e){var i=this;if(e==="/")return this._root;for(var o=e.split("/").slice(1),a=this._root,u=0,h=o;u<h.length;u+=1){var y=h[u];if(a.isDirectory(i._data)){if(a=a.getDirectory(i._data).getRecord(y),!a)return null}else return null}return a},t.prototype._getStats=function(e,i){if(i.isSymlink(this._data)){var o=p.resolve(e,i.getSymlinkPath(this._data)),a=this._getDirectoryRecord(o);return a?this._getStats(o,a):null}else{var u=i.dataLength(),h=365,y=i.recordingDate(),L=y,U=y,Z=y;if(i.hasRockRidge())for(var et=i.getSUEntries(this._data),rt=0,ht=et;rt<ht.length;rt+=1){var wt=ht[rt];if(wt instanceof Ni)h=wt.mode();else if(wt instanceof Li){var Rt=wt.flags();Rt&4&&(L=wt.access()),Rt&2&&(U=wt.modify()),Rt&1&&(Z=wt.creation())}}return h=h&365,new M(i.isDirectory(this._data)?x.DIRECTORY:x.FILE,u,h,L,U,Z)}},t}(se);Gr.Name="IsoFS",Gr.Options={data:{type:"object",description:"The ISO file in a buffer",validator:R}},[b,Ur,Pr,dr,zr,yr,br,Gr,Or,vr,Fr,Xr,Yr,cr].forEach(function(n){var t=n.Create;n.Create=function(r,e){var i=typeof r=="function",o=i?r:e,a=i?{}:r;function u(h){h?o(h):t.call(n,a,o)}N(n,a,u)}});var Kr={AsyncMirror:b,Dropbox:Ur,Emscripten:Pr,FolderAdapter:dr,HTML5FS:zr,InMemory:yr,IndexedDB:br,IsoFS:Gr,LocalStorage:Or,MountableFileSystem:vr,OverlayFS:Fr,WorkerFS:Xr,XmlHttpRequest:Yr,ZipFS:cr};O.initializeTTYs&&O.initializeTTYs();function Ua(n){n.Buffer=d,n.process=O;var t=n.require?n.require:null;n.require=function(r){var e=Di(r);return e||t.apply(null,Array.prototype.slice.call(arguments,0))}}function Pa(n,t){Kr[n]=t}function Di(n){switch(n){case"fs":return st;case"path":return p;case"buffer":return _;case"process":return O;case"bfs_utils":return G;default:return Kr[n]}}function Ai(n){return st.initialize(n)}function ja(n,t){mn(n,function(r,e){e?(Ai(e),t()):t(r)})}function mn(n,t){var r=n.fs;if(!r)return t(new c(s.EPERM,'Missing "fs" property on configuration object.'));var e=n.options,i=0,o=!1;function a(){if(!o){o=!0;var y=Kr[r];y?y.Create(e,t):t(new c(s.EPERM,"File system "+r+" is not available in BrowserFS."))}}if(e!==null&&typeof e=="object"){var u=!1,h=Object.keys(e).filter(function(y){return y!=="fs"});h.forEach(function(y){var L=e[y];L!==null&&typeof L=="object"&&L.fs&&(i++,mn(L,function(U,Z){if(i--,U){if(o)return;o=!0,t(U)}else e[y]=Z,i===0&&u&&a()}))}),u=!0}i===0&&a()}"ab".substr(-1)!=="b"&&(String.prototype.substr=function(n){return function(t,r){return t<0&&(t=this.length+t),n.call(this,t,r)}}(String.prototype.substr)),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&(Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(n,t){n===void 0&&(n=0),t===void 0&&(t=this.length);var r=this;return n<0&&(n=this.length+n,n<0&&(n=0)),t<0&&(t=this.length+t,t<0&&(t=0)),t<n&&(t=n),new Uint8Array(r.buffer,r.byteOffset+n,t-n)})),S.install=Ua,S.registerFileSystem=Pa,S.BFSRequire=Di,S.initialize=Ai,S.configure=ja,S.getFileSystem=mn,S.EmscriptenFS=bt,S.FileSystem=Kr,S.Errors=v,S.setImmediate=pn}).call(S,w(1),function(){return this}(),w(5)(F),w(6))},function(F,S,w){F.exports=w(2).Buffer},function(F,S,w){(function(s){var D=w(3),E=w(4);S.Buffer=s,S.SlowBuffer=V,S.INSPECT_MAX_BYTES=50;var O=2147483647;S.kMaxLength=O,s.TYPED_ARRAY_SUPPORT=_(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function _(){try{var b=new Uint8Array(1);return b.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},b.foo()===42}catch{return!1}}function p(b){if(b>O)throw new RangeError("Invalid typed array length");var f=new Uint8Array(b);return f.__proto__=s.prototype,f}function s(b,f,l){if(typeof b=="number"){if(typeof f=="string")throw new Error("If encoding is specified then the first argument must be a string");return I(b)}return m(b,f,l)}typeof Symbol<"u"&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192;function m(b,f,l){if(typeof b=="number")throw new TypeError('"value" argument must not be a number');return le(b)?M(b,f,l):typeof b=="string"?T(b,f):K(b)}s.from=function(b,f,l){return m(b,f,l)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array;function c(b){if(typeof b!="number")throw new TypeError('"size" argument must be a number');if(b<0)throw new RangeError('"size" argument must not be negative')}function v(b,f,l){return c(b),b<=0?p(b):f!==void 0?typeof l=="string"?p(b).fill(f,l):p(b).fill(f):p(b)}s.alloc=function(b,f,l){return v(b,f,l)};function I(b){return c(b),p(b<0?0:B(b)|0)}s.allocUnsafe=function(b){return I(b)},s.allocUnsafeSlow=function(b){return I(b)};function T(b,f){if((typeof f!="string"||f==="")&&(f="utf8"),!s.isEncoding(f))throw new TypeError('"encoding" must be a valid string encoding');var l=vt(b,f)|0,k=p(l),j=k.write(b,f);return j!==l&&(k=k.slice(0,j)),k}function x(b){for(var f=b.length<0?0:B(b.length)|0,l=p(f),k=0;k<f;k+=1)l[k]=b[k]&255;return l}function M(b,f,l){if(f<0||b.byteLength<f)throw new RangeError("'offset' is out of bounds");if(b.byteLength<f+(l||0))throw new RangeError("'length' is out of bounds");var k;return f===void 0&&l===void 0?k=new Uint8Array(b):l===void 0?k=new Uint8Array(b,f):k=new Uint8Array(b,f,l),k.__proto__=s.prototype,k}function K(b){if(s.isBuffer(b)){var f=B(b.length)|0,l=p(f);return l.length===0||b.copy(l,0,0,f),l}if(b){if(de(b)||"length"in b)return typeof b.length!="number"||xe(b.length)?p(0):x(b);if(b.type==="Buffer"&&Array.isArray(b.data))return x(b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function B(b){if(b>=O)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+O.toString(16)+" bytes");return b|0}function V(b){return+b!=b&&(b=0),s.alloc(+b)}s.isBuffer=function(f){return f!=null&&f._isBuffer===!0},s.compare=function(f,l){if(!s.isBuffer(f)||!s.isBuffer(l))throw new TypeError("Arguments must be Buffers");if(f===l)return 0;for(var k=f.length,j=l.length,X=0,J=Math.min(k,j);X<J;++X)if(f[X]!==l[X]){k=f[X],j=l[X];break}return k<j?-1:j<k?1:0},s.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(f,l){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return s.alloc(0);var k;if(l===void 0)for(l=0,k=0;k<f.length;++k)l+=f[k].length;var j=s.allocUnsafe(l),X=0;for(k=0;k<f.length;++k){var J=f[k];if(!s.isBuffer(J))throw new TypeError('"list" argument must be an Array of Buffers');J.copy(j,X),X+=J.length}return j};function vt(b,f){if(s.isBuffer(b))return b.length;if(de(b)||le(b))return b.byteLength;typeof b!="string"&&(b=""+b);var l=b.length;if(l===0)return 0;for(var k=!1;;)switch(f){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":case void 0:return yt(b).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return se(b).length;default:if(k)return yt(b).length;f=(""+f).toLowerCase(),k=!0}}s.byteLength=vt;function $(b,f,l){var k=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,f>>>=0,l<=f))return"";for(b||(b="utf8");;)switch(b){case"hex":return kt(this,f,l);case"utf8":case"utf-8":return Ht(this,f,l);case"ascii":return H(this,f,l);case"latin1":case"binary":return at(this,f,l);case"base64":return gt(this,f,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _t(this,f,l);default:if(k)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase(),k=!0}}s.prototype._isBuffer=!0;function dt(b,f,l){var k=b[f];b[f]=b[l],b[l]=k}s.prototype.swap16=function(){var f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var l=0;l<f;l+=2)dt(this,l,l+1);return this},s.prototype.swap32=function(){var f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var l=0;l<f;l+=4)dt(this,l,l+3),dt(this,l+1,l+2);return this},s.prototype.swap64=function(){var f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var l=0;l<f;l+=8)dt(this,l,l+7),dt(this,l+1,l+6),dt(this,l+2,l+5),dt(this,l+3,l+4);return this},s.prototype.toString=function(){var f=this.length;return f===0?"":arguments.length===0?Ht(this,0,f):$.apply(this,arguments)},s.prototype.equals=function(f){if(!s.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:s.compare(this,f)===0},s.prototype.inspect=function(){var f="",l=S.INSPECT_MAX_BYTES;return this.length>0&&(f=this.toString("hex",0,l).match(/.{2}/g).join(" "),this.length>l&&(f+=" ... ")),"<Buffer "+f+">"},s.prototype.compare=function(f,l,k,j,X){if(!s.isBuffer(f))throw new TypeError("Argument must be a Buffer");if(l===void 0&&(l=0),k===void 0&&(k=f?f.length:0),j===void 0&&(j=0),X===void 0&&(X=this.length),l<0||k>f.length||j<0||X>this.length)throw new RangeError("out of range index");if(j>=X&&l>=k)return 0;if(j>=X)return-1;if(l>=k)return 1;if(l>>>=0,k>>>=0,j>>>=0,X>>>=0,this===f)return 0;for(var J=X-j,Nt=k-l,xt=Math.min(J,Nt),Pt=this.slice(j,X),Jt=f.slice(l,k),Ct=0;Ct<xt;++Ct)if(Pt[Ct]!==Jt[Ct]){J=Pt[Ct],Nt=Jt[Ct];break}return J<Nt?-1:Nt<J?1:0};function ft(b,f,l,k,j){if(b.length===0)return-1;if(typeof l=="string"?(k=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,xe(l)&&(l=j?0:b.length-1),l<0&&(l=b.length+l),l>=b.length){if(j)return-1;l=b.length-1}else if(l<0)if(j)l=0;else return-1;if(typeof f=="string"&&(f=s.from(f,k)),s.isBuffer(f))return f.length===0?-1:z(b,f,l,k,j);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?j?Uint8Array.prototype.indexOf.call(b,f,l):Uint8Array.prototype.lastIndexOf.call(b,f,l):z(b,[f],l,k,j);throw new TypeError("val must be string, number or Buffer")}function z(b,f,l,k,j){var X=1,J=b.length,Nt=f.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(b.length<2||f.length<2)return-1;X=2,J/=2,Nt/=2,l/=2}function xt(lr,tr){return X===1?lr[tr]:lr.readUInt16BE(tr*X)}var Pt;if(j){var Jt=-1;for(Pt=l;Pt<J;Pt++)if(xt(b,Pt)===xt(f,Jt===-1?0:Pt-Jt)){if(Jt===-1&&(Jt=Pt),Pt-Jt+1===Nt)return Jt*X}else Jt!==-1&&(Pt-=Pt-Jt),Jt=-1}else for(l+Nt>J&&(l=J-Nt),Pt=l;Pt>=0;Pt--){for(var Ct=!0,Ce=0;Ce<Nt;Ce++)if(xt(b,Pt+Ce)!==xt(f,Ce)){Ct=!1;break}if(Ct)return Pt}return-1}s.prototype.includes=function(f,l,k){return this.indexOf(f,l,k)!==-1},s.prototype.indexOf=function(f,l,k){return ft(this,f,l,k,!0)},s.prototype.lastIndexOf=function(f,l,k){return ft(this,f,l,k,!1)};function Q(b,f,l,k){l=Number(l)||0;var j=b.length-l;k?(k=Number(k),k>j&&(k=j)):k=j;var X=f.length;if(X%2!==0)throw new TypeError("Invalid hex string");k>X/2&&(k=X/2);for(var J=0;J<k;++J){var Nt=parseInt(f.substr(J*2,2),16);if(xe(Nt))return J;b[l+J]=Nt}return J}function st(b,f,l,k){return St(yt(f,b.length-l),b,l,k)}function Ft(b,f,l,k){return St(bt(f),b,l,k)}function mt(b,f,l,k){return Ft(b,f,l,k)}function Lt(b,f,l,k){return St(se(f),b,l,k)}function Ot(b,f,l,k){return St(tt(f,b.length-l),b,l,k)}s.prototype.write=function(f,l,k,j){if(l===void 0)j="utf8",k=this.length,l=0;else if(k===void 0&&typeof l=="string")j=l,k=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(k)?(k=k>>>0,j===void 0&&(j="utf8")):(j=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var X=this.length-l;if((k===void 0||k>X)&&(k=X),f.length>0&&(k<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");j||(j="utf8");for(var J=!1;;)switch(j){case"hex":return Q(this,f,l,k);case"utf8":case"utf-8":return st(this,f,l,k);case"ascii":return Ft(this,f,l,k);case"latin1":case"binary":return mt(this,f,l,k);case"base64":return Lt(this,f,l,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ot(this,f,l,k);default:if(J)throw new TypeError("Unknown encoding: "+j);j=(""+j).toLowerCase(),J=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function gt(b,f,l){return f===0&&l===b.length?D.fromByteArray(b):D.fromByteArray(b.slice(f,l))}function Ht(b,f,l){l=Math.min(b.length,l);for(var k=[],j=f;j<l;){var X=b[j],J=null,Nt=X>239?4:X>223?3:X>191?2:1;if(j+Nt<=l){var xt,Pt,Jt,Ct;switch(Nt){case 1:X<128&&(J=X);break;case 2:xt=b[j+1],(xt&192)===128&&(Ct=(X&31)<<6|xt&63,Ct>127&&(J=Ct));break;case 3:xt=b[j+1],Pt=b[j+2],(xt&192)===128&&(Pt&192)===128&&(Ct=(X&15)<<12|(xt&63)<<6|Pt&63,Ct>2047&&(Ct<55296||Ct>57343)&&(J=Ct));break;case 4:xt=b[j+1],Pt=b[j+2],Jt=b[j+3],(xt&192)===128&&(Pt&192)===128&&(Jt&192)===128&&(Ct=(X&15)<<18|(xt&63)<<12|(Pt&63)<<6|Jt&63,Ct>65535&&Ct<1114112&&(J=Ct))}}J===null?(J=65533,Nt=1):J>65535&&(J-=65536,k.push(J>>>10&1023|55296),J=56320|J&1023),k.push(J),j+=Nt}return C(k)}var P=4096;function C(b){var f=b.length;if(f<=P)return String.fromCharCode.apply(String,b);for(var l="",k=0;k<f;)l+=String.fromCharCode.apply(String,b.slice(k,k+=P));return l}function H(b,f,l){var k="";l=Math.min(b.length,l);for(var j=f;j<l;++j)k+=String.fromCharCode(b[j]&127);return k}function at(b,f,l){var k="";l=Math.min(b.length,l);for(var j=f;j<l;++j)k+=String.fromCharCode(b[j]);return k}function kt(b,f,l){var k=b.length;(!f||f<0)&&(f=0),(!l||l<0||l>k)&&(l=k);for(var j="",X=f;X<l;++X)j+=nt(b[X]);return j}function _t(b,f,l){for(var k=b.slice(f,l),j="",X=0;X<k.length;X+=2)j+=String.fromCharCode(k[X]+k[X+1]*256);return j}s.prototype.slice=function(f,l){var k=this.length;f=~~f,l=l===void 0?k:~~l,f<0?(f+=k,f<0&&(f=0)):f>k&&(f=k),l<0?(l+=k,l<0&&(l=0)):l>k&&(l=k),l<f&&(l=f);var j=this.subarray(f,l);return j.__proto__=s.prototype,j};function Et(b,f,l){if(b%1!==0||b<0)throw new RangeError("offset is not uint");if(b+f>l)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUIntLE=function(f,l,k){f=f>>>0,l=l>>>0,k||Et(f,l,this.length);for(var j=this[f],X=1,J=0;++J<l&&(X*=256);)j+=this[f+J]*X;return j},s.prototype.readUIntBE=function(f,l,k){f=f>>>0,l=l>>>0,k||Et(f,l,this.length);for(var j=this[f+--l],X=1;l>0&&(X*=256);)j+=this[f+--l]*X;return j},s.prototype.readUInt8=function(f,l){return f=f>>>0,l||Et(f,1,this.length),this[f]},s.prototype.readUInt16LE=function(f,l){return f=f>>>0,l||Et(f,2,this.length),this[f]|this[f+1]<<8},s.prototype.readUInt16BE=function(f,l){return f=f>>>0,l||Et(f,2,this.length),this[f]<<8|this[f+1]},s.prototype.readUInt32LE=function(f,l){return f=f>>>0,l||Et(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},s.prototype.readUInt32BE=function(f,l){return f=f>>>0,l||Et(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},s.prototype.readIntLE=function(f,l,k){f=f>>>0,l=l>>>0,k||Et(f,l,this.length);for(var j=this[f],X=1,J=0;++J<l&&(X*=256);)j+=this[f+J]*X;return X*=128,j>=X&&(j-=Math.pow(2,8*l)),j},s.prototype.readIntBE=function(f,l,k){f=f>>>0,l=l>>>0,k||Et(f,l,this.length);for(var j=l,X=1,J=this[f+--j];j>0&&(X*=256);)J+=this[f+--j]*X;return X*=128,J>=X&&(J-=Math.pow(2,8*l)),J},s.prototype.readInt8=function(f,l){return f=f>>>0,l||Et(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},s.prototype.readInt16LE=function(f,l){f=f>>>0,l||Et(f,2,this.length);var k=this[f]|this[f+1]<<8;return k&32768?k|4294901760:k},s.prototype.readInt16BE=function(f,l){f=f>>>0,l||Et(f,2,this.length);var k=this[f+1]|this[f]<<8;return k&32768?k|4294901760:k},s.prototype.readInt32LE=function(f,l){return f=f>>>0,l||Et(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},s.prototype.readInt32BE=function(f,l){return f=f>>>0,l||Et(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},s.prototype.readFloatLE=function(f,l){return f=f>>>0,l||Et(f,4,this.length),E.read(this,f,!0,23,4)},s.prototype.readFloatBE=function(f,l){return f=f>>>0,l||Et(f,4,this.length),E.read(this,f,!1,23,4)},s.prototype.readDoubleLE=function(f,l){return f=f>>>0,l||Et(f,8,this.length),E.read(this,f,!0,52,8)},s.prototype.readDoubleBE=function(f,l){return f=f>>>0,l||Et(f,8,this.length),E.read(this,f,!1,52,8)};function Tt(b,f,l,k,j,X){if(!s.isBuffer(b))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>j||f<X)throw new RangeError('"value" argument is out of bounds');if(l+k>b.length)throw new RangeError("Index out of range")}s.prototype.writeUIntLE=function(f,l,k,j){if(f=+f,l=l>>>0,k=k>>>0,!j){var X=Math.pow(2,8*k)-1;Tt(this,f,l,k,X,0)}var J=1,Nt=0;for(this[l]=f&255;++Nt<k&&(J*=256);)this[l+Nt]=f/J&255;return l+k},s.prototype.writeUIntBE=function(f,l,k,j){if(f=+f,l=l>>>0,k=k>>>0,!j){var X=Math.pow(2,8*k)-1;Tt(this,f,l,k,X,0)}var J=k-1,Nt=1;for(this[l+J]=f&255;--J>=0&&(Nt*=256);)this[l+J]=f/Nt&255;return l+k},s.prototype.writeUInt8=function(f,l,k){return f=+f,l=l>>>0,k||Tt(this,f,l,1,255,0),this[l]=f&255,l+1},s.prototype.writeUInt16LE=function(f,l,k){return f=+f,l=l>>>0,k||Tt(this,f,l,2,65535,0),this[l]=f&255,this[l+1]=f>>>8,l+2},s.prototype.writeUInt16BE=function(f,l,k){return f=+f,l=l>>>0,k||Tt(this,f,l,2,65535,0),this[l]=f>>>8,this[l+1]=f&255,l+2},s.prototype.writeUInt32LE=function(f,l,k){return f=+f,l=l>>>0,k||Tt(this,f,l,4,4294967295,0),this[l+3]=f>>>24,this[l+2]=f>>>16,this[l+1]=f>>>8,this[l]=f&255,l+4},s.prototype.writeUInt32BE=function(f,l,k){return f=+f,l=l>>>0,k||Tt(this,f,l,4,4294967295,0),this[l]=f>>>24,this[l+1]=f>>>16,this[l+2]=f>>>8,this[l+3]=f&255,l+4},s.prototype.writeIntLE=function(f,l,k,j){if(f=+f,l=l>>>0,!j){var X=Math.pow(2,8*k-1);Tt(this,f,l,k,X-1,-X)}var J=0,Nt=1,xt=0;for(this[l]=f&255;++J<k&&(Nt*=256);)f<0&&xt===0&&this[l+J-1]!==0&&(xt=1),this[l+J]=(f/Nt>>0)-xt&255;return l+k},s.prototype.writeIntBE=function(f,l,k,j){if(f=+f,l=l>>>0,!j){var X=Math.pow(2,8*k-1);Tt(this,f,l,k,X-1,-X)}var J=k-1,Nt=1,xt=0;for(this[l+J]=f&255;--J>=0&&(Nt*=256);)f<0&&xt===0&&this[l+J+1]!==0&&(xt=1),this[l+J]=(f/Nt>>0)-xt&255;return l+k},s.prototype.writeInt8=function(f,l,k){return f=+f,l=l>>>0,k||Tt(this,f,l,1,127,-128),f<0&&(f=255+f+1),this[l]=f&255,l+1},s.prototype.writeInt16LE=function(f,l,k){return f=+f,l=l>>>0,k||Tt(this,f,l,2,32767,-32768),this[l]=f&255,this[l+1]=f>>>8,l+2},s.prototype.writeInt16BE=function(f,l,k){return f=+f,l=l>>>0,k||Tt(this,f,l,2,32767,-32768),this[l]=f>>>8,this[l+1]=f&255,l+2},s.prototype.writeInt32LE=function(f,l,k){return f=+f,l=l>>>0,k||Tt(this,f,l,4,2147483647,-2147483648),this[l]=f&255,this[l+1]=f>>>8,this[l+2]=f>>>16,this[l+3]=f>>>24,l+4},s.prototype.writeInt32BE=function(f,l,k){return f=+f,l=l>>>0,k||Tt(this,f,l,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[l]=f>>>24,this[l+1]=f>>>16,this[l+2]=f>>>8,this[l+3]=f&255,l+4};function Ut(b,f,l,k,j,X){if(l+k>b.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function Mt(b,f,l,k,j){return f=+f,l=l>>>0,j||Ut(b,f,l,4),E.write(b,f,l,k,23,4),l+4}s.prototype.writeFloatLE=function(f,l,k){return Mt(this,f,l,!0,k)},s.prototype.writeFloatBE=function(f,l,k){return Mt(this,f,l,!1,k)};function R(b,f,l,k,j){return f=+f,l=l>>>0,j||Ut(b,f,l,8),E.write(b,f,l,k,52,8),l+8}s.prototype.writeDoubleLE=function(f,l,k){return R(this,f,l,!0,k)},s.prototype.writeDoubleBE=function(f,l,k){return R(this,f,l,!1,k)},s.prototype.copy=function(f,l,k,j){if(k||(k=0),!j&&j!==0&&(j=this.length),l>=f.length&&(l=f.length),l||(l=0),j>0&&j<k&&(j=k),j===k||f.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("sourceStart out of bounds");if(j<0)throw new RangeError("sourceEnd out of bounds");j>this.length&&(j=this.length),f.length-l<j-k&&(j=f.length-l+k);var X=j-k,J;if(this===f&&k<l&&l<j)for(J=X-1;J>=0;--J)f[J+l]=this[J+k];else if(X<1e3)for(J=0;J<X;++J)f[J+l]=this[J+k];else Uint8Array.prototype.set.call(f,this.subarray(k,k+X),l);return X},s.prototype.fill=function(f,l,k,j){if(typeof f=="string"){if(typeof l=="string"?(j=l,l=0,k=this.length):typeof k=="string"&&(j=k,k=this.length),f.length===1){var X=f.charCodeAt(0);X<256&&(f=X)}if(j!==void 0&&typeof j!="string")throw new TypeError("encoding must be a string");if(typeof j=="string"&&!s.isEncoding(j))throw new TypeError("Unknown encoding: "+j)}else typeof f=="number"&&(f=f&255);if(l<0||this.length<l||this.length<k)throw new RangeError("Out of range index");if(k<=l)return this;l=l>>>0,k=k===void 0?this.length:k>>>0,f||(f=0);var J;if(typeof f=="number")for(J=l;J<k;++J)this[J]=f;else{var Nt=s.isBuffer(f)?f:new s(f,j),xt=Nt.length;for(J=0;J<k-l;++J)this[J+l]=Nt[J%xt]}return this};var N=/[^+/0-9A-Za-z-_]/g;function G(b){if(b=b.trim().replace(N,""),b.length<2)return"";for(;b.length%4!==0;)b=b+"=";return b}function nt(b){return b<16?"0"+b.toString(16):b.toString(16)}function yt(b,f){f=f||1/0;for(var l,k=b.length,j=null,X=[],J=0;J<k;++J){if(l=b.charCodeAt(J),l>55295&&l<57344){if(!j){if(l>56319){(f-=3)>-1&&X.push(239,191,189);continue}else if(J+1===k){(f-=3)>-1&&X.push(239,191,189);continue}j=l;continue}if(l<56320){(f-=3)>-1&&X.push(239,191,189),j=l;continue}l=(j-55296<<10|l-56320)+65536}else j&&(f-=3)>-1&&X.push(239,191,189);if(j=null,l<128){if((f-=1)<0)break;X.push(l)}else if(l<2048){if((f-=2)<0)break;X.push(l>>6|192,l&63|128)}else if(l<65536){if((f-=3)<0)break;X.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((f-=4)<0)break;X.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return X}function bt(b){for(var f=[],l=0;l<b.length;++l)f.push(b.charCodeAt(l)&255);return f}function tt(b,f){for(var l,k,j,X=[],J=0;J<b.length&&!((f-=2)<0);++J)l=b.charCodeAt(J),k=l>>8,j=l%256,X.push(j),X.push(k);return X}function se(b){return D.toByteArray(G(b))}function St(b,f,l,k){for(var j=0;j<k&&!(j+l>=f.length||j>=b.length);++j)f[j+l]=b[j];return j}function le(b){return b instanceof ArrayBuffer||b!=null&&b.constructor!=null&&b.constructor.name==="ArrayBuffer"&&typeof b.byteLength=="number"}function de(b){return typeof ArrayBuffer.isView=="function"&&ArrayBuffer.isView(b)}function xe(b){return b!==b}}).call(S,w(1))},function(F,S){S.byteLength=s,S.toByteArray=m,S.fromByteArray=I;for(var w=[],d=[],D=typeof Uint8Array<"u"?Uint8Array:Array,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O=0,_=E.length;O<_;++O)w[O]=E[O],d[E.charCodeAt(O)]=O;d[45]=62,d[95]=63;function p(T){var x=T.length;if(x%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return T[x-2]==="="?2:T[x-1]==="="?1:0}function s(T){return T.length*3/4-p(T)}function m(T){var x,M,K,B,V,vt,$=T.length;V=p(T),vt=new D($*3/4-V),K=V>0?$-4:$;var dt=0;for(x=0,M=0;x<K;x+=4,M+=3)B=d[T.charCodeAt(x)]<<18|d[T.charCodeAt(x+1)]<<12|d[T.charCodeAt(x+2)]<<6|d[T.charCodeAt(x+3)],vt[dt++]=B>>16&255,vt[dt++]=B>>8&255,vt[dt++]=B&255;return V===2?(B=d[T.charCodeAt(x)]<<2|d[T.charCodeAt(x+1)]>>4,vt[dt++]=B&255):V===1&&(B=d[T.charCodeAt(x)]<<10|d[T.charCodeAt(x+1)]<<4|d[T.charCodeAt(x+2)]>>2,vt[dt++]=B>>8&255,vt[dt++]=B&255),vt}function c(T){return w[T>>18&63]+w[T>>12&63]+w[T>>6&63]+w[T&63]}function v(T,x,M){for(var K,B=[],V=x;V<M;V+=3)K=(T[V]<<16)+(T[V+1]<<8)+T[V+2],B.push(c(K));return B.join("")}function I(T){for(var x,M=T.length,K=M%3,B="",V=[],vt=16383,$=0,dt=M-K;$<dt;$+=vt)V.push(v(T,$,$+vt>dt?dt:$+vt));return K===1?(x=T[M-1],B+=w[x>>2],B+=w[x<<4&63],B+="=="):K===2&&(x=(T[M-2]<<8)+T[M-1],B+=w[x>>10],B+=w[x>>4&63],B+=w[x<<2&63],B+="="),V.push(B),V.join("")}},function(F,S){S.read=function(w,d,D,E,O){var _,p,s=O*8-E-1,m=(1<<s)-1,c=m>>1,v=-7,I=D?O-1:0,T=D?-1:1,x=w[d+I];for(I+=T,_=x&(1<<-v)-1,x>>=-v,v+=s;v>0;_=_*256+w[d+I],I+=T,v-=8);for(p=_&(1<<-v)-1,_>>=-v,v+=E;v>0;p=p*256+w[d+I],I+=T,v-=8);if(_===0)_=1-c;else{if(_===m)return p?NaN:(x?-1:1)*(1/0);p=p+Math.pow(2,E),_=_-c}return(x?-1:1)*p*Math.pow(2,_-E)},S.write=function(w,d,D,E,O,_){var p,s,m,c=_*8-O-1,v=(1<<c)-1,I=v>>1,T=O===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=E?0:_-1,M=E?1:-1,K=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(s=isNaN(d)?1:0,p=v):(p=Math.floor(Math.log(d)/Math.LN2),d*(m=Math.pow(2,-p))<1&&(p--,m*=2),p+I>=1?d+=T/m:d+=T*Math.pow(2,1-I),d*m>=2&&(p++,m/=2),p+I>=v?(s=0,p=v):p+I>=1?(s=(d*m-1)*Math.pow(2,O),p=p+I):(s=d*Math.pow(2,I-1)*Math.pow(2,O),p=0));O>=8;w[D+x]=s&255,x+=M,s/=256,O-=8);for(p=p<<O|s,c+=O;c>0;w[D+x]=p&255,x+=M,p/=256,c-=8);w[D+x-M]|=K*128}},function(F,S){F.exports=function(w){return w.webpackPolyfill||(w.deprecate=function(){},w.paths=[],w.children=[],w.webpackPolyfill=1),w}},function(F,S,w){var d=w(7),D=new d,E={};function O(p){E[p]||(typeof D[p]=="function"?E[p]=function(){return D[p].apply(D,arguments)}:E[p]=D[p])}for(var _ in D)O(_);E.initializeTTYs=function(){D.stdin===null&&(D.initializeTTYs(),E.stdin=D.stdin,E.stdout=D.stdout,E.stderr=D.stderr)},D.nextTick(function(){E.initializeTTYs()}),F.exports=E},function(F,S,w){(function(d){var D=this&&this.__extends||function(m,c){for(var v in c)c.hasOwnProperty(v)&&(m[v]=c[v]);function I(){this.constructor=m}m.prototype=c===null?Object.create(c):(I.prototype=c.prototype,new I)},E=w(8),O=null,_=function(){function m(c,v){this.fun=c,this.array=v}return m.prototype.run=function(){this.fun.apply(null,this.array)},m}(),p=function(){function m(){this._queue=[],this._draining=!1,this._currentQueue=null,this._queueIndex=-1}return m.prototype.push=function(c){var v=this;this._queue.push(c)===1&&!this._draining&&setTimeout(function(){return v._drainQueue()},0)},m.prototype._cleanUpNextTick=function(){this._draining=!1,this._currentQueue&&this._currentQueue.length?this._queue=this._currentQueue.concat(this._queue):this._queueIndex=-1,this._queue.length&&this._drainQueue()},m.prototype._drainQueue=function(){var c=this;if(!this._draining){var v=setTimeout(function(){return c._cleanUpNextTick()});this._draining=!0;for(var I=this._queue.length;I;){for(this._currentQueue=this._queue,this._queue=[];++this._queueIndex<I;)this._currentQueue&&this._currentQueue[this._queueIndex].run();this._queueIndex=-1,I=this._queue.length}this._currentQueue=null,this._draining=!1,clearTimeout(v)}},m}(),s=function(m){D(c,m);function c(){m.apply(this,arguments),this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[],this.execArgv=[],this.stdout=null,this.stderr=null,this.stdin=null,this.domain=null,this._queue=new p,this.execPath=d,this.env={},this.exitCode=0,this._gid=1,this._uid=1,this.version="v5.0",this.versions={http_parser:"0.0",node:"5.0",v8:"0.0",uv:"0.0",zlib:"0.0",ares:"0.0",icu:"0.0",modules:"0",openssl:"0.0"},this.config={target_defaults:{cflags:[],default_configuration:"Release",defines:[],include_dirs:[],libraries:[]},variables:{clang:0,host_arch:"x32",node_install_npm:!1,node_install_waf:!1,node_prefix:"",node_shared_cares:!1,node_shared_http_parser:!1,node_shared_libuv:!1,node_shared_zlib:!1,node_shared_v8:!1,node_use_dtrace:!1,node_use_etw:!1,node_use_openssl:!1,node_shared_openssl:!1,strict_aliasing:!1,target_arch:"x32",v8_use_snapshot:!1,v8_no_strict_aliasing:0,visibility:""}},this.pid=Math.random()*1e3|0,this.title="node",this.arch="x32",this._mask=18,this.connected=void 0}return c.prototype.chdir=function(v){O===null&&(O=w(9)),this._cwd=O.resolve(v)},c.prototype.cwd=function(){return this._cwd},c.prototype.uptime=function(){return(Date.now()-this.startTime)/1e3|0},c.prototype.nextTick=function(v){for(var I=[],T=1;T<arguments.length;T++)I[T-1]=arguments[T];this._queue.push(new _(v,I))},c.prototype.abort=function(){this.emit("abort")},c.prototype.exit=function(v){this.exitCode=v,this.emit("exit",[v])},c.prototype.getgid=function(){return this._gid},c.prototype.setgid=function(v){typeof v=="number"?this._gid=v:this._gid=1},c.prototype.getuid=function(){return this._uid},c.prototype.setuid=function(v){typeof v=="number"?this._uid=v:this._uid=1},c.prototype.kill=function(v,I){this.emit("kill",[v,I])},c.prototype.memoryUsage=function(){return{rss:0,heapTotal:0,heapUsed:0}},c.prototype.umask=function(v){v===void 0&&(v=this._mask);var I=this._mask;return this._mask=v,this.emit("umask",[v]),I},c.prototype.hrtime=function(){var v;typeof performance<"u"?v=performance.now():Date.now?v=Date.now():v=new Date().getTime();var I=v/1e3|0;return v-=I*1e3,v=v*1e6|0,[I,v]},c.prototype.initializeTTYs=function(){if(this.stdout===null){var v=w(10);this.stdout=new v,this.stderr=new v,this.stdin=new v}},c.prototype.disconnect=function(){},c}(E.EventEmitter);F.exports=s}).call(S,"/")},function(F,S){function w(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}F.exports=w,w.EventEmitter=w,w.prototype._events=void 0,w.prototype._maxListeners=void 0,w.defaultMaxListeners=10,w.prototype.setMaxListeners=function(_){if(!D(_)||_<0||isNaN(_))throw TypeError("n must be a positive number");return this._maxListeners=_,this},w.prototype.emit=function(_){var p,s,m,c,v,I;if(this._events||(this._events={}),_==="error"&&(!this._events.error||E(this._events.error)&&!this._events.error.length)){if(p=arguments[1],p instanceof Error)throw p;var T=new Error('Uncaught, unspecified "error" event. ('+p+")");throw T.context=p,T}if(s=this._events[_],O(s))return!1;if(d(s))switch(arguments.length){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:c=Array.prototype.slice.call(arguments,1),s.apply(this,c)}else if(E(s))for(c=Array.prototype.slice.call(arguments,1),I=s.slice(),m=I.length,v=0;v<m;v++)I[v].apply(this,c);return!0},w.prototype.addListener=function(_,p){var s;if(!d(p))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",_,d(p.listener)?p.listener:p),this._events[_]?E(this._events[_])?this._events[_].push(p):this._events[_]=[this._events[_],p]:this._events[_]=p,E(this._events[_])&&!this._events[_].warned&&(O(this._maxListeners)?s=w.defaultMaxListeners:s=this._maxListeners,s&&s>0&&this._events[_].length>s&&(this._events[_].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[_].length),typeof console.trace=="function"&&console.trace())),this},w.prototype.on=w.prototype.addListener,w.prototype.once=function(_,p){if(!d(p))throw TypeError("listener must be a function");var s=!1;function m(){this.removeListener(_,m),s||(s=!0,p.apply(this,arguments))}return m.listener=p,this.on(_,m),this},w.prototype.removeListener=function(_,p){var s,m,c,v;if(!d(p))throw TypeError("listener must be a function");if(!this._events||!this._events[_])return this;if(s=this._events[_],c=s.length,m=-1,s===p||d(s.listener)&&s.listener===p)delete this._events[_],this._events.removeListener&&this.emit("removeListener",_,p);else if(E(s)){for(v=c;v-- >0;)if(s[v]===p||s[v].listener&&s[v].listener===p){m=v;break}if(m<0)return this;s.length===1?(s.length=0,delete this._events[_]):s.splice(m,1),this._events.removeListener&&this.emit("removeListener",_,p)}return this},w.prototype.removeAllListeners=function(_){var p,s;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[_]&&delete this._events[_],this;if(arguments.length===0){for(p in this._events)p!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events={},this}if(s=this._events[_],d(s))this.removeListener(_,s);else if(s)for(;s.length;)this.removeListener(_,s[s.length-1]);return delete this._events[_],this},w.prototype.listeners=function(_){var p;return!this._events||!this._events[_]?p=[]:d(this._events[_])?p=[this._events[_]]:p=this._events[_].slice(),p},w.prototype.listenerCount=function(_){if(this._events){var p=this._events[_];if(d(p))return 1;if(p)return p.length}return 0},w.listenerCount=function(_,p){return _.listenerCount(p)};function d(_){return typeof _=="function"}function D(_){return typeof _=="number"}function E(_){return typeof _=="object"&&_!==null}function O(_){return _===void 0}},function(F,S,w){(function(d){var D=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function E(_){var p=D.exec(_);return p.shift(),p}var O=function(){function _(){}return _.normalize=function(p){p===""&&(p=".");var s=p.charAt(0)===_.sep;p=_._removeDuplicateSeps(p);for(var m=p.split(_.sep),c=[],v=0;v<m.length;v++){var I=m[v];I!=="."&&(I===".."&&(s||!s&&c.length>0&&c[0]!=="..")?c.pop():c.push(I))}if(!s&&c.length<2)switch(c.length){case 1:c[0]===""&&c.unshift(".");break;default:c.push(".")}return p=c.join(_.sep),s&&p.charAt(0)!==_.sep&&(p=_.sep+p),p},_.join=function(){for(var p=[],s=0;s<arguments.length;s++)p[s-0]=arguments[s];for(var m=[],c=0;c<p.length;c++){var v=p[c];if(typeof v!="string")throw new TypeError("Invalid argument type to path.join: "+typeof v);v!==""&&m.push(v)}return _.normalize(m.join(_.sep))},_.resolve=function(){for(var p=[],s=0;s<arguments.length;s++)p[s-0]=arguments[s];for(var m=[],c=0;c<p.length;c++){var v=p[c];if(typeof v!="string")throw new TypeError("Invalid argument type to path.join: "+typeof v);v!==""&&(v.charAt(0)===_.sep&&(m=[]),m.push(v))}var I=_.normalize(m.join(_.sep));if(I.length>1&&I.charAt(I.length-1)===_.sep)return I.substr(0,I.length-1);if(I.charAt(0)!==_.sep){I.charAt(0)==="."&&(I.length===1||I.charAt(1)===_.sep)&&(I=I.length===1?"":I.substr(2));var T=d.cwd();I!==""?I=this.normalize(T+(T!=="/"?_.sep:"")+I):I=T}return I},_.relative=function(p,s){var m;p=_.resolve(p),s=_.resolve(s);var c=p.split(_.sep),v=s.split(_.sep);v.shift(),c.shift();var I=0,T=[];for(m=0;m<c.length;m++){var x=c[m];if(x!==v[m]){I=c.length-m;break}}T=v.slice(m),c.length===1&&c[0]===""&&(I=0),I>c.length&&(I=c.length);var M="";for(m=0;m<I;m++)M+="../";return M+=T.join(_.sep),M.length>1&&M.charAt(M.length-1)===_.sep&&(M=M.substr(0,M.length-1)),M},_.dirname=function(p){p=_._removeDuplicateSeps(p);var s=p.charAt(0)===_.sep,m=p.split(_.sep);return m.pop()===""&&m.length>0&&m.pop(),m.length>1||m.length===1&&!s?m.join(_.sep):s?_.sep:"."},_.basename=function(p,s){if(s===void 0&&(s=""),p==="")return p;p=_.normalize(p);var m=p.split(_.sep),c=m[m.length-1];if(c===""&&m.length>1)return m[m.length-2];if(s.length>0){var v=c.substr(c.length-s.length);if(v===s)return c.substr(0,c.length-s.length)}return c},_.extname=function(p){p=_.normalize(p);var s=p.split(_.sep);if(p=s.pop(),p===""&&s.length>0&&(p=s.pop()),p==="..")return"";var m=p.lastIndexOf(".");return m===-1||m===0?"":p.substr(m)},_.isAbsolute=function(p){return p.length>0&&p.charAt(0)===_.sep},_._makeLong=function(p){return p},_.parse=function(p){var s=E(p);return{root:s[0],dir:s[0]+s[1].slice(0,-1),base:s[2],ext:s[3],name:s[2].slice(0,s[2].length-s[3].length)}},_.format=function(p){if(p===null||typeof p!="object")throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof p);var s=p.root||"";if(typeof s!="string")throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof p.root);var m=p.dir?p.dir+_.sep:"",c=p.base||"";return m+c},_._removeDuplicateSeps=function(p){return p=p.replace(this._replaceRegex,this.sep),p},_.sep="/",_._replaceRegex=new RegExp("//+","g"),_.delimiter=":",_.posix=_,_.win32=_,_}();F.exports=O}).call(S,w(6))},function(F,S,w){(function(d){var D=this&&this.__extends||function(_,p){for(var s in p)p.hasOwnProperty(s)&&(_[s]=p[s]);function m(){this.constructor=_}_.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)},E=w(11),O=function(_){D(p,_);function p(){_.call(this),this.isRaw=!1,this.columns=80,this.rows=120,this.isTTY=!0,this._bufferedWrites=[],this._waitingForWrites=!1}return p.prototype.setRawMode=function(s){this.isRaw!==s&&(this.isRaw=s,this.emit("modeChange"))},p.prototype.changeColumns=function(s){s!==this.columns&&(this.columns=s,this.emit("resize"))},p.prototype.changeRows=function(s){s!==this.rows&&(this.rows=s,this.emit("resize"))},p.isatty=function(s){return s&&s instanceof p},p.prototype._write=function(s,m,c){var v;try{var I;typeof s=="string"?I=new d(s,m):I=s,this._bufferedWrites.push(I),this._waitingForWrites&&this._read(1024)}catch(T){v=T}finally{c(v)}},p.prototype._read=function(s){if(this._bufferedWrites.length===0)this._waitingForWrites=!0;else for(;this._bufferedWrites.length>0&&(this._waitingForWrites=this.push(this._bufferedWrites.shift()),!!this._waitingForWrites););},p}(E.Duplex);F.exports=O}).call(S,w(1))},function(F,S,w){F.exports=E;var d=w(8).EventEmitter,D=w(12);D(E,d),E.Readable=w(13),E.Writable=w(27),E.Duplex=w(28),E.Transform=w(29),E.PassThrough=w(30),E.Stream=E;function E(){d.call(this)}E.prototype.pipe=function(O,_){var p=this;function s(M){O.writable&&O.write(M)===!1&&p.pause&&p.pause()}p.on("data",s);function m(){p.readable&&p.resume&&p.resume()}O.on("drain",m),!O._isStdio&&(!_||_.end!==!1)&&(p.on("end",v),p.on("close",I));var c=!1;function v(){c||(c=!0,O.end())}function I(){c||(c=!0,typeof O.destroy=="function"&&O.destroy())}function T(M){if(x(),d.listenerCount(this,"error")===0)throw M}p.on("error",T),O.on("error",T);function x(){p.removeListener("data",s),O.removeListener("drain",m),p.removeListener("end",v),p.removeListener("close",I),p.removeListener("error",T),O.removeListener("error",T),p.removeListener("end",x),p.removeListener("close",x),O.removeListener("close",x)}return p.on("end",x),p.on("close",x),O.on("close",x),O.emit("pipe",p),O}},function(F,S){typeof Object.create=="function"?F.exports=function(d,D){d.super_=D,d.prototype=Object.create(D.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}})}:F.exports=function(d,D){d.super_=D;var E=function(){};E.prototype=D.prototype,d.prototype=new E,d.prototype.constructor=d}},function(F,S,w){(function(d){var D=function(){try{return w(11)}catch{}}();S=F.exports=w(14),S.Stream=D||S,S.Readable=S,S.Writable=w(22),S.Duplex=w(21),S.Transform=w(25),S.PassThrough=w(26),!d.browser&&d.env.READABLE_STREAM==="disable"&&D&&(F.exports=D)}).call(S,w(6))},function(F,S,w){(function(d){F.exports=B;var D=w(15),E=w(16),O;B.ReadableState=K,w(8).EventEmitter;var _=function(R,N){return R.listeners(N).length},p;(function(){try{p=w(11)}catch{}finally{p||(p=w(8).EventEmitter)}})();var s=w(2).Buffer,m=w(17),c=w(18);c.inherits=w(12);var v=w(19),I=void 0;v&&v.debuglog?I=v.debuglog("stream"):I=function(){};var T=w(20),x;c.inherits(B,p);function M(R,N,G){if(typeof R.prependListener=="function")return R.prependListener(N,G);!R._events||!R._events[N]?R.on(N,G):E(R._events[N])?R._events[N].unshift(G):R._events[N]=[G,R._events[N]]}function K(R,N){O=O||w(21),R=R||{},this.objectMode=!!R.objectMode,N instanceof O&&(this.objectMode=this.objectMode||!!R.readableObjectMode);var G=R.highWaterMark,nt=this.objectMode?16:16*1024;this.highWaterMark=G||G===0?G:nt,this.highWaterMark=~~this.highWaterMark,this.buffer=new T,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=R.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,R.encoding&&(x||(x=w(24).StringDecoder),this.decoder=new x(R.encoding),this.encoding=R.encoding)}function B(R){if(O=O||w(21),!(this instanceof B))return new B(R);this._readableState=new K(R,this),this.readable=!0,R&&typeof R.read=="function"&&(this._read=R.read),p.call(this)}B.prototype.push=function(R,N){var G=this._readableState;return!G.objectMode&&typeof R=="string"&&(N=N||G.defaultEncoding,N!==G.encoding&&(R=m.from(R,N),N="")),V(this,G,R,N,!1)},B.prototype.unshift=function(R){var N=this._readableState;return V(this,N,R,"",!0)},B.prototype.isPaused=function(){return this._readableState.flowing===!1};function V(R,N,G,nt,yt){var bt=z(N,G);if(bt)R.emit("error",bt);else if(G===null)N.reading=!1,Q(R,N);else if(N.objectMode||G&&G.length>0)if(N.ended&&!yt){var tt=new Error("stream.push() after EOF");R.emit("error",tt)}else if(N.endEmitted&&yt){var se=new Error("stream.unshift() after end event");R.emit("error",se)}else{var St;N.decoder&&!yt&&!nt&&(G=N.decoder.write(G),St=!N.objectMode&&G.length===0),yt||(N.reading=!1),St||(N.flowing&&N.length===0&&!N.sync?(R.emit("data",G),R.read(0)):(N.length+=N.objectMode?1:G.length,yt?N.buffer.unshift(G):N.buffer.push(G),N.needReadable&&st(R))),mt(R,N)}else yt||(N.reading=!1);return vt(N)}function vt(R){return!R.ended&&(R.needReadable||R.length<R.highWaterMark||R.length===0)}B.prototype.setEncoding=function(R){return x||(x=w(24).StringDecoder),this._readableState.decoder=new x(R),this._readableState.encoding=R,this};var $=8388608;function dt(R){return R>=$?R=$:(R--,R|=R>>>1,R|=R>>>2,R|=R>>>4,R|=R>>>8,R|=R>>>16,R++),R}function ft(R,N){return R<=0||N.length===0&&N.ended?0:N.objectMode?1:R!==R?N.flowing&&N.length?N.buffer.head.data.length:N.length:(R>N.highWaterMark&&(N.highWaterMark=dt(R)),R<=N.length?R:N.ended?N.length:(N.needReadable=!0,0))}B.prototype.read=function(R){I("read",R),R=parseInt(R,10);var N=this._readableState,G=R;if(R!==0&&(N.emittedReadable=!1),R===0&&N.needReadable&&(N.length>=N.highWaterMark||N.ended))return I("read: emitReadable",N.length,N.ended),N.length===0&&N.ended?Et(this):st(this),null;if(R=ft(R,N),R===0&&N.ended)return N.length===0&&Et(this),null;var nt=N.needReadable;I("need readable",nt),(N.length===0||N.length-R<N.highWaterMark)&&(nt=!0,I("length less than watermark",nt)),N.ended||N.reading?(nt=!1,I("reading or ended",nt)):nt&&(I("do read"),N.reading=!0,N.sync=!0,N.length===0&&(N.needReadable=!0),this._read(N.highWaterMark),N.sync=!1,N.reading||(R=ft(G,N)));var yt;return R>0?yt=H(R,N):yt=null,yt===null?(N.needReadable=!0,R=0):N.length-=R,N.length===0&&(N.ended||(N.needReadable=!0),G!==R&&N.ended&&Et(this)),yt!==null&&this.emit("data",yt),yt};function z(R,N){var G=null;return!s.isBuffer(N)&&typeof N!="string"&&N!==null&&N!==void 0&&!R.objectMode&&(G=new TypeError("Invalid non-string/buffer chunk")),G}function Q(R,N){if(!N.ended){if(N.decoder){var G=N.decoder.end();G&&G.length&&(N.buffer.push(G),N.length+=N.objectMode?1:G.length)}N.ended=!0,st(R)}}function st(R){var N=R._readableState;N.needReadable=!1,N.emittedReadable||(I("emitReadable",N.flowing),N.emittedReadable=!0,N.sync?D(Ft,R):Ft(R))}function Ft(R){I("emit readable"),R.emit("readable"),C(R)}function mt(R,N){N.readingMore||(N.readingMore=!0,D(Lt,R,N))}function Lt(R,N){for(var G=N.length;!N.reading&&!N.flowing&&!N.ended&&N.length<N.highWaterMark&&(I("maybeReadMore read 0"),R.read(0),G!==N.length);)G=N.length;N.readingMore=!1}B.prototype._read=function(R){this.emit("error",new Error("_read() is not implemented"))},B.prototype.pipe=function(R,N){var G=this,nt=this._readableState;switch(nt.pipesCount){case 0:nt.pipes=R;break;case 1:nt.pipes=[nt.pipes,R];break;default:nt.pipes.push(R);break}nt.pipesCount+=1,I("pipe count=%d opts=%j",nt.pipesCount,N);var yt=(!N||N.end!==!1)&&R!==d.stdout&&R!==d.stderr,bt=yt?se:de;nt.endEmitted?D(bt):G.once("end",bt),R.on("unpipe",tt);function tt(X){I("onunpipe"),X===G&&de()}function se(){I("onend"),R.end()}var St=Ot(G);R.on("drain",St);var le=!1;function de(){I("cleanup"),R.removeListener("close",l),R.removeListener("finish",k),R.removeListener("drain",St),R.removeListener("error",f),R.removeListener("unpipe",tt),G.removeListener("end",se),G.removeListener("end",de),G.removeListener("data",b),le=!0,nt.awaitDrain&&(!R._writableState||R._writableState.needDrain)&&St()}var xe=!1;G.on("data",b);function b(X){I("ondata"),xe=!1;var J=R.write(X);J===!1&&!xe&&((nt.pipesCount===1&&nt.pipes===R||nt.pipesCount>1&&Mt(nt.pipes,R)!==-1)&&!le&&(I("false write response, pause",G._readableState.awaitDrain),G._readableState.awaitDrain++,xe=!0),G.pause())}function f(X){I("onerror",X),j(),R.removeListener("error",f),_(R,"error")===0&&R.emit("error",X)}M(R,"error",f);function l(){R.removeListener("finish",k),j()}R.once("close",l);function k(){I("onfinish"),R.removeListener("close",l),j()}R.once("finish",k);function j(){I("unpipe"),G.unpipe(R)}return R.emit("pipe",G),nt.flowing||(I("pipe resume"),G.resume()),R};function Ot(R){return function(){var N=R._readableState;I("pipeOnDrain",N.awaitDrain),N.awaitDrain&&N.awaitDrain--,N.awaitDrain===0&&_(R,"data")&&(N.flowing=!0,C(R))}}B.prototype.unpipe=function(R){var N=this._readableState;if(N.pipesCount===0)return this;if(N.pipesCount===1)return R&&R!==N.pipes?this:(R||(R=N.pipes),N.pipes=null,N.pipesCount=0,N.flowing=!1,R&&R.emit("unpipe",this),this);if(!R){var G=N.pipes,nt=N.pipesCount;N.pipes=null,N.pipesCount=0,N.flowing=!1;for(var yt=0;yt<nt;yt++)G[yt].emit("unpipe",this);return this}var bt=Mt(N.pipes,R);return bt===-1?this:(N.pipes.splice(bt,1),N.pipesCount-=1,N.pipesCount===1&&(N.pipes=N.pipes[0]),R.emit("unpipe",this),this)},B.prototype.on=function(R,N){var G=p.prototype.on.call(this,R,N);if(R==="data")this._readableState.flowing!==!1&&this.resume();else if(R==="readable"){var nt=this._readableState;!nt.endEmitted&&!nt.readableListening&&(nt.readableListening=nt.needReadable=!0,nt.emittedReadable=!1,nt.reading?nt.length&&st(this):D(gt,this))}return G},B.prototype.addListener=B.prototype.on;function gt(R){I("readable nexttick read 0"),R.read(0)}B.prototype.resume=function(){var R=this._readableState;return R.flowing||(I("resume"),R.flowing=!0,Ht(this,R)),this};function Ht(R,N){N.resumeScheduled||(N.resumeScheduled=!0,D(P,R,N))}function P(R,N){N.reading||(I("resume read 0"),R.read(0)),N.resumeScheduled=!1,N.awaitDrain=0,R.emit("resume"),C(R),N.flowing&&!N.reading&&R.read(0)}B.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function C(R){var N=R._readableState;for(I("flow",N.flowing);N.flowing&&R.read()!==null;);}B.prototype.wrap=function(R){var N=this._readableState,G=!1,nt=this;R.on("end",function(){if(I("wrapped end"),N.decoder&&!N.ended){var tt=N.decoder.end();tt&&tt.length&&nt.push(tt)}nt.push(null)}),R.on("data",function(tt){if(I("wrapped data"),N.decoder&&(tt=N.decoder.write(tt)),!(N.objectMode&&tt==null)&&!(!N.objectMode&&(!tt||!tt.length))){var se=nt.push(tt);se||(G=!0,R.pause())}});for(var yt in R)this[yt]===void 0&&typeof R[yt]=="function"&&(this[yt]=function(tt){return function(){return R[tt].apply(R,arguments)}}(yt));var bt=["error","close","destroy","pause","resume"];return Ut(bt,function(tt){R.on(tt,nt.emit.bind(nt,tt))}),nt._read=function(tt){I("wrapped _read",tt),G&&(G=!1,R.resume())},nt},B._fromList=H;function H(R,N){if(N.length===0)return null;var G;return N.objectMode?G=N.buffer.shift():!R||R>=N.length?(N.decoder?G=N.buffer.join(""):N.buffer.length===1?G=N.buffer.head.data:G=N.buffer.concat(N.length),N.buffer.clear()):G=at(R,N.buffer,N.decoder),G}function at(R,N,G){var nt;return R<N.head.data.length?(nt=N.head.data.slice(0,R),N.head.data=N.head.data.slice(R)):R===N.head.data.length?nt=N.shift():nt=G?kt(R,N):_t(R,N),nt}function kt(R,N){var G=N.head,nt=1,yt=G.data;for(R-=yt.length;G=G.next;){var bt=G.data,tt=R>bt.length?bt.length:R;if(tt===bt.length?yt+=bt:yt+=bt.slice(0,R),R-=tt,R===0){tt===bt.length?(++nt,G.next?N.head=G.next:N.head=N.tail=null):(N.head=G,G.data=bt.slice(tt));break}++nt}return N.length-=nt,yt}function _t(R,N){var G=m.allocUnsafe(R),nt=N.head,yt=1;for(nt.data.copy(G),R-=nt.data.length;nt=nt.next;){var bt=nt.data,tt=R>bt.length?bt.length:R;if(bt.copy(G,G.length-R,0,tt),R-=tt,R===0){tt===bt.length?(++yt,nt.next?N.head=nt.next:N.head=N.tail=null):(N.head=nt,nt.data=bt.slice(tt));break}++yt}return N.length-=yt,G}function Et(R){var N=R._readableState;if(N.length>0)throw new Error('"endReadable()" called on non-empty stream');N.endEmitted||(N.ended=!0,D(Tt,N,R))}function Tt(R,N){!R.endEmitted&&R.length===0&&(R.endEmitted=!0,N.readable=!1,N.emit("end"))}function Ut(R,N){for(var G=0,nt=R.length;G<nt;G++)N(R[G],G)}function Mt(R,N){for(var G=0,nt=R.length;G<nt;G++)if(R[G]===N)return G;return-1}}).call(S,w(6))},function(F,S,w){(function(d){!d.version||d.version.indexOf("v0.")===0||d.version.indexOf("v1.")===0&&d.version.indexOf("v1.8.")!==0?F.exports=D:F.exports=d.nextTick;function D(E,O,_,p){if(typeof E!="function")throw new TypeError('"callback" argument must be a function');var s=arguments.length,m,c;switch(s){case 0:case 1:return d.nextTick(E);case 2:return d.nextTick(function(){E.call(null,O)});case 3:return d.nextTick(function(){E.call(null,O,_)});case 4:return d.nextTick(function(){E.call(null,O,_,p)});default:for(m=new Array(s-1),c=0;c<m.length;)m[c++]=arguments[c];return d.nextTick(function(){E.apply(null,m)})}}}).call(S,w(6))},function(F,S){var w={}.toString;F.exports=Array.isArray||function(d){return w.call(d)=="[object Array]"}},function(F,S,w){(function(d){var D=w(2),E=D.Buffer,O=D.SlowBuffer,_=D.kMaxLength||2147483647;S.alloc=function(s,m,c){if(typeof E.alloc=="function")return E.alloc(s,m,c);if(typeof c=="number")throw new TypeError("encoding must not be number");if(typeof s!="number")throw new TypeError("size must be a number");if(s>_)throw new RangeError("size is too large");var v=c,I=m;I===void 0&&(v=void 0,I=0);var T=new E(s);if(typeof I=="string")for(var x=new E(I,v),M=x.length,K=-1;++K<s;)T[K]=x[K%M];else T.fill(I);return T},S.allocUnsafe=function(s){if(typeof E.allocUnsafe=="function")return E.allocUnsafe(s);if(typeof s!="number")throw new TypeError("size must be a number");if(s>_)throw new RangeError("size is too large");return new E(s)},S.from=function(s,m,c){if(typeof E.from=="function"&&(!d.Uint8Array||Uint8Array.from!==E.from))return E.from(s,m,c);if(typeof s=="number")throw new TypeError('"value" argument must not be a number');if(typeof s=="string")return new E(s,m);if(typeof ArrayBuffer<"u"&&s instanceof ArrayBuffer){var v=m;if(arguments.length===1)return new E(s);typeof v>"u"&&(v=0);var I=c;if(typeof I>"u"&&(I=s.byteLength-v),v>=s.byteLength)throw new RangeError("'offset' is out of bounds");if(I>s.byteLength-v)throw new RangeError("'length' is out of bounds");return new E(s.slice(v,v+I))}if(E.isBuffer(s)){var T=new E(s.length);return s.copy(T,0,0,s.length),T}if(s){if(Array.isArray(s)||typeof ArrayBuffer<"u"&&s.buffer instanceof ArrayBuffer||"length"in s)return new E(s);if(s.type==="Buffer"&&Array.isArray(s.data))return new E(s.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},S.allocUnsafeSlow=function(s){if(typeof E.allocUnsafeSlow=="function")return E.allocUnsafeSlow(s);if(typeof s!="number")throw new TypeError("size must be a number");if(s>=_)throw new RangeError("size is too large");return new O(s)}}).call(S,function(){return this}())},function(F,S,w){(function(d){function D(V){return Array.isArray?Array.isArray(V):B(V)==="[object Array]"}S.isArray=D;function E(V){return typeof V=="boolean"}S.isBoolean=E;function O(V){return V===null}S.isNull=O;function _(V){return V==null}S.isNullOrUndefined=_;function p(V){return typeof V=="number"}S.isNumber=p;function s(V){return typeof V=="string"}S.isString=s;function m(V){return typeof V=="symbol"}S.isSymbol=m;function c(V){return V===void 0}S.isUndefined=c;function v(V){return B(V)==="[object RegExp]"}S.isRegExp=v;function I(V){return typeof V=="object"&&V!==null}S.isObject=I;function T(V){return B(V)==="[object Date]"}S.isDate=T;function x(V){return B(V)==="[object Error]"||V instanceof Error}S.isError=x;function M(V){return typeof V=="function"}S.isFunction=M;function K(V){return V===null||typeof V=="boolean"||typeof V=="number"||typeof V=="string"||typeof V=="symbol"||typeof V>"u"}S.isPrimitive=K,S.isBuffer=d.isBuffer;function B(V){return Object.prototype.toString.call(V)}}).call(S,w(1))},function(F,S){},function(F,S,w){w(2).Buffer;var d=w(17);F.exports=D;function D(){this.head=null,this.tail=null,this.length=0}D.prototype.push=function(E){var O={data:E,next:null};this.length>0?this.tail.next=O:this.head=O,this.tail=O,++this.length},D.prototype.unshift=function(E){var O={data:E,next:this.head};this.length===0&&(this.tail=O),this.head=O,++this.length},D.prototype.shift=function(){if(this.length!==0){var E=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,E}},D.prototype.clear=function(){this.head=this.tail=null,this.length=0},D.prototype.join=function(E){if(this.length===0)return"";for(var O=this.head,_=""+O.data;O=O.next;)_+=E+O.data;return _},D.prototype.concat=function(E){if(this.length===0)return d.alloc(0);if(this.length===1)return this.head.data;for(var O=d.allocUnsafe(E>>>0),_=this.head,p=0;_;)_.data.copy(O,p),p+=_.data.length,_=_.next;return O}},function(F,S,w){var d=Object.keys||function(T){var x=[];for(var M in T)x.push(M);return x};F.exports=c;var D=w(15),E=w(18);E.inherits=w(12);var O=w(14),_=w(22);E.inherits(c,O);for(var p=d(_.prototype),s=0;s<p.length;s++){var m=p[s];c.prototype[m]||(c.prototype[m]=_.prototype[m])}function c(T){if(!(this instanceof c))return new c(T);O.call(this,T),_.call(this,T),T&&T.readable===!1&&(this.readable=!1),T&&T.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,T&&T.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",v)}function v(){this.allowHalfOpen||this._writableState.ended||D(I,this)}function I(T){T.end()}},function(F,S,w){(function(d){F.exports=M;var D=w(15),E=!d.browser&&["v0.10","v0.9."].indexOf(d.version.slice(0,5))>-1?setImmediate:D,O;M.WritableState=T;var _=w(18);_.inherits=w(12);var p={deprecate:w(23)},s;(function(){try{s=w(11)}catch{}finally{s||(s=w(8).EventEmitter)}})();var m=w(2).Buffer,c=w(17);_.inherits(M,s);function v(){}function I(P,C,H){this.chunk=P,this.encoding=C,this.callback=H,this.next=null}function T(P,C){O=O||w(21),P=P||{},this.objectMode=!!P.objectMode,C instanceof O&&(this.objectMode=this.objectMode||!!P.writableObjectMode);var H=P.highWaterMark,at=this.objectMode?16:16*1024;this.highWaterMark=H||H===0?H:at,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var kt=P.decodeStrings===!1;this.decodeStrings=!kt,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(_t){z(C,_t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Ht(this)}T.prototype.getBuffer=function(){for(var C=this.bufferedRequest,H=[];C;)H.push(C),C=C.next;return H},function(){try{Object.defineProperty(T.prototype,"buffer",{get:p.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch{}}();var x;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(x=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(P){return x.call(this,P)?!0:P&&P._writableState instanceof T}})):x=function(P){return P instanceof this};function M(P){if(O=O||w(21),!x.call(M,this)&&!(this instanceof O))return new M(P);this._writableState=new T(P,this),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev)),s.call(this)}M.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function K(P,C){var H=new Error("write after end");P.emit("error",H),D(C,H)}function B(P,C,H,at){var kt=!0,_t=!1;return H===null?_t=new TypeError("May not write null values to stream"):typeof H!="string"&&H!==void 0&&!C.objectMode&&(_t=new TypeError("Invalid non-string/buffer chunk")),_t&&(P.emit("error",_t),D(at,_t),kt=!1),kt}M.prototype.write=function(P,C,H){var at=this._writableState,kt=!1,_t=m.isBuffer(P);return typeof C=="function"&&(H=C,C=null),_t?C="buffer":C||(C=at.defaultEncoding),typeof H!="function"&&(H=v),at.ended?K(this,H):(_t||B(this,at,P,H))&&(at.pendingcb++,kt=vt(this,at,_t,P,C,H)),kt},M.prototype.cork=function(){var P=this._writableState;P.corked++},M.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,!P.writing&&!P.corked&&!P.finished&&!P.bufferProcessing&&P.bufferedRequest&&Ft(this,P))},M.prototype.setDefaultEncoding=function(C){if(typeof C=="string"&&(C=C.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((C+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+C);return this._writableState.defaultEncoding=C,this};function V(P,C,H){return!P.objectMode&&P.decodeStrings!==!1&&typeof C=="string"&&(C=c.from(C,H)),C}function vt(P,C,H,at,kt,_t){H||(at=V(C,at,kt),m.isBuffer(at)&&(kt="buffer"));var Et=C.objectMode?1:at.length;C.length+=Et;var Tt=C.length<C.highWaterMark;if(Tt||(C.needDrain=!0),C.writing||C.corked){var Ut=C.lastBufferedRequest;C.lastBufferedRequest=new I(at,kt,_t),Ut?Ut.next=C.lastBufferedRequest:C.bufferedRequest=C.lastBufferedRequest,C.bufferedRequestCount+=1}else $(P,C,!1,Et,at,kt,_t);return Tt}function $(P,C,H,at,kt,_t,Et){C.writelen=at,C.writecb=Et,C.writing=!0,C.sync=!0,H?P._writev(kt,C.onwrite):P._write(kt,_t,C.onwrite),C.sync=!1}function dt(P,C,H,at,kt){--C.pendingcb,H?D(kt,at):kt(at),P._writableState.errorEmitted=!0,P.emit("error",at)}function ft(P){P.writing=!1,P.writecb=null,P.length-=P.writelen,P.writelen=0}function z(P,C){var H=P._writableState,at=H.sync,kt=H.writecb;if(ft(H),C)dt(P,H,at,C,kt);else{var _t=mt(H);!_t&&!H.corked&&!H.bufferProcessing&&H.bufferedRequest&&Ft(P,H),at?E(Q,P,H,_t,kt):Q(P,H,_t,kt)}}function Q(P,C,H,at){H||st(P,C),C.pendingcb--,at(),Ot(P,C)}function st(P,C){C.length===0&&C.needDrain&&(C.needDrain=!1,P.emit("drain"))}function Ft(P,C){C.bufferProcessing=!0;var H=C.bufferedRequest;if(P._writev&&H&&H.next){var at=C.bufferedRequestCount,kt=new Array(at),_t=C.corkedRequestsFree;_t.entry=H;for(var Et=0;H;)kt[Et]=H,H=H.next,Et+=1;$(P,C,!0,C.length,kt,"",_t.finish),C.pendingcb++,C.lastBufferedRequest=null,_t.next?(C.corkedRequestsFree=_t.next,_t.next=null):C.corkedRequestsFree=new Ht(C)}else{for(;H;){var Tt=H.chunk,Ut=H.encoding,Mt=H.callback,R=C.objectMode?1:Tt.length;if($(P,C,!1,R,Tt,Ut,Mt),H=H.next,C.writing)break}H===null&&(C.lastBufferedRequest=null)}C.bufferedRequestCount=0,C.bufferedRequest=H,C.bufferProcessing=!1}M.prototype._write=function(P,C,H){H(new Error("_write() is not implemented"))},M.prototype._writev=null,M.prototype.end=function(P,C,H){var at=this._writableState;typeof P=="function"?(H=P,P=null,C=null):typeof C=="function"&&(H=C,C=null),P!=null&&this.write(P,C),at.corked&&(at.corked=1,this.uncork()),!at.ending&&!at.finished&&gt(this,at,H)};function mt(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function Lt(P,C){C.prefinished||(C.prefinished=!0,P.emit("prefinish"))}function Ot(P,C){var H=mt(C);return H&&(C.pendingcb===0?(Lt(P,C),C.finished=!0,P.emit("finish")):Lt(P,C)),H}function gt(P,C,H){C.ending=!0,Ot(P,C),H&&(C.finished?D(H):P.once("finish",H)),C.ended=!0,P.writable=!1}function Ht(P){var C=this;this.next=null,this.entry=null,this.finish=function(H){var at=C.entry;for(C.entry=null;at;){var kt=at.callback;P.pendingcb--,kt(H),at=at.next}P.corkedRequestsFree?P.corkedRequestsFree.next=C:P.corkedRequestsFree=C}}}).call(S,w(6))},function(F,S){(function(w){F.exports=d;function d(E,O){if(D("noDeprecation"))return E;var _=!1;function p(){if(!_){if(D("throwDeprecation"))throw new Error(O);D("traceDeprecation")?console.trace(O):console.warn(O),_=!0}return E.apply(this,arguments)}return p}function D(E){try{if(!w.localStorage)return!1}catch{return!1}var O=w.localStorage[E];return O==null?!1:String(O).toLowerCase()==="true"}}).call(S,function(){return this}())},function(F,S,w){var d=w(2).Buffer,D=d.isEncoding||function(m){switch(m&&m.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function E(m){if(m&&!D(m))throw new Error("Unknown encoding: "+m)}var O=S.StringDecoder=function(m){switch(this.encoding=(m||"utf8").toLowerCase().replace(/[-_]/,""),E(m),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=p;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:this.write=_;return}this.charBuffer=new d(6),this.charReceived=0,this.charLength=0};O.prototype.write=function(m){for(var c="";this.charLength;){var v=m.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:m.length;if(m.copy(this.charBuffer,this.charReceived,0,v),this.charReceived+=v,this.charReceived<this.charLength)return"";m=m.slice(v,m.length),c=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var T=c.charCodeAt(c.length-1);if(T>=55296&&T<=56319){this.charLength+=this.surrogateSize,c="";continue}if(this.charReceived=this.charLength=0,m.length===0)return c;break}this.detectIncompleteChar(m);var I=m.length;this.charLength&&(m.copy(this.charBuffer,0,m.length-this.charReceived,I),I-=this.charReceived),c+=m.toString(this.encoding,0,I);var I=c.length-1,T=c.charCodeAt(I);if(T>=55296&&T<=56319){var x=this.surrogateSize;return this.charLength+=x,this.charReceived+=x,this.charBuffer.copy(this.charBuffer,x,0,x),m.copy(this.charBuffer,0,0,x),c.substring(0,I)}return c},O.prototype.detectIncompleteChar=function(m){for(var c=m.length>=3?3:m.length;c>0;c--){var v=m[m.length-c];if(c==1&&v>>5==6){this.charLength=2;break}if(c<=2&&v>>4==14){this.charLength=3;break}if(c<=3&&v>>3==30){this.charLength=4;break}}this.charReceived=c},O.prototype.end=function(m){var c="";if(m&&m.length&&(c=this.write(m)),this.charReceived){var v=this.charReceived,I=this.charBuffer,T=this.encoding;c+=I.slice(0,v).toString(T)}return c};function _(m){return m.toString(this.encoding)}function p(m){this.charReceived=m.length%2,this.charLength=this.charReceived?2:0}function s(m){this.charReceived=m.length%3,this.charLength=this.charReceived?3:0}},function(F,S,w){F.exports=_;var d=w(21),D=w(18);D.inherits=w(12),D.inherits(_,d);function E(s){this.afterTransform=function(m,c){return O(s,m,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function O(s,m,c){var v=s._transformState;v.transforming=!1;var I=v.writecb;if(!I)return s.emit("error",new Error("no writecb in Transform class"));v.writechunk=null,v.writecb=null,c!=null&&s.push(c),I(m);var T=s._readableState;T.reading=!1,(T.needReadable||T.length<T.highWaterMark)&&s._read(T.highWaterMark)}function _(s){if(!(this instanceof _))return new _(s);d.call(this,s),this._transformState=new E(this);var m=this;this._readableState.needReadable=!0,this._readableState.sync=!1,s&&(typeof s.transform=="function"&&(this._transform=s.transform),typeof s.flush=="function"&&(this._flush=s.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(c,v){p(m,c,v)}):p(m)})}_.prototype.push=function(s,m){return this._transformState.needTransform=!1,d.prototype.push.call(this,s,m)},_.prototype._transform=function(s,m,c){throw new Error("_transform() is not implemented")},_.prototype._write=function(s,m,c){var v=this._transformState;if(v.writecb=c,v.writechunk=s,v.writeencoding=m,!v.transforming){var I=this._readableState;(v.needTransform||I.needReadable||I.length<I.highWaterMark)&&this._read(I.highWaterMark)}},_.prototype._read=function(s){var m=this._transformState;m.writechunk!==null&&m.writecb&&!m.transforming?(m.transforming=!0,this._transform(m.writechunk,m.writeencoding,m.afterTransform)):m.needTransform=!0};function p(s,m,c){if(m)return s.emit("error",m);c!=null&&s.push(c);var v=s._writableState,I=s._transformState;if(v.length)throw new Error("Calling transform done when ws.length != 0");if(I.transforming)throw new Error("Calling transform done when still transforming");return s.push(null)}},function(F,S,w){F.exports=E;var d=w(25),D=w(18);D.inherits=w(12),D.inherits(E,d);function E(O){if(!(this instanceof E))return new E(O);d.call(this,O)}E.prototype._transform=function(O,_,p){p(null,O)}},function(F,S,w){F.exports=w(22)},function(F,S,w){F.exports=w(21)},function(F,S,w){F.exports=w(25)},function(F,S,w){F.exports=w(26)},function(F,S,w){var d=w(32),D=w(33),E=w(38),O=w(39),_=w(40),p=w(41),s=w(42),m=Object.prototype.toString;function c(T){if(!(this instanceof c))return new c(T);this.options=D.assign({chunkSize:16384,windowBits:0,to:""},T||{});var x=this.options;x.raw&&x.windowBits>=0&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),x.windowBits>=0&&x.windowBits<16&&!(T&&T.windowBits)&&(x.windowBits+=32),x.windowBits>15&&x.windowBits<48&&(x.windowBits&15||(x.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var M=d.inflateInit2(this.strm,x.windowBits);if(M!==O.Z_OK)throw new Error(_[M]);this.header=new s,d.inflateGetHeader(this.strm,this.header)}c.prototype.push=function(T,x){var M=this.strm,K=this.options.chunkSize,B=this.options.dictionary,V,vt,$,dt,ft,z,Q=!1;if(this.ended)return!1;vt=x===~~x?x:x===!0?O.Z_FINISH:O.Z_NO_FLUSH,typeof T=="string"?M.input=E.binstring2buf(T):m.call(T)==="[object ArrayBuffer]"?M.input=new Uint8Array(T):M.input=T,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new D.Buf8(K),M.next_out=0,M.avail_out=K),V=d.inflate(M,O.Z_NO_FLUSH),V===O.Z_NEED_DICT&&B&&(typeof B=="string"?z=E.string2buf(B):m.call(B)==="[object ArrayBuffer]"?z=new Uint8Array(B):z=B,V=d.inflateSetDictionary(this.strm,z)),V===O.Z_BUF_ERROR&&Q===!0&&(V=O.Z_OK,Q=!1),V!==O.Z_STREAM_END&&V!==O.Z_OK)return this.onEnd(V),this.ended=!0,!1;M.next_out&&(M.avail_out===0||V===O.Z_STREAM_END||M.avail_in===0&&(vt===O.Z_FINISH||vt===O.Z_SYNC_FLUSH))&&(this.options.to==="string"?($=E.utf8border(M.output,M.next_out),dt=M.next_out-$,ft=E.buf2string(M.output,$),M.next_out=dt,M.avail_out=K-dt,dt&&D.arraySet(M.output,M.output,$,dt,0),this.onData(ft)):this.onData(D.shrinkBuf(M.output,M.next_out))),M.avail_in===0&&M.avail_out===0&&(Q=!0)}while((M.avail_in>0||M.avail_out===0)&&V!==O.Z_STREAM_END);return V===O.Z_STREAM_END&&(vt=O.Z_FINISH),vt===O.Z_FINISH?(V=d.inflateEnd(this.strm),this.onEnd(V),this.ended=!0,V===O.Z_OK):(vt===O.Z_SYNC_FLUSH&&(this.onEnd(O.Z_OK),M.avail_out=0),!0)},c.prototype.onData=function(T){this.chunks.push(T)},c.prototype.onEnd=function(T){T===O.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=D.flattenChunks(this.chunks)),this.chunks=[],this.err=T,this.msg=this.strm.msg};function v(T,x){var M=new c(x);if(M.push(T,!0),M.err)throw M.msg||_[M.err];return M.result}function I(T,x){return x=x||{},x.raw=!0,v(T,x)}S.Inflate=c,S.inflate=v,S.inflateRaw=I,S.ungzip=v},function(F,S,w){var d=w(33),D=w(34),E=w(35),O=w(36),_=w(37),p=0,s=1,m=2,c=4,v=5,I=6,T=0,x=1,M=2,K=-2,B=-3,V=-4,vt=-5,$=8,dt=1,ft=2,z=3,Q=4,st=5,Ft=6,mt=7,Lt=8,Ot=9,gt=10,Ht=11,P=12,C=13,H=14,at=15,kt=16,_t=17,Et=18,Tt=19,Ut=20,Mt=21,R=22,N=23,G=24,nt=25,yt=26,bt=27,tt=28,se=29,St=30,le=31,de=32,xe=852,b=592,f=15,l=f;function k(W){return(W>>>24&255)+(W>>>8&65280)+((W&65280)<<8)+((W&255)<<24)}function j(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function X(W){var ot;return!W||!W.state?K:(ot=W.state,W.total_in=W.total_out=ot.total=0,W.msg="",ot.wrap&&(W.adler=ot.wrap&1),ot.mode=dt,ot.last=0,ot.havedict=0,ot.dmax=32768,ot.head=null,ot.hold=0,ot.bits=0,ot.lencode=ot.lendyn=new d.Buf32(xe),ot.distcode=ot.distdyn=new d.Buf32(b),ot.sane=1,ot.back=-1,T)}function J(W){var ot;return!W||!W.state?K:(ot=W.state,ot.wsize=0,ot.whave=0,ot.wnext=0,X(W))}function Nt(W,ot){var g,lt;return!W||!W.state||(lt=W.state,ot<0?(g=0,ot=-ot):(g=(ot>>4)+1,ot<48&&(ot&=15)),ot&&(ot<8||ot>15))?K:(lt.window!==null&&lt.wbits!==ot&&(lt.window=null),lt.wrap=g,lt.wbits=ot,J(W))}function xt(W,ot){var g,lt;return W?(lt=new j,W.state=lt,lt.window=null,g=Nt(W,ot),g!==T&&(W.state=null),g):K}function Pt(W){return xt(W,l)}var Jt=!0,Ct,Ce;function lr(W){if(Jt){var ot;for(Ct=new d.Buf32(512),Ce=new d.Buf32(32),ot=0;ot<144;)W.lens[ot++]=8;for(;ot<256;)W.lens[ot++]=9;for(;ot<280;)W.lens[ot++]=7;for(;ot<288;)W.lens[ot++]=8;for(_(s,W.lens,0,288,Ct,0,W.work,{bits:9}),ot=0;ot<32;)W.lens[ot++]=5;_(m,W.lens,0,32,Ce,0,W.work,{bits:5}),Jt=!1}W.lencode=Ct,W.lenbits=9,W.distcode=Ce,W.distbits=5}function tr(W,ot,g,lt){var jt,it=W.state;return it.window===null&&(it.wsize=1<<it.wbits,it.wnext=0,it.whave=0,it.window=new d.Buf8(it.wsize)),lt>=it.wsize?(d.arraySet(it.window,ot,g-it.wsize,it.wsize,0),it.wnext=0,it.whave=it.wsize):(jt=it.wsize-it.wnext,jt>lt&&(jt=lt),d.arraySet(it.window,ot,g-lt,jt,it.wnext),lt-=jt,lt?(d.arraySet(it.window,ot,g-lt,lt,0),it.wnext=lt,it.whave=it.wsize):(it.wnext+=jt,it.wnext===it.wsize&&(it.wnext=0),it.whave<it.wsize&&(it.whave+=jt))),0}function er(W,ot){var g,lt,jt,it,ge,ut,Qt,q,Y,hr,Bt,pt,rr,We,Xt=0,Dt,ue,ye,ce,pr,nr,Gt,me,re=new d.Buf8(4),Me,Re,xr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!W||!W.state||!W.output||!W.input&&W.avail_in!==0)return K;g=W.state,g.mode===P&&(g.mode=C),ge=W.next_out,jt=W.output,Qt=W.avail_out,it=W.next_in,lt=W.input,ut=W.avail_in,q=g.hold,Y=g.bits,hr=ut,Bt=Qt,me=T;t:for(;;)switch(g.mode){case dt:if(g.wrap===0){g.mode=C;break}for(;Y<16;){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}if(g.wrap&2&&q===35615){g.check=0,re[0]=q&255,re[1]=q>>>8&255,g.check=E(g.check,re,2,0),q=0,Y=0,g.mode=ft;break}if(g.flags=0,g.head&&(g.head.done=!1),!(g.wrap&1)||(((q&255)<<8)+(q>>8))%31){W.msg="incorrect header check",g.mode=St;break}if((q&15)!==$){W.msg="unknown compression method",g.mode=St;break}if(q>>>=4,Y-=4,Gt=(q&15)+8,g.wbits===0)g.wbits=Gt;else if(Gt>g.wbits){W.msg="invalid window size",g.mode=St;break}g.dmax=1<<Gt,W.adler=g.check=1,g.mode=q&512?gt:P,q=0,Y=0;break;case ft:for(;Y<16;){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}if(g.flags=q,(g.flags&255)!==$){W.msg="unknown compression method",g.mode=St;break}if(g.flags&57344){W.msg="unknown header flags set",g.mode=St;break}g.head&&(g.head.text=q>>8&1),g.flags&512&&(re[0]=q&255,re[1]=q>>>8&255,g.check=E(g.check,re,2,0)),q=0,Y=0,g.mode=z;case z:for(;Y<32;){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}g.head&&(g.head.time=q),g.flags&512&&(re[0]=q&255,re[1]=q>>>8&255,re[2]=q>>>16&255,re[3]=q>>>24&255,g.check=E(g.check,re,4,0)),q=0,Y=0,g.mode=Q;case Q:for(;Y<16;){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}g.head&&(g.head.xflags=q&255,g.head.os=q>>8),g.flags&512&&(re[0]=q&255,re[1]=q>>>8&255,g.check=E(g.check,re,2,0)),q=0,Y=0,g.mode=st;case st:if(g.flags&1024){for(;Y<16;){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}g.length=q,g.head&&(g.head.extra_len=q),g.flags&512&&(re[0]=q&255,re[1]=q>>>8&255,g.check=E(g.check,re,2,0)),q=0,Y=0}else g.head&&(g.head.extra=null);g.mode=Ft;case Ft:if(g.flags&1024&&(pt=g.length,pt>ut&&(pt=ut),pt&&(g.head&&(Gt=g.head.extra_len-g.length,g.head.extra||(g.head.extra=new Array(g.head.extra_len)),d.arraySet(g.head.extra,lt,it,pt,Gt)),g.flags&512&&(g.check=E(g.check,lt,pt,it)),ut-=pt,it+=pt,g.length-=pt),g.length))break t;g.length=0,g.mode=mt;case mt:if(g.flags&2048){if(ut===0)break t;pt=0;do Gt=lt[it+pt++],g.head&&Gt&&g.length<65536&&(g.head.name+=String.fromCharCode(Gt));while(Gt&&pt<ut);if(g.flags&512&&(g.check=E(g.check,lt,pt,it)),ut-=pt,it+=pt,Gt)break t}else g.head&&(g.head.name=null);g.length=0,g.mode=Lt;case Lt:if(g.flags&4096){if(ut===0)break t;pt=0;do Gt=lt[it+pt++],g.head&&Gt&&g.length<65536&&(g.head.comment+=String.fromCharCode(Gt));while(Gt&&pt<ut);if(g.flags&512&&(g.check=E(g.check,lt,pt,it)),ut-=pt,it+=pt,Gt)break t}else g.head&&(g.head.comment=null);g.mode=Ot;case Ot:if(g.flags&512){for(;Y<16;){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}if(q!==(g.check&65535)){W.msg="header crc mismatch",g.mode=St;break}q=0,Y=0}g.head&&(g.head.hcrc=g.flags>>9&1,g.head.done=!0),W.adler=g.check=0,g.mode=P;break;case gt:for(;Y<32;){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}W.adler=g.check=k(q),q=0,Y=0,g.mode=Ht;case Ht:if(g.havedict===0)return W.next_out=ge,W.avail_out=Qt,W.next_in=it,W.avail_in=ut,g.hold=q,g.bits=Y,M;W.adler=g.check=1,g.mode=P;case P:if(ot===v||ot===I)break t;case C:if(g.last){q>>>=Y&7,Y-=Y&7,g.mode=bt;break}for(;Y<3;){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}switch(g.last=q&1,q>>>=1,Y-=1,q&3){case 0:g.mode=H;break;case 1:if(lr(g),g.mode=Ut,ot===I){q>>>=2,Y-=2;break t}break;case 2:g.mode=_t;break;case 3:W.msg="invalid block type",g.mode=St}q>>>=2,Y-=2;break;case H:for(q>>>=Y&7,Y-=Y&7;Y<32;){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}if((q&65535)!==(q>>>16^65535)){W.msg="invalid stored block lengths",g.mode=St;break}if(g.length=q&65535,q=0,Y=0,g.mode=at,ot===I)break t;case at:g.mode=kt;case kt:if(pt=g.length,pt){if(pt>ut&&(pt=ut),pt>Qt&&(pt=Qt),pt===0)break t;d.arraySet(jt,lt,it,pt,ge),ut-=pt,it+=pt,Qt-=pt,ge+=pt,g.length-=pt;break}g.mode=P;break;case _t:for(;Y<14;){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}if(g.nlen=(q&31)+257,q>>>=5,Y-=5,g.ndist=(q&31)+1,q>>>=5,Y-=5,g.ncode=(q&15)+4,q>>>=4,Y-=4,g.nlen>286||g.ndist>30){W.msg="too many length or distance symbols",g.mode=St;break}g.have=0,g.mode=Et;case Et:for(;g.have<g.ncode;){for(;Y<3;){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}g.lens[xr[g.have++]]=q&7,q>>>=3,Y-=3}for(;g.have<19;)g.lens[xr[g.have++]]=0;if(g.lencode=g.lendyn,g.lenbits=7,Me={bits:g.lenbits},me=_(p,g.lens,0,19,g.lencode,0,g.work,Me),g.lenbits=Me.bits,me){W.msg="invalid code lengths set",g.mode=St;break}g.have=0,g.mode=Tt;case Tt:for(;g.have<g.nlen+g.ndist;){for(;Xt=g.lencode[q&(1<<g.lenbits)-1],Dt=Xt>>>24,ue=Xt>>>16&255,ye=Xt&65535,!(Dt<=Y);){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}if(ye<16)q>>>=Dt,Y-=Dt,g.lens[g.have++]=ye;else{if(ye===16){for(Re=Dt+2;Y<Re;){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}if(q>>>=Dt,Y-=Dt,g.have===0){W.msg="invalid bit length repeat",g.mode=St;break}Gt=g.lens[g.have-1],pt=3+(q&3),q>>>=2,Y-=2}else if(ye===17){for(Re=Dt+3;Y<Re;){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}q>>>=Dt,Y-=Dt,Gt=0,pt=3+(q&7),q>>>=3,Y-=3}else{for(Re=Dt+7;Y<Re;){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}q>>>=Dt,Y-=Dt,Gt=0,pt=11+(q&127),q>>>=7,Y-=7}if(g.have+pt>g.nlen+g.ndist){W.msg="invalid bit length repeat",g.mode=St;break}for(;pt--;)g.lens[g.have++]=Gt}}if(g.mode===St)break;if(g.lens[256]===0){W.msg="invalid code -- missing end-of-block",g.mode=St;break}if(g.lenbits=9,Me={bits:g.lenbits},me=_(s,g.lens,0,g.nlen,g.lencode,0,g.work,Me),g.lenbits=Me.bits,me){W.msg="invalid literal/lengths set",g.mode=St;break}if(g.distbits=6,g.distcode=g.distdyn,Me={bits:g.distbits},me=_(m,g.lens,g.nlen,g.ndist,g.distcode,0,g.work,Me),g.distbits=Me.bits,me){W.msg="invalid distances set",g.mode=St;break}if(g.mode=Ut,ot===I)break t;case Ut:g.mode=Mt;case Mt:if(ut>=6&&Qt>=258){W.next_out=ge,W.avail_out=Qt,W.next_in=it,W.avail_in=ut,g.hold=q,g.bits=Y,O(W,Bt),ge=W.next_out,jt=W.output,Qt=W.avail_out,it=W.next_in,lt=W.input,ut=W.avail_in,q=g.hold,Y=g.bits,g.mode===P&&(g.back=-1);break}for(g.back=0;Xt=g.lencode[q&(1<<g.lenbits)-1],Dt=Xt>>>24,ue=Xt>>>16&255,ye=Xt&65535,!(Dt<=Y);){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}if(ue&&!(ue&240)){for(ce=Dt,pr=ue,nr=ye;Xt=g.lencode[nr+((q&(1<<ce+pr)-1)>>ce)],Dt=Xt>>>24,ue=Xt>>>16&255,ye=Xt&65535,!(ce+Dt<=Y);){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}q>>>=ce,Y-=ce,g.back+=ce}if(q>>>=Dt,Y-=Dt,g.back+=Dt,g.length=ye,ue===0){g.mode=yt;break}if(ue&32){g.back=-1,g.mode=P;break}if(ue&64){W.msg="invalid literal/length code",g.mode=St;break}g.extra=ue&15,g.mode=R;case R:if(g.extra){for(Re=g.extra;Y<Re;){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}g.length+=q&(1<<g.extra)-1,q>>>=g.extra,Y-=g.extra,g.back+=g.extra}g.was=g.length,g.mode=N;case N:for(;Xt=g.distcode[q&(1<<g.distbits)-1],Dt=Xt>>>24,ue=Xt>>>16&255,ye=Xt&65535,!(Dt<=Y);){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}if(!(ue&240)){for(ce=Dt,pr=ue,nr=ye;Xt=g.distcode[nr+((q&(1<<ce+pr)-1)>>ce)],Dt=Xt>>>24,ue=Xt>>>16&255,ye=Xt&65535,!(ce+Dt<=Y);){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}q>>>=ce,Y-=ce,g.back+=ce}if(q>>>=Dt,Y-=Dt,g.back+=Dt,ue&64){W.msg="invalid distance code",g.mode=St;break}g.offset=ye,g.extra=ue&15,g.mode=G;case G:if(g.extra){for(Re=g.extra;Y<Re;){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}g.offset+=q&(1<<g.extra)-1,q>>>=g.extra,Y-=g.extra,g.back+=g.extra}if(g.offset>g.dmax){W.msg="invalid distance too far back",g.mode=St;break}g.mode=nt;case nt:if(Qt===0)break t;if(pt=Bt-Qt,g.offset>pt){if(pt=g.offset-pt,pt>g.whave&&g.sane){W.msg="invalid distance too far back",g.mode=St;break}pt>g.wnext?(pt-=g.wnext,rr=g.wsize-pt):rr=g.wnext-pt,pt>g.length&&(pt=g.length),We=g.window}else We=jt,rr=ge-g.offset,pt=g.length;pt>Qt&&(pt=Qt),Qt-=pt,g.length-=pt;do jt[ge++]=We[rr++];while(--pt);g.length===0&&(g.mode=Mt);break;case yt:if(Qt===0)break t;jt[ge++]=g.length,Qt--,g.mode=Mt;break;case bt:if(g.wrap){for(;Y<32;){if(ut===0)break t;ut--,q|=lt[it++]<<Y,Y+=8}if(Bt-=Qt,W.total_out+=Bt,g.total+=Bt,Bt&&(W.adler=g.check=g.flags?E(g.check,jt,Bt,ge-Bt):D(g.check,jt,Bt,ge-Bt)),Bt=Qt,(g.flags?q:k(q))!==g.check){W.msg="incorrect data check",g.mode=St;break}q=0,Y=0}g.mode=tt;case tt:if(g.wrap&&g.flags){for(;Y<32;){if(ut===0)break t;ut--,q+=lt[it++]<<Y,Y+=8}if(q!==(g.total&4294967295)){W.msg="incorrect length check",g.mode=St;break}q=0,Y=0}g.mode=se;case se:me=x;break t;case St:me=B;break t;case le:return V;case de:default:return K}return W.next_out=ge,W.avail_out=Qt,W.next_in=it,W.avail_in=ut,g.hold=q,g.bits=Y,(g.wsize||Bt!==W.avail_out&&g.mode<St&&(g.mode<bt||ot!==c))&&tr(W,W.output,W.next_out,Bt-W.avail_out),hr-=W.avail_in,Bt-=W.avail_out,W.total_in+=hr,W.total_out+=Bt,g.total+=Bt,g.wrap&&Bt&&(W.adler=g.check=g.flags?E(g.check,jt,Bt,W.next_out-Bt):D(g.check,jt,Bt,W.next_out-Bt)),W.data_type=g.bits+(g.last?64:0)+(g.mode===P?128:0)+(g.mode===Ut||g.mode===at?256:0),(hr===0&&Bt===0||ot===c)&&me===T&&(me=vt),me}function tn(W){if(!W||!W.state)return K;var ot=W.state;return ot.window&&(ot.window=null),W.state=null,T}function en(W,ot){var g;return!W||!W.state||(g=W.state,!(g.wrap&2))?K:(g.head=ot,ot.done=!1,T)}function rn(W,ot){var g=ot.length,lt,jt,it;return!W||!W.state||(lt=W.state,lt.wrap!==0&&lt.mode!==Ht)?K:lt.mode===Ht&&(jt=1,jt=D(jt,ot,g,0),jt!==lt.check)?B:(it=tr(W,ot,g,g),it?(lt.mode=le,V):(lt.havedict=1,T))}S.inflateReset=J,S.inflateReset2=Nt,S.inflateResetKeep=X,S.inflateInit=Pt,S.inflateInit2=xt,S.inflate=er,S.inflateEnd=tn,S.inflateGetHeader=en,S.inflateSetDictionary=rn,S.inflateInfo="pako inflate (from Nodeca project)"},function(F,S){var w=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";S.assign=function(E){for(var O=Array.prototype.slice.call(arguments,1);O.length;){var _=O.shift();if(_){if(typeof _!="object")throw new TypeError(_+"must be non-object");for(var p in _)_.hasOwnProperty(p)&&(E[p]=_[p])}}return E},S.shrinkBuf=function(E,O){return E.length===O?E:E.subarray?E.subarray(0,O):(E.length=O,E)};var d={arraySet:function(E,O,_,p,s){if(O.subarray&&E.subarray){E.set(O.subarray(_,_+p),s);return}for(var m=0;m<p;m++)E[s+m]=O[_+m]},flattenChunks:function(E){var O,_,p,s,m,c;for(p=0,O=0,_=E.length;O<_;O++)p+=E[O].length;for(c=new Uint8Array(p),s=0,O=0,_=E.length;O<_;O++)m=E[O],c.set(m,s),s+=m.length;return c}},D={arraySet:function(E,O,_,p,s){for(var m=0;m<p;m++)E[s+m]=O[_+m]},flattenChunks:function(E){return[].concat.apply([],E)}};S.setTyped=function(E){E?(S.Buf8=Uint8Array,S.Buf16=Uint16Array,S.Buf32=Int32Array,S.assign(S,d)):(S.Buf8=Array,S.Buf16=Array,S.Buf32=Array,S.assign(S,D))},S.setTyped(w)},function(F,S){function w(d,D,E,O){for(var _=d&65535|0,p=d>>>16&65535|0,s=0;E!==0;){s=E>2e3?2e3:E,E-=s;do _=_+D[O++]|0,p=p+_|0;while(--s);_%=65521,p%=65521}return _|p<<16|0}F.exports=w},function(F,S){function w(){for(var E,O=[],_=0;_<256;_++){E=_;for(var p=0;p<8;p++)E=E&1?3988292384^E>>>1:E>>>1;O[_]=E}return O}var d=w();function D(E,O,_,p){var s=d,m=p+_;E^=-1;for(var c=p;c<m;c++)E=E>>>8^s[(E^O[c])&255];return E^-1}F.exports=D},function(F,S){var w=30,d=12;F.exports=function(E,O){var _,p,s,m,c,v,I,T,x,M,K,B,V,vt,$,dt,ft,z,Q,st,Ft,mt,Lt,Ot,gt;_=E.state,p=E.next_in,Ot=E.input,s=p+(E.avail_in-5),m=E.next_out,gt=E.output,c=m-(O-E.avail_out),v=m+(E.avail_out-257),I=_.dmax,T=_.wsize,x=_.whave,M=_.wnext,K=_.window,B=_.hold,V=_.bits,vt=_.lencode,$=_.distcode,dt=(1<<_.lenbits)-1,ft=(1<<_.distbits)-1;t:do{V<15&&(B+=Ot[p++]<<V,V+=8,B+=Ot[p++]<<V,V+=8),z=vt[B&dt];e:for(;;){if(Q=z>>>24,B>>>=Q,V-=Q,Q=z>>>16&255,Q===0)gt[m++]=z&65535;else if(Q&16){st=z&65535,Q&=15,Q&&(V<Q&&(B+=Ot[p++]<<V,V+=8),st+=B&(1<<Q)-1,B>>>=Q,V-=Q),V<15&&(B+=Ot[p++]<<V,V+=8,B+=Ot[p++]<<V,V+=8),z=$[B&ft];r:for(;;){if(Q=z>>>24,B>>>=Q,V-=Q,Q=z>>>16&255,Q&16){if(Ft=z&65535,Q&=15,V<Q&&(B+=Ot[p++]<<V,V+=8,V<Q&&(B+=Ot[p++]<<V,V+=8)),Ft+=B&(1<<Q)-1,Ft>I){E.msg="invalid distance too far back",_.mode=w;break t}if(B>>>=Q,V-=Q,Q=m-c,Ft>Q){if(Q=Ft-Q,Q>x&&_.sane){E.msg="invalid distance too far back",_.mode=w;break t}if(mt=0,Lt=K,M===0){if(mt+=T-Q,Q<st){st-=Q;do gt[m++]=K[mt++];while(--Q);mt=m-Ft,Lt=gt}}else if(M<Q){if(mt+=T+M-Q,Q-=M,Q<st){st-=Q;do gt[m++]=K[mt++];while(--Q);if(mt=0,M<st){Q=M,st-=Q;do gt[m++]=K[mt++];while(--Q);mt=m-Ft,Lt=gt}}}else if(mt+=M-Q,Q<st){st-=Q;do gt[m++]=K[mt++];while(--Q);mt=m-Ft,Lt=gt}for(;st>2;)gt[m++]=Lt[mt++],gt[m++]=Lt[mt++],gt[m++]=Lt[mt++],st-=3;st&&(gt[m++]=Lt[mt++],st>1&&(gt[m++]=Lt[mt++]))}else{mt=m-Ft;do gt[m++]=gt[mt++],gt[m++]=gt[mt++],gt[m++]=gt[mt++],st-=3;while(st>2);st&&(gt[m++]=gt[mt++],st>1&&(gt[m++]=gt[mt++]))}}else if(Q&64){E.msg="invalid distance code",_.mode=w;break t}else{z=$[(z&65535)+(B&(1<<Q)-1)];continue r}break}}else if(Q&64)if(Q&32){_.mode=d;break t}else{E.msg="invalid literal/length code",_.mode=w;break t}else{z=vt[(z&65535)+(B&(1<<Q)-1)];continue e}break}}while(p<s&&m<v);st=V>>3,p-=st,V-=st<<3,B&=(1<<V)-1,E.next_in=p,E.next_out=m,E.avail_in=p<s?5+(s-p):5-(p-s),E.avail_out=m<v?257+(v-m):257-(m-v),_.hold=B,_.bits=V}},function(F,S,w){var d=w(33),D=15,E=852,O=592,_=0,p=1,s=2,m=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],v=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],I=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];F.exports=function(x,M,K,B,V,vt,$,dt){var ft=dt.bits,z=0,Q=0,st=0,Ft=0,mt=0,Lt=0,Ot=0,gt=0,Ht=0,P=0,C,H,at,kt,_t,Et=null,Tt=0,Ut,Mt=new d.Buf16(D+1),R=new d.Buf16(D+1),N=null,G=0,nt,yt,bt;for(z=0;z<=D;z++)Mt[z]=0;for(Q=0;Q<B;Q++)Mt[M[K+Q]]++;for(mt=ft,Ft=D;Ft>=1&&Mt[Ft]===0;Ft--);if(mt>Ft&&(mt=Ft),Ft===0)return V[vt++]=1<<24|64<<16|0,V[vt++]=1<<24|64<<16|0,dt.bits=1,0;for(st=1;st<Ft&&Mt[st]===0;st++);for(mt<st&&(mt=st),gt=1,z=1;z<=D;z++)if(gt<<=1,gt-=Mt[z],gt<0)return-1;if(gt>0&&(x===_||Ft!==1))return-1;for(R[1]=0,z=1;z<D;z++)R[z+1]=R[z]+Mt[z];for(Q=0;Q<B;Q++)M[K+Q]!==0&&($[R[M[K+Q]]++]=Q);if(x===_?(Et=N=$,Ut=19):x===p?(Et=m,Tt-=257,N=c,G-=257,Ut=256):(Et=v,N=I,Ut=-1),P=0,Q=0,z=st,_t=vt,Lt=mt,Ot=0,at=-1,Ht=1<<mt,kt=Ht-1,x===p&&Ht>E||x===s&&Ht>O)return 1;for(;;){nt=z-Ot,$[Q]<Ut?(yt=0,bt=$[Q]):$[Q]>Ut?(yt=N[G+$[Q]],bt=Et[Tt+$[Q]]):(yt=96,bt=0),C=1<<z-Ot,H=1<<Lt,st=H;do H-=C,V[_t+(P>>Ot)+H]=nt<<24|yt<<16|bt|0;while(H!==0);for(C=1<<z-1;P&C;)C>>=1;if(C!==0?(P&=C-1,P+=C):P=0,Q++,--Mt[z]===0){if(z===Ft)break;z=M[K+$[Q]]}if(z>mt&&(P&kt)!==at){for(Ot===0&&(Ot=mt),_t+=st,Lt=z-Ot,gt=1<<Lt;Lt+Ot<Ft&&(gt-=Mt[Lt+Ot],!(gt<=0));)Lt++,gt<<=1;if(Ht+=1<<Lt,x===p&&Ht>E||x===s&&Ht>O)return 1;at=P&kt,V[at]=mt<<24|Lt<<16|_t-vt|0}}return P!==0&&(V[_t+P]=z-Ot<<24|64<<16|0),dt.bits=mt,0}},function(F,S,w){var d=w(33),D=!0,E=!0;try{String.fromCharCode.apply(null,[0])}catch{D=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{E=!1}for(var O=new d.Buf8(256),_=0;_<256;_++)O[_]=_>=252?6:_>=248?5:_>=240?4:_>=224?3:_>=192?2:1;O[254]=O[254]=1,S.string2buf=function(s){var m,c,v,I,T,x=s.length,M=0;for(I=0;I<x;I++)c=s.charCodeAt(I),(c&64512)===55296&&I+1<x&&(v=s.charCodeAt(I+1),(v&64512)===56320&&(c=65536+(c-55296<<10)+(v-56320),I++)),M+=c<128?1:c<2048?2:c<65536?3:4;for(m=new d.Buf8(M),T=0,I=0;T<M;I++)c=s.charCodeAt(I),(c&64512)===55296&&I+1<x&&(v=s.charCodeAt(I+1),(v&64512)===56320&&(c=65536+(c-55296<<10)+(v-56320),I++)),c<128?m[T++]=c:c<2048?(m[T++]=192|c>>>6,m[T++]=128|c&63):c<65536?(m[T++]=224|c>>>12,m[T++]=128|c>>>6&63,m[T++]=128|c&63):(m[T++]=240|c>>>18,m[T++]=128|c>>>12&63,m[T++]=128|c>>>6&63,m[T++]=128|c&63);return m};function p(s,m){if(m<65537&&(s.subarray&&E||!s.subarray&&D))return String.fromCharCode.apply(null,d.shrinkBuf(s,m));for(var c="",v=0;v<m;v++)c+=String.fromCharCode(s[v]);return c}S.buf2binstring=function(s){return p(s,s.length)},S.binstring2buf=function(s){for(var m=new d.Buf8(s.length),c=0,v=m.length;c<v;c++)m[c]=s.charCodeAt(c);return m},S.buf2string=function(s,m){var c,v,I,T,x=m||s.length,M=new Array(x*2);for(v=0,c=0;c<x;){if(I=s[c++],I<128){M[v++]=I;continue}if(T=O[I],T>4){M[v++]=65533,c+=T-1;continue}for(I&=T===2?31:T===3?15:7;T>1&&c<x;)I=I<<6|s[c++]&63,T--;if(T>1){M[v++]=65533;continue}I<65536?M[v++]=I:(I-=65536,M[v++]=55296|I>>10&1023,M[v++]=56320|I&1023)}return p(M,v)},S.utf8border=function(s,m){var c;for(m=m||s.length,m>s.length&&(m=s.length),c=m-1;c>=0&&(s[c]&192)===128;)c--;return c<0||c===0?m:c+O[s[c]]>m?c:m}},function(F,S){F.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(F,S){F.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(F,S){function w(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}F.exports=w},function(F,S){function w(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}F.exports=w}])})})(Xi);var wn=Xi.exports;function ss(ct){let A;const F=ct[2].default,S=Ba(F,ct,ct[3],null);return{c(){S&&S.c()},l(w){S&&S.l(w)},m(w,d){S&&S.m(w,d),A=!0},p(w,d){S&&S.p&&(!A||d&8)&&Wa(S,F,w,w[3],A?Va(F,w[3],d,null):Ha(w[3]),null)},i(w){A||(zt(S,w),A=!0)},o(w){Wt(S,w),A=!1},d(w){S&&S.d(w)}}}function us(ct){let A,F;const S=[{name:"info"},ct[1],{iconNode:ct[0]}];let w={$$slots:{default:[ss]},$$scope:{ctx:ct}};for(let d=0;d<S.length;d+=1)w=_n(w,S[d]);return A=new Ja({props:w}),{c(){ne(A.$$.fragment)},l(d){ie(A.$$.fragment,d)},m(d,D){oe(A,d,D),F=!0},p(d,[D]){const E=D&3?Qa(S,[S[0],D&2&&$a(d[1]),D&1&&{iconNode:d[0]}]):{};D&8&&(E.$$scope={dirty:D,ctx:d}),A.$set(E)},i(d){F||(zt(A.$$.fragment,d),F=!0)},o(d){Wt(A.$$.fragment,d),F=!1},d(d){ae(A,d)}}}function cs(ct,A,F){let{$$slots:S={},$$scope:w}=A;const d=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 16v-4"}],["path",{d:"M12 8h.01"}]];return ct.$$set=D=>{F(1,A=_n(_n({},A),Ci(D))),"$$scope"in D&&F(3,w=D.$$scope)},A=Ci(A),[d,A,S,w]}class fs extends zi{constructor(A){super(),Bi(this,A,cs,us,ji,{})}}function ls(ct){let A;return{c(){A=Qe("Input file")},l(F){A=$e(F,"Input file")},m(F,S){ve(F,A,S)},d(F){F&&fe(A)}}}function hs(ct){let A;return{c(){A=Qe("User password (Optional)")},l(F){A=$e(F,"User password (Optional)")},m(F,S){ve(F,A,S)},d(F){F&&fe(A)}}}function ps(ct){let A,F;return A=new fs({props:{class:"w-4 h-4"}}),{c(){ne(A.$$.fragment)},l(S){ie(A.$$.fragment,S)},m(S,w){oe(A,S,w),F=!0},p:Qr,i(S){F||(zt(A.$$.fragment,S),F=!0)},o(S){Wt(A.$$.fragment,S),F=!1},d(S){ae(A,S)}}}function ds(ct){let A,F=`User password is the password that can be use to view the file with some restrictions such
					as printing or copying. The password may be empty.`;return{c(){A=Ke("p"),A.textContent=F},l(S){A=Je(S,"P",{"data-svelte-h":!0}),Jr(A)!=="svelte-16ubxc"&&(A.textContent=F)},m(S,w){ve(S,A,w)},p:Qr,d(S){S&&fe(A)}}}function ys(ct){let A,F,S,w;return A=new Hi({props:{class:"cursor-default ml-2",$$slots:{default:[ps]},$$scope:{ctx:ct}}}),S=new Vi({props:{$$slots:{default:[ds]},$$scope:{ctx:ct}}}),{c(){ne(A.$$.fragment),F=Le(),ne(S.$$.fragment)},l(d){ie(A.$$.fragment,d),F=De(d),ie(S.$$.fragment,d)},m(d,D){oe(A,d,D),ve(d,F,D),oe(S,d,D),w=!0},p(d,D){const E={};D&16384&&(E.$$scope={dirty:D,ctx:d}),A.$set(E);const O={};D&16384&&(O.$$scope={dirty:D,ctx:d}),S.$set(O)},i(d){w||(zt(A.$$.fragment,d),zt(S.$$.fragment,d),w=!0)},o(d){Wt(A.$$.fragment,d),Wt(S.$$.fragment,d),w=!1},d(d){d&&fe(F),ae(A,d),ae(S,d)}}}function vs(ct){let A,F;return A=new $r({props:{disabled:!0,$$slots:{default:[ms]},$$scope:{ctx:ct}}}),{c(){ne(A.$$.fragment)},l(S){ie(A.$$.fragment,S)},m(S,w){oe(A,S,w),F=!0},p(S,w){const d={};w&16392&&(d.$$scope={dirty:w,ctx:S}),A.$set(d)},i(S){F||(zt(A.$$.fragment,S),F=!0)},o(S){Wt(A.$$.fragment,S),F=!1},d(S){ae(A,S)}}}function gs(ct){let A,F,S,w;const d=[_s,ws],D=[];function E(O,_){var p;return(p=O[0])!=null&&p.length?1:0}return A=E(ct),F=D[A]=d[A](ct),{c(){F.c(),S=Mi()},l(O){F.l(O),S=Mi()},m(O,_){D[A].m(O,_),ve(O,S,_),w=!0},p(O,_){let p=A;A=E(O),A===p?D[A].p(O,_):(In(),Wt(D[p],1,1,()=>{D[p]=null}),En(),F=D[A],F?F.p(O,_):(F=D[A]=d[A](O),F.c()),zt(F,1),F.m(S.parentNode,S))},i(O){w||(zt(F),w=!0)},o(O){Wt(F),w=!1},d(O){O&&fe(S),D[A].d(O)}}}function ms(ct){let A,F,S=ct[3].toFixed(0)+"",w,d,D;return A=new os({props:{class:"mr-2 h-4 w-4 animate-spin"}}),{c(){ne(A.$$.fragment),F=Qe(`
			Processing: `),w=Qe(S),d=Qe("%")},l(E){ie(A.$$.fragment,E),F=$e(E,`
			Processing: `),w=$e(E,S),d=$e(E,"%")},m(E,O){oe(A,E,O),ve(E,F,O),ve(E,w,O),ve(E,d,O),D=!0},p(E,O){(!D||O&8)&&S!==(S=E[3].toFixed(0)+"")&&Ga(w,S)},i(E){D||(zt(A.$$.fragment,E),D=!0)},o(E){Wt(A.$$.fragment,E),D=!1},d(E){E&&(fe(F),fe(w),fe(d)),ae(A,E)}}}function ws(ct){let A,F;return A=new $r({props:{$$slots:{default:[Ss]},$$scope:{ctx:ct}}}),A.$on("click",ct[5]),{c(){ne(A.$$.fragment)},l(S){ie(A.$$.fragment,S)},m(S,w){oe(A,S,w),F=!0},p(S,w){const d={};w&16384&&(d.$$scope={dirty:w,ctx:S}),A.$set(d)},i(S){F||(zt(A.$$.fragment,S),F=!0)},o(S){Wt(A.$$.fragment,S),F=!1},d(S){ae(A,S)}}}function _s(ct){let A,F;return A=new Wi({props:{$$slots:{default:[ks]},$$scope:{ctx:ct}}}),{c(){ne(A.$$.fragment)},l(S){ie(A.$$.fragment,S)},m(S,w){oe(A,S,w),F=!0},p(S,w){const d={};w&16384&&(d.$$scope={dirty:w,ctx:S}),A.$set(d)},i(S){F||(zt(A.$$.fragment,S),F=!0)},o(S){Wt(A.$$.fragment,S),F=!1},d(S){ae(A,S)}}}function Ss(ct){let A;return{c(){A=Qe("Decrypt")},l(F){A=$e(F,"Decrypt")},m(F,S){ve(F,A,S)},d(F){F&&fe(A)}}}function Es(ct){let A;return{c(){A=Qe("Decrypt")},l(F){A=$e(F,"Decrypt")},m(F,S){ve(F,A,S)},d(F){F&&fe(A)}}}function Is(ct){let A,F;return A=new $r({props:{class:"w-full",disabled:!0,$$slots:{default:[Es]},$$scope:{ctx:ct}}}),A.$on("click",ct[5]),{c(){ne(A.$$.fragment)},l(S){ie(A.$$.fragment,S)},m(S,w){oe(A,S,w),F=!0},p(S,w){const d={};w&16384&&(d.$$scope={dirty:w,ctx:S}),A.$set(d)},i(S){F||(zt(A.$$.fragment,S),F=!0)},o(S){Wt(A.$$.fragment,S),F=!1},d(S){ae(A,S)}}}function bs(ct){let A,F="Select a file to continue";return{c(){A=Ke("p"),A.textContent=F},l(S){A=Je(S,"P",{"data-svelte-h":!0}),Jr(A)!=="svelte-p3ybh1"&&(A.textContent=F)},m(S,w){ve(S,A,w)},p:Qr,d(S){S&&fe(A)}}}function ks(ct){let A,F,S,w;return A=new Hi({props:{class:"cursor-default",$$slots:{default:[Is]},$$scope:{ctx:ct}}}),S=new Vi({props:{$$slots:{default:[bs]},$$scope:{ctx:ct}}}),{c(){ne(A.$$.fragment),F=Le(),ne(S.$$.fragment)},l(d){ie(A.$$.fragment,d),F=De(d),ie(S.$$.fragment,d)},m(d,D){oe(A,d,D),ve(d,F,D),oe(S,d,D),w=!0},p(d,D){const E={};D&16384&&(E.$$scope={dirty:D,ctx:d}),A.$set(E);const O={};D&16384&&(O.$$scope={dirty:D,ctx:d}),S.$set(O)},i(d){w||(zt(A.$$.fragment,d),zt(S.$$.fragment,d),w=!0)},o(d){Wt(A.$$.fragment,d),Wt(S.$$.fragment,d),w=!1},d(d){d&&fe(F),ae(A,d),ae(S,d)}}}function Pi(ct){let A,F,S;return F=new $r({props:{variant:"secondary",class:"w-full",$$slots:{default:[Os]},$$scope:{ctx:ct}}}),{c(){A=Ke("a"),ne(F.$$.fragment),this.h()},l(w){A=Je(w,"A",{href:!0,class:!0,download:!0});var d=Sn(A);ie(F.$$.fragment,d),d.forEach(fe),this.h()},h(){Ae(A,"href",ct[2]),Ae(A,"class","w-full h-fit"),Ae(A,"download","output.pdf")},m(w,d){ve(w,A,d),oe(F,A,null),S=!0},p(w,d){const D={};d&16384&&(D.$$scope={dirty:d,ctx:w}),F.$set(D),(!S||d&4)&&Ae(A,"href",w[2])},i(w){S||(zt(F.$$.fragment,w),S=!0)},o(w){Wt(F.$$.fragment,w),S=!1},d(w){w&&fe(A),ae(F)}}}function Os(ct){let A,F,S;return A=new is({props:{class:"mr-2 h-4 w-4"}}),{c(){ne(A.$$.fragment),F=Qe("Download")},l(w){ie(A.$$.fragment,w),F=$e(w,"Download")},m(w,d){oe(A,w,d),ve(w,F,d),S=!0},p:Qr,i(w){S||(zt(A.$$.fragment,w),S=!0)},o(w){Wt(A.$$.fragment,w),S=!1},d(w){w&&fe(F),ae(A,w)}}}function Rs(ct){let A,F,S="Decrypt PDF",w,d,D,E,O="Decrypt PDF and remove all restrictions",_,p,s,m,c,v,I,T,x,M,K,B,V,vt,$,dt,ft,z,Q,st,Ft;d=new es({}),p=new Ui({props:{for:"input-file",$$slots:{default:[ls]},$$scope:{ctx:ct}}}),I=new Ui({props:{for:"password",$$slots:{default:[hs]},$$scope:{ctx:ct}}}),x=new Wi({props:{$$slots:{default:[ys]},$$scope:{ctx:ct}}});function mt(C){ct[7](C)}let Lt={id:"password",type:"text",placeholder:"User password"};ct[1]!==void 0&&(Lt.value=ct[1]),K=new rs({props:Lt}),Za.push(()=>Ka(K,"value",mt)),vt=new ns({props:{class:"mt-1 mb-0.5",value:ct[3]}});const Ot=[gs,vs],gt=[];function Ht(C,H){return C[4]?1:0}dt=Ht(ct),ft=gt[dt]=Ot[dt](ct);let P=ct[2]&&Pi(ct);return{c(){A=Ke("div"),F=Ke("h1"),F.textContent=S,w=Le(),ne(d.$$.fragment),D=Le(),E=Ke("h2"),E.textContent=O,_=Le(),ne(p.$$.fragment),s=Le(),m=Ke("input"),c=Le(),v=Ke("div"),ne(I.$$.fragment),T=Le(),ne(x.$$.fragment),M=Le(),ne(K.$$.fragment),V=Le(),ne(vt.$$.fragment),$=Le(),ft.c(),z=Le(),P&&P.c(),this.h()},l(C){A=Je(C,"DIV",{class:!0});var H=Sn(A);F=Je(H,"H1",{class:!0,"data-svelte-h":!0}),Jr(F)!=="svelte-6vk7kn"&&(F.textContent=S),w=De(H),ie(d.$$.fragment,H),D=De(H),E=Je(H,"H2",{class:!0,"data-svelte-h":!0}),Jr(E)!=="svelte-m350mi"&&(E.textContent=O),_=De(H),ie(p.$$.fragment,H),s=De(H),m=Je(H,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),c=De(H),v=Je(H,"DIV",{class:!0});var at=Sn(v);ie(I.$$.fragment,at),T=De(at),ie(x.$$.fragment,at),at.forEach(fe),M=De(H),ie(K.$$.fragment,H),V=De(H),ie(vt.$$.fragment,H),$=De(H),ft.l(H),z=De(H),P&&P.l(H),H.forEach(fe),this.h()},h(){Ae(F,"class","text-xl font-semibold"),Ae(E,"class","mb-1"),Ae(m,"id","input-file"),Ae(m,"class","flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"),Ae(m,"type","file"),Ae(m,"accept","application/pdf"),Ae(v,"class","flex mt-1"),Ae(A,"class","grid w-[22rem] h-fit items-center gap-1.5 mt-4 mx-auto px-4")},m(C,H){ve(C,A,H),Ie(A,F),Ie(A,w),oe(d,A,null),Ie(A,D),Ie(A,E),Ie(A,_),oe(p,A,null),Ie(A,s),Ie(A,m),Ie(A,c),Ie(A,v),oe(I,v,null),Ie(v,T),oe(x,v,null),Ie(A,M),oe(K,A,null),Ie(A,V),oe(vt,A,null),Ie(A,$),gt[dt].m(A,null),Ie(A,z),P&&P.m(A,null),Q=!0,st||(Ft=Xa(m,"change",ct[6]),st=!0)},p(C,[H]){const at={};H&16384&&(at.$$scope={dirty:H,ctx:C}),p.$set(at);const kt={};H&16384&&(kt.$$scope={dirty:H,ctx:C}),I.$set(kt);const _t={};H&16384&&(_t.$$scope={dirty:H,ctx:C}),x.$set(_t);const Et={};!B&&H&2&&(B=!0,Et.value=C[1],Ya(()=>B=!1)),K.$set(Et);const Tt={};H&8&&(Tt.value=C[3]),vt.$set(Tt);let Ut=dt;dt=Ht(C),dt===Ut?gt[dt].p(C,H):(In(),Wt(gt[Ut],1,1,()=>{gt[Ut]=null}),En(),ft=gt[dt],ft?ft.p(C,H):(ft=gt[dt]=Ot[dt](C),ft.c()),zt(ft,1),ft.m(A,z)),C[2]?P?(P.p(C,H),H&4&&zt(P,1)):(P=Pi(C),P.c(),zt(P,1),P.m(A,null)):P&&(In(),Wt(P,1,1,()=>{P=null}),En())},i(C){Q||(zt(d.$$.fragment,C),zt(p.$$.fragment,C),zt(I.$$.fragment,C),zt(x.$$.fragment,C),zt(K.$$.fragment,C),zt(vt.$$.fragment,C),zt(ft),zt(P),Q=!0)},o(C){Wt(d.$$.fragment,C),Wt(p.$$.fragment,C),Wt(I.$$.fragment,C),Wt(x.$$.fragment,C),Wt(K.$$.fragment,C),Wt(vt.$$.fragment,C),Wt(ft),Wt(P),Q=!1},d(C){C&&fe(A),ae(d),ae(p),ae(I),ae(x),ae(K),ae(vt),gt[dt].d(),P&&P.d(),st=!1,Ft()}}}function Ns(ct,A,F){async function S(){await new Promise((x,M)=>{wn.configure({fs:"InMemory"},K=>{K?M(K):x()})})}let w,d,D,E;qa(async()=>{if(await S(),w=wn.BFSRequire("fs"),d=wn.BFSRequire("buffer").Buffer,as(w,d),E=new Zi,!E){Te.error("Failed to initialize Go wasm runtime",{description:"Unknown error, you can try refreshing the page"});return}D=(await WebAssembly.instantiateStreaming(fetch("/pdfcpu.wasm"),E.importObject)).module});let O="",_=0;function p(){URL.revokeObjectURL(O),F(2,O=""),F(3,_=0)}let s=!1,m,c;async function v(){if(p(),F(4,s=!0),!w){Te.error("BrowserFS is not initialized",{description:"Try again in a few seconds"}),F(4,s=!1);return}if(!E){Te.error("Go wasm runtime is not initialized",{description:"Try again in a few seconds"}),F(4,s=!1);return}if(!D){Te.error("pdfcpu wasm module is not initialized",{description:"Try again in a few seconds"}),F(4,s=!1);return}if(!(m!=null&&m.length)){Te.error("No file selected",{description:"Please select a file"}),F(4,s=!1);return}const x=m[0];if(!x){Te.error("No file selected",{description:"Please select a file"}),F(4,s=!1);return}w.writeFileSync("/input.pdf",d.from(await x.arrayBuffer())),F(3,_=20);const M=await WebAssembly.instantiate(D,E.importObject);c?E.argv=["pdfcpu.wasm","decrypt","-upw",c,"/input.pdf","/output.pdf"]:E.argv=["pdfcpu.wasm","decrypt","/input.pdf","/output.pdf"],await E.run(M);try{w.statSync("/output.pdf")}catch(vt){if(Ar.includes("This file is not encrypted")){Te.error("Failed to decrypt PDF",{description:"The file is not encrypted"}),F(4,s=!1),F(3,_=0);return}if(Ar.includes("Please provide the correct password")){c?Te.error("Failed to decrypt PDF",{description:"Invalid password"}):Te.error("Failed to decrypt PDF",{description:"Password is required to decrypt this file"}),F(4,s=!1),F(3,_=0);return}if(Ar.includes("JavaScript error")){Te.error("Failed to decrypt PDF",{description:"Unknown JavaScript error, refresh the page and try again"}),console.error(vt),F(4,s=!1),F(3,_=0);return}Te.error("Failed to decrypt PDF",{description:"Unknown error during processing by pdfcpu wasm module. The developer console should have more information."}),console.error(vt),F(4,s=!1),F(3,_=0);return}F(3,_=80);let K=w.readFileSync("/output.pdf");w.unlinkSync("/input.pdf"),w.unlinkSync("/output.pdf");let B=new Blob([K],{type:"application/pdf"});F(2,O=URL.createObjectURL(B)),Te.success("Processing completed!",{description:"Your file should begin downloading automatically. If not, click the download button"});let V=document.createElement("a");V.href=O,V.download="output.pdf",V.click(),F(3,_=100),F(4,s=!1)}function I(){m=this.files,F(0,m)}function T(x){c=x,F(1,c)}return ct.$$.update=()=>{ct.$$.dirty&3&&p()},[m,c,O,_,s,v,I,T]}class As extends zi{constructor(A){super(),Bi(this,A,Ns,Rs,ji,{})}}export{As as component};
