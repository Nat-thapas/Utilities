(function(){"use strict";let nn,sr="";function wi(me,Ie){globalThis.Buffer=Ie,globalThis.fs=me,globalThis.fs.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048};let q="";globalThis.fs.writeSyncOriginal=globalThis.fs.writeSync,globalThis.fs.writeSync=function(I,x){if(I===1||I===2){q+=F.decode(x);const E=q.lastIndexOf(`
`);return E!=-1&&(sr+=q.substring(0,E+1),console.log(q.substring(0,E)),q=q.substring(E+1)),x.length}else return globalThis.fs.writeSyncOriginal(...arguments)},globalThis.fs.writeOriginal=globalThis.fs.write,globalThis.fs.write=function(I,x,E,N,w,p){if(I===1||I===2){if(E!==0||N!==x.length||w!==null)throw new Error("not implemented");const u=this.writeSync(I,x);p(null,u,x)}else return arguments[1]=globalThis.Buffer.from(arguments[1]),globalThis.fs.writeOriginal(...arguments)},globalThis.fs.openOriginal=globalThis.fs.open,globalThis.fs.open=function(I,x,E,N){var w="r",p=globalThis.fs.constants;if(x&p.O_WRONLY)w="w",x&p.O_EXCL&&(w="wx");else if(x&p.O_RDWR)x&p.O_CREAT&&x&p.O_TRUNC?x&p.O_EXCL?w="wx+":w="w+":w="r+";else if(x&p.O_APPEND)throw new Error("Not implmented");return globalThis.fs.openOriginal(I,w,E,N)},globalThis.fs.fstatOriginal=globalThis.fs.fstat,globalThis.fs.fstat=function(I,x){return globalThis.fs.fstatOriginal(I,function(){var E=arguments[1];return delete E.fileData,E.atimeMs=E.atime.getTime(),E.mtimeMs=E.mtime.getTime(),E.ctimeMs=E.ctime.getTime(),E.birthtimeMs=E.birthtime.getTime(),x(arguments[0],E)})},globalThis.fs.closeOriginal=globalThis.fs.close,globalThis.fs.close=function(I,x){return globalThis.fs.closeOriginal(I,function(){return typeof arguments[0]>"u"&&(arguments[0]=null),x(...arguments)})};const A=new TextEncoder("utf-8"),F=new TextDecoder("utf-8");nn=class{constructor(){this.argv=["js"],this.env={},this.exit=v=>{this.exitCode=v,v!==0&&console.warn("exit code:",v)},this._exitPromise=new Promise(v=>{this._resolveExitPromise=v}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;const I=()=>new DataView(this._inst.exports.mem.buffer),x=(v,m)=>{I().setUint32(v+0,m,!0),I().setUint32(v+4,Math.floor(m/4294967296),!0)},E=v=>{const m=I().getUint32(v+0,!0),O=I().getInt32(v+4,!0);return m+O*4294967296},N=v=>{const m=I().getFloat64(v,!0);if(m===0)return;if(!isNaN(m))return m;const O=I().getUint32(v,!0);return this._values[O]},w=(v,m)=>{if(typeof m=="number"){if(isNaN(m)){I().setUint32(v+4,2146959360,!0),I().setUint32(v,0,!0);return}if(m===0){I().setUint32(v+4,2146959360,!0),I().setUint32(v,1,!0);return}I().setFloat64(v,m,!0);return}switch(m){case void 0:I().setFloat64(v,0,!0);return;case null:I().setUint32(v+4,2146959360,!0),I().setUint32(v,2,!0);return;case!0:I().setUint32(v+4,2146959360,!0),I().setUint32(v,3,!0);return;case!1:I().setUint32(v+4,2146959360,!0),I().setUint32(v,4,!0);return}let T=this._refs.get(m);T===void 0&&(T=this._values.length,this._values.push(m),this._refs.set(m,T));let D=0;switch(typeof m){case"string":D=1;break;case"symbol":D=2;break;case"function":D=3;break}I().setUint32(v+4,2146959360|D,!0),I().setUint32(v,T,!0)},p=v=>{const m=E(v+0),O=E(v+8);return new Uint8Array(this._inst.exports.mem.buffer,m,O)},u=v=>{const m=E(v+0),O=E(v+8),T=new Array(O);for(let D=0;D<O;D++)T[D]=N(m+D*8);return T},g=v=>{const m=E(v+0),O=E(v+8);return F.decode(new DataView(this._inst.exports.mem.buffer,m,O))},c=Date.now()-performance.now();this.importObject={go:{"runtime.wasmExit":v=>{const m=I().getInt32(v+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._refs,this.exit(m)},"runtime.wasmWrite":v=>{const m=E(v+8),O=E(v+16),T=I().getInt32(v+24,!0);me.writeSync(m,new Uint8Array(this._inst.exports.mem.buffer,O,T))},"runtime.nanotime":v=>{x(v+8,(c+performance.now())*1e6)},"runtime.walltime":v=>{const m=new Date().getTime();x(v+8,m/1e3),I().setInt32(v+16,m%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":v=>{const m=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(m,setTimeout(()=>{this._resume()},E(v+8)+1)),I().setInt32(v+16,m,!0)},"runtime.clearTimeoutEvent":v=>{const m=I().getInt32(v+8,!0);clearTimeout(this._scheduledTimeouts.get(m)),this._scheduledTimeouts.delete(m)},"runtime.getRandomData":v=>{crypto.getRandomValues(p(v+8))},"syscall/js.stringVal":v=>{w(v+24,g(v+8))},"syscall/js.valueGet":v=>{const m=Reflect.get(N(v+8),g(v+16));v=this._inst.exports.getsp(),w(v+32,m)},"syscall/js.valueSet":v=>{Reflect.set(N(v+8),g(v+16),N(v+32))},"syscall/js.valueIndex":v=>{w(v+24,Reflect.get(N(v+8),E(v+16)))},"syscall/js.valueSetIndex":v=>{Reflect.set(N(v+8),E(v+16),N(v+24))},"syscall/js.valueCall":v=>{try{const m=N(v+8),O=Reflect.get(m,g(v+16)),T=u(v+32),D=Reflect.apply(O,m,T);v=this._inst.exports.getsp(),w(v+56,D),I().setUint8(v+64,1)}catch(m){w(v+56,m),I().setUint8(v+64,0)}},"syscall/js.valueInvoke":v=>{try{const m=N(v+8),O=u(v+16),T=Reflect.apply(m,void 0,O);v=this._inst.exports.getsp(),w(v+40,T),I().setUint8(v+48,1)}catch(m){w(v+40,m),I().setUint8(v+48,0)}},"syscall/js.valueNew":v=>{try{const m=N(v+8),O=u(v+16),T=Reflect.construct(m,O);v=this._inst.exports.getsp(),w(v+40,T),I().setUint8(v+48,1)}catch(m){w(v+40,m),I().setUint8(v+48,0)}},"syscall/js.valueLength":v=>{x(v+16,parseInt(N(v+8).length))},"syscall/js.valuePrepareString":v=>{const m=A.encode(String(N(v+8)));w(v+16,m),x(v+24,m.length)},"syscall/js.valueLoadString":v=>{const m=N(v+8);p(v+16).set(m)},"syscall/js.valueInstanceOf":v=>{I().setUint8(v+24,N(v+8)instanceof N(v+16))},debug:v=>{console.log(v)}}}}async run(I){this._inst=I,this._values=[NaN,0,null,!0,!1,globalThis,this._inst.exports.mem,this],this._refs=new Map,this.exited=!1,sr="";const x=new DataView(this._inst.exports.mem.buffer);let E=4096;const N=c=>{let v=E;return new Uint8Array(x.buffer,E,c.length+1).set(A.encode(c+"\0")),E+=c.length+(8-c.length%8),v},w=this.argv.length,p=[];this.argv.forEach(c=>{p.push(N(c))});const u=Object.keys(this.env).sort();p.push(u.length),u.forEach(c=>{p.push(N(`${c}=${this.env[c]}`))});const g=E;p.forEach(c=>{x.setUint32(E,c,!0),x.setUint32(E+4,0,!0),E+=8}),this._inst.exports.run(w,g),this.exited&&this._resolveExitPromise(),await this._exitPromise}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(I){const x=this;return function(){const E={id:I,this:this,args:arguments};return x._pendingEvent=E,x._resume(),E.result}}}}var mi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},on={exports:{}};(function(me,Ie){(function(A,F){me.exports=F()})(mi,function(){return function(q){var A={};function F(I){if(A[I])return A[I].exports;var x=A[I]={exports:{},id:I,loaded:!1};return q[I].call(x.exports,x,x.exports,F),x.loaded=!0,x.exports}return F.m=q,F.c=A,F.p="",F(0)}([function(q,A,F){(function(I,x,E,N){Object.defineProperty(A,"__esModule",{value:!0});var w=F(2),p=F(9),u;(function(n){n[n.EPERM=1]="EPERM",n[n.ENOENT=2]="ENOENT",n[n.EIO=5]="EIO",n[n.EBADF=9]="EBADF",n[n.EACCES=13]="EACCES",n[n.EBUSY=16]="EBUSY",n[n.EEXIST=17]="EEXIST",n[n.ENOTDIR=20]="ENOTDIR",n[n.EISDIR=21]="EISDIR",n[n.EINVAL=22]="EINVAL",n[n.EFBIG=27]="EFBIG",n[n.ENOSPC=28]="ENOSPC",n[n.EROFS=30]="EROFS",n[n.ENOTEMPTY=39]="ENOTEMPTY",n[n.ENOTSUP=95]="ENOTSUP"})(u||(u={}));var g={};g[u.EPERM]="Operation not permitted.",g[u.ENOENT]="No such file or directory.",g[u.EIO]="Input/output error.",g[u.EBADF]="Bad file descriptor.",g[u.EACCES]="Permission denied.",g[u.EBUSY]="Resource busy or locked.",g[u.EEXIST]="File exists.",g[u.ENOTDIR]="File is not a directory.",g[u.EISDIR]="File is a directory.",g[u.EINVAL]="Invalid argument.",g[u.EFBIG]="File is too big.",g[u.ENOSPC]="No space left on disk.",g[u.EROFS]="Cannot modify a read-only file system.",g[u.ENOTEMPTY]="Directory is not empty.",g[u.ENOTSUP]="Operation is not supported.";var c=function(n){function t(r,e,i){e===void 0&&(e=g[r]),n.call(this,e),this.syscall="",this.errno=r,this.code=u[r],this.path=i,this.stack=new n().stack,this.message="Error: "+this.code+": "+e+(this.path?", '"+this.path+"'":"")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.fromJSON=function(e){var i=new t(0);return i.errno=e.errno,i.code=e.code,i.path=e.path,i.stack=e.stack,i.message=e.message,i},t.fromBuffer=function(e,i){return i===void 0&&(i=0),t.fromJSON(JSON.parse(e.toString("utf8",i+4,i+4+e.readUInt32LE(i))))},t.FileError=function(e,i){return new t(e,g[e],i)},t.ENOENT=function(e){return this.FileError(u.ENOENT,e)},t.EEXIST=function(e){return this.FileError(u.EEXIST,e)},t.EISDIR=function(e){return this.FileError(u.EISDIR,e)},t.ENOTDIR=function(e){return this.FileError(u.ENOTDIR,e)},t.EPERM=function(e){return this.FileError(u.EPERM,e)},t.ENOTEMPTY=function(e){return this.FileError(u.ENOTEMPTY,e)},t.prototype.toString=function(){return this.message},t.prototype.toJSON=function(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}},t.prototype.writeToBuffer=function(e,i){e===void 0&&(e=I.alloc(this.bufferSize())),i===void 0&&(i=0);var o=e.write(JSON.stringify(this.toJSON()),i+4);return e.writeUInt32LE(o,i),e},t.prototype.bufferSize=function(){return 4+I.byteLength(JSON.stringify(this.toJSON()))},t}(Error),v=Object.freeze({get ErrorCode(){return u},ErrorStrings:g,ApiError:c}),m;(function(n){n[n.NOP=0]="NOP",n[n.THROW_EXCEPTION=1]="THROW_EXCEPTION",n[n.TRUNCATE_FILE=2]="TRUNCATE_FILE",n[n.CREATE_FILE=3]="CREATE_FILE"})(m||(m={}));var O=function n(t){if(this.flagStr=t,n.validFlagStrs.indexOf(t)<0)throw new c(u.EINVAL,"Invalid flag: "+t)};O.getFileFlag=function(t){return O.flagCache.hasOwnProperty(t)?O.flagCache[t]:O.flagCache[t]=new O(t)},O.prototype.getFlagString=function(){return this.flagStr},O.prototype.isReadable=function(){return this.flagStr.indexOf("r")!==-1||this.flagStr.indexOf("+")!==-1},O.prototype.isWriteable=function(){return this.flagStr.indexOf("w")!==-1||this.flagStr.indexOf("a")!==-1||this.flagStr.indexOf("+")!==-1},O.prototype.isTruncating=function(){return this.flagStr.indexOf("w")!==-1},O.prototype.isAppendable=function(){return this.flagStr.indexOf("a")!==-1},O.prototype.isSynchronous=function(){return this.flagStr.indexOf("s")!==-1},O.prototype.isExclusive=function(){return this.flagStr.indexOf("x")!==-1},O.prototype.pathExistsAction=function(){return this.isExclusive()?m.THROW_EXCEPTION:this.isTruncating()?m.TRUNCATE_FILE:m.NOP},O.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&this.flagStr!=="r+"?m.CREATE_FILE:m.THROW_EXCEPTION},O.flagCache={},O.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"];var T;(function(n){n[n.FILE=32768]="FILE",n[n.DIRECTORY=16384]="DIRECTORY",n[n.SYMLINK=40960]="SYMLINK"})(T||(T={}));var D=function(t,r,e,i,o,a){if(i===void 0&&(i=new Date),o===void 0&&(o=new Date),a===void 0&&(a=new Date),this.size=r,this.atime=i,this.mtime=o,this.ctime=a,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,this.birthtime=new Date(0),this.fileData=null,e)this.mode=e;else switch(t){case T.FILE:this.mode=420;break;case T.DIRECTORY:default:this.mode=511}this.blocks=Math.ceil(r/512),this.mode<4096&&(this.mode|=t)};D.fromBuffer=function(t){var r=t.readUInt32LE(0),e=t.readUInt32LE(4),i=t.readDoubleLE(8),o=t.readDoubleLE(16),a=t.readDoubleLE(24);return new D(e&61440,r,e&4095,new Date(i),new Date(o),new Date(a))},D.prototype.toBuffer=function(){var t=I.alloc(32);return t.writeUInt32LE(this.size,0),t.writeUInt32LE(this.mode,4),t.writeDoubleLE(this.atime.getTime(),8),t.writeDoubleLE(this.mtime.getTime(),16),t.writeDoubleLE(this.ctime.getTime(),24),t},D.prototype.clone=function(){return new D(this.mode&61440,this.size,this.mode&4095,this.atime,this.mtime,this.ctime)},D.prototype.isFile=function(){return(this.mode&61440)===T.FILE},D.prototype.isDirectory=function(){return(this.mode&61440)===T.DIRECTORY},D.prototype.isSymbolicLink=function(){return(this.mode&61440)===T.SYMLINK},D.prototype.chmod=function(t){this.mode=this.mode&61440|t},D.prototype.isSocket=function(){return!1},D.prototype.isBlockDevice=function(){return!1},D.prototype.isCharacterDevice=function(){return!1},D.prototype.isFIFO=function(){return!1};var et=function(n,t){return n};function j(n){if(n)return n;throw new c(u.EIO,"Initialize BrowserFS with a file system using BrowserFS.initialize(filesystem)")}function H(n,t){switch(typeof n){case"number":return n;case"string":var r=parseInt(n,8);return isNaN(r)?t:r;default:return t}}function Et(n){if(n instanceof Date)return n;if(typeof n=="number")return new Date(n*1e3);throw new c(u.EINVAL,"Invalid time.")}function Q(n){if(n.indexOf("\0")>=0)throw new c(u.EINVAL,"Path must be a string without null bytes.");if(n==="")throw new c(u.EINVAL,"Path must not be empty.");return p.resolve(n)}function St(n,t,r,e){switch(typeof n){case"object":return{encoding:typeof n.encoding<"u"?n.encoding:t,flag:typeof n.flag<"u"?n.flag:r,mode:H(n.mode,e)};case"string":return{encoding:n,flag:r,mode:e};default:return{encoding:t,flag:r,mode:e}}}function ht(){}var U=function(){this.F_OK=0,this.R_OK=4,this.W_OK=2,this.X_OK=1,this.root=null,this.fdMap={},this.nextFd=100};U.prototype.initialize=function(t){if(!t.constructor.isAvailable())throw new c(u.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return this.root=t},U.prototype._toUnixTimestamp=function(t){if(typeof t=="number")return t;if(t instanceof Date)return t.getTime()/1e3;throw new Error("Cannot parse time: "+t)},U.prototype.getRootFS=function(){return this.root?this.root:null},U.prototype.rename=function(t,r,e){e===void 0&&(e=ht);var i=et(e,1);try{j(this.root).rename(Q(t),Q(r),i)}catch(o){i(o)}},U.prototype.renameSync=function(t,r){j(this.root).renameSync(Q(t),Q(r))},U.prototype.exists=function(t,r){r===void 0&&(r=ht);var e=et(r,1);try{return j(this.root).exists(Q(t),e)}catch{return e(!1)}},U.prototype.existsSync=function(t){try{return j(this.root).existsSync(Q(t))}catch{return!1}},U.prototype.stat=function(t,r){r===void 0&&(r=ht);var e=et(r,2);try{return j(this.root).stat(Q(t),!1,e)}catch(i){return e(i)}},U.prototype.statSync=function(t){return j(this.root).statSync(Q(t),!1)},U.prototype.lstat=function(t,r){r===void 0&&(r=ht);var e=et(r,2);try{return j(this.root).stat(Q(t),!0,e)}catch(i){return e(i)}},U.prototype.lstatSync=function(t){return j(this.root).statSync(Q(t),!0)},U.prototype.truncate=function(t,r,e){r===void 0&&(r=0),e===void 0&&(e=ht);var i=0;typeof r=="function"?e=r:typeof r=="number"&&(i=r);var o=et(e,1);try{if(i<0)throw new c(u.EINVAL);return j(this.root).truncate(Q(t),i,o)}catch(a){return o(a)}},U.prototype.truncateSync=function(t,r){if(r===void 0&&(r=0),r<0)throw new c(u.EINVAL);return j(this.root).truncateSync(Q(t),r)},U.prototype.unlink=function(t,r){r===void 0&&(r=ht);var e=et(r,1);try{return j(this.root).unlink(Q(t),e)}catch(i){return e(i)}},U.prototype.unlinkSync=function(t){return j(this.root).unlinkSync(Q(t))},U.prototype.open=function(t,r,e,i){var o=this;i===void 0&&(i=ht);var a=H(e,420);i=typeof e=="function"?e:i;var s=et(i,2);try{j(this.root).open(Q(t),O.getFileFlag(r),a,function(h,d){d?s(h,o.getFdForFile(d)):s(h)})}catch(h){s(h)}},U.prototype.openSync=function(t,r,e){return e===void 0&&(e=420),this.getFdForFile(j(this.root).openSync(Q(t),O.getFileFlag(r),H(e,420)))},U.prototype.readFile=function(t,r,e){r===void 0&&(r={}),e===void 0&&(e=ht);var i=St(r,null,"r",null);e=typeof r=="function"?r:e;var o=et(e,2);try{var a=O.getFileFlag(i.flag);return a.isReadable()?j(this.root).readFile(Q(t),i.encoding,a,o):o(new c(u.EINVAL,"Flag passed to readFile must allow for reading."))}catch(s){return o(s)}},U.prototype.readFileSync=function(t,r){r===void 0&&(r={});var e=St(r,null,"r",null),i=O.getFileFlag(e.flag);if(!i.isReadable())throw new c(u.EINVAL,"Flag passed to readFile must allow for reading.");return j(this.root).readFileSync(Q(t),e.encoding,i)},U.prototype.writeFile=function(t,r,e,i){e===void 0&&(e={}),i===void 0&&(i=ht);var o=St(e,"utf8","w",420);i=typeof e=="function"?e:i;var a=et(i,1);try{var s=O.getFileFlag(o.flag);return s.isWriteable()?j(this.root).writeFile(Q(t),r,o.encoding,s,o.mode,a):a(new c(u.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(h){return a(h)}},U.prototype.writeFileSync=function(t,r,e){var i=St(e,"utf8","w",420),o=O.getFileFlag(i.flag);if(!o.isWriteable())throw new c(u.EINVAL,"Flag passed to writeFile must allow for writing.");return j(this.root).writeFileSync(Q(t),r,i.encoding,o,i.mode)},U.prototype.appendFile=function(t,r,e,i){i===void 0&&(i=ht);var o=St(e,"utf8","a",420);i=typeof e=="function"?e:i;var a=et(i,1);try{var s=O.getFileFlag(o.flag);if(!s.isAppendable())return a(new c(u.EINVAL,"Flag passed to appendFile must allow for appending."));j(this.root).appendFile(Q(t),r,o.encoding,s,o.mode,a)}catch(h){a(h)}},U.prototype.appendFileSync=function(t,r,e){var i=St(e,"utf8","a",420),o=O.getFileFlag(i.flag);if(!o.isAppendable())throw new c(u.EINVAL,"Flag passed to appendFile must allow for appending.");return j(this.root).appendFileSync(Q(t),r,i.encoding,o,i.mode)},U.prototype.fstat=function(t,r){r===void 0&&(r=ht);var e=et(r,2);try{var i=this.fd2file(t);i.stat(e)}catch(o){e(o)}},U.prototype.fstatSync=function(t){return this.fd2file(t).statSync()},U.prototype.close=function(t,r){var e=this;r===void 0&&(r=ht);var i=et(r,1);try{this.fd2file(t).close(function(o){o||e.closeFd(t),i(o)})}catch(o){i(o)}},U.prototype.closeSync=function(t){this.fd2file(t).closeSync(),this.closeFd(t)},U.prototype.ftruncate=function(t,r,e){e===void 0&&(e=ht);var i=typeof r=="number"?r:0;e=typeof r=="function"?r:e;var o=et(e,1);try{var a=this.fd2file(t);if(i<0)throw new c(u.EINVAL);a.truncate(i,o)}catch(s){o(s)}},U.prototype.ftruncateSync=function(t,r){r===void 0&&(r=0);var e=this.fd2file(t);if(r<0)throw new c(u.EINVAL);e.truncateSync(r)},U.prototype.fsync=function(t,r){r===void 0&&(r=ht);var e=et(r,1);try{this.fd2file(t).sync(e)}catch(i){e(i)}},U.prototype.fsyncSync=function(t){this.fd2file(t).syncSync()},U.prototype.fdatasync=function(t,r){r===void 0&&(r=ht);var e=et(r,1);try{this.fd2file(t).datasync(e)}catch(i){e(i)}},U.prototype.fdatasyncSync=function(t){this.fd2file(t).datasyncSync()},U.prototype.write=function(t,r,e,i,o,a){a===void 0&&(a=ht);var s,h,d,R=null;if(typeof r=="string"){var L="utf8";switch(typeof e){case"function":a=e;break;case"number":R=e,L=typeof i=="string"?i:"utf8",a=typeof o=="function"?o:a;break;default:return a=typeof i=="function"?i:typeof o=="function"?o:a,a(new c(u.EINVAL,"Invalid arguments."))}s=I.from(r,L),h=0,d=s.length}else s=r,h=e,d=i,R=typeof o=="number"?o:null,a=typeof o=="function"?o:a;var B=et(a,3);try{var J=this.fd2file(t);R==null&&(R=J.getPos()),J.write(s,h,d,R,B)}catch(tt){B(tt)}},U.prototype.writeSync=function(t,r,e,i,o){var a,s=0,h,d;if(typeof r=="string"){d=typeof e=="number"?e:null;var R=typeof i=="string"?i:"utf8";s=0,a=I.from(r,R),h=a.length}else a=r,s=e,h=i,d=typeof o=="number"?o:null;var L=this.fd2file(t);return d==null&&(d=L.getPos()),L.writeSync(a,s,h,d)},U.prototype.read=function(t,r,e,i,o,a){a===void 0&&(a=ht);var s,h,d,R,L;if(typeof r=="number"){d=r,s=e;var B=i;a=typeof o=="function"?o:a,h=0,R=I.alloc(d),L=et(function(tt,ut,pt){if(tt)return a(tt);a(tt,pt.toString(B),ut)},3)}else R=r,h=e,d=i,s=o,L=et(a,3);try{var J=this.fd2file(t);s==null&&(s=J.getPos()),J.read(R,h,d,s,L)}catch(tt){L(tt)}},U.prototype.readSync=function(t,r,e,i,o){var a=!1,s,h,d,R,L="utf8";typeof r=="number"?(d=r,R=e,L=i,h=0,s=I.alloc(d),a=!0):(s=r,h=e,d=i,R=o);var B=this.fd2file(t);R==null&&(R=B.getPos());var J=B.readSync(s,h,d,R);return a?[s.toString(L),J]:J},U.prototype.fchown=function(t,r,e,i){i===void 0&&(i=ht);var o=et(i,1);try{this.fd2file(t).chown(r,e,o)}catch(a){o(a)}},U.prototype.fchownSync=function(t,r,e){this.fd2file(t).chownSync(r,e)},U.prototype.fchmod=function(t,r,e){var i=et(e,1);try{var o=typeof r=="string"?parseInt(r,8):r;this.fd2file(t).chmod(o,i)}catch(a){i(a)}},U.prototype.fchmodSync=function(t,r){var e=typeof r=="string"?parseInt(r,8):r;this.fd2file(t).chmodSync(e)},U.prototype.futimes=function(t,r,e,i){i===void 0&&(i=ht);var o=et(i,1);try{var a=this.fd2file(t);typeof r=="number"&&(r=new Date(r*1e3)),typeof e=="number"&&(e=new Date(e*1e3)),a.utimes(r,e,o)}catch(s){o(s)}},U.prototype.futimesSync=function(t,r,e){this.fd2file(t).utimesSync(Et(r),Et(e))},U.prototype.rmdir=function(t,r){r===void 0&&(r=ht);var e=et(r,1);try{t=Q(t),j(this.root).rmdir(t,e)}catch(i){e(i)}},U.prototype.rmdirSync=function(t){return t=Q(t),j(this.root).rmdirSync(t)},U.prototype.mkdir=function(t,r,e){e===void 0&&(e=ht),typeof r=="function"&&(e=r,r=511);var i=et(e,1);try{t=Q(t),j(this.root).mkdir(t,r,i)}catch(o){i(o)}},U.prototype.mkdirSync=function(t,r){j(this.root).mkdirSync(Q(t),H(r,511))},U.prototype.readdir=function(t,r){r===void 0&&(r=ht);var e=et(r,2);try{t=Q(t),j(this.root).readdir(t,e)}catch(i){e(i)}},U.prototype.readdirSync=function(t){return t=Q(t),j(this.root).readdirSync(t)},U.prototype.link=function(t,r,e){e===void 0&&(e=ht);var i=et(e,1);try{t=Q(t),r=Q(r),j(this.root).link(t,r,i)}catch(o){i(o)}},U.prototype.linkSync=function(t,r){return t=Q(t),r=Q(r),j(this.root).linkSync(t,r)},U.prototype.symlink=function(t,r,e,i){i===void 0&&(i=ht);var o=typeof e=="string"?e:"file";i=typeof e=="function"?e:i;var a=et(i,1);try{if(o!=="file"&&o!=="dir")return a(new c(u.EINVAL,"Invalid type: "+o));t=Q(t),r=Q(r),j(this.root).symlink(t,r,o,a)}catch(s){a(s)}},U.prototype.symlinkSync=function(t,r,e){if(!e)e="file";else if(e!=="file"&&e!=="dir")throw new c(u.EINVAL,"Invalid type: "+e);return t=Q(t),r=Q(r),j(this.root).symlinkSync(t,r,e)},U.prototype.readlink=function(t,r){r===void 0&&(r=ht);var e=et(r,2);try{t=Q(t),j(this.root).readlink(t,e)}catch(i){e(i)}},U.prototype.readlinkSync=function(t){return t=Q(t),j(this.root).readlinkSync(t)},U.prototype.chown=function(t,r,e,i){i===void 0&&(i=ht);var o=et(i,1);try{t=Q(t),j(this.root).chown(t,!1,r,e,o)}catch(a){o(a)}},U.prototype.chownSync=function(t,r,e){t=Q(t),j(this.root).chownSync(t,!1,r,e)},U.prototype.lchown=function(t,r,e,i){i===void 0&&(i=ht);var o=et(i,1);try{t=Q(t),j(this.root).chown(t,!0,r,e,o)}catch(a){o(a)}},U.prototype.lchownSync=function(t,r,e){t=Q(t),j(this.root).chownSync(t,!0,r,e)},U.prototype.chmod=function(t,r,e){e===void 0&&(e=ht);var i=et(e,1);try{var o=H(r,-1);if(o<0)throw new c(u.EINVAL,"Invalid mode.");j(this.root).chmod(Q(t),!1,o,i)}catch(a){i(a)}},U.prototype.chmodSync=function(t,r){var e=H(r,-1);if(e<0)throw new c(u.EINVAL,"Invalid mode.");t=Q(t),j(this.root).chmodSync(t,!1,e)},U.prototype.lchmod=function(t,r,e){e===void 0&&(e=ht);var i=et(e,1);try{var o=H(r,-1);if(o<0)throw new c(u.EINVAL,"Invalid mode.");j(this.root).chmod(Q(t),!0,o,i)}catch(a){i(a)}},U.prototype.lchmodSync=function(t,r){var e=H(r,-1);if(e<1)throw new c(u.EINVAL,"Invalid mode.");j(this.root).chmodSync(Q(t),!0,e)},U.prototype.utimes=function(t,r,e,i){i===void 0&&(i=ht);var o=et(i,1);try{j(this.root).utimes(Q(t),Et(r),Et(e),o)}catch(a){o(a)}},U.prototype.utimesSync=function(t,r,e){j(this.root).utimesSync(Q(t),Et(r),Et(e))},U.prototype.realpath=function(t,r,e){e===void 0&&(e=ht);var i=typeof r=="object"?r:{};e=typeof r=="function"?r:ht;var o=et(e,2);try{t=Q(t),j(this.root).realpath(t,i,o)}catch(a){o(a)}},U.prototype.realpathSync=function(t,r){return r===void 0&&(r={}),t=Q(t),j(this.root).realpathSync(t,r)},U.prototype.watchFile=function(t,r,e){throw new c(u.ENOTSUP)},U.prototype.unwatchFile=function(t,r){throw new c(u.ENOTSUP)},U.prototype.watch=function(t,r,e){throw new c(u.ENOTSUP)},U.prototype.access=function(t,r,e){throw new c(u.ENOTSUP)},U.prototype.accessSync=function(t,r){throw new c(u.ENOTSUP)},U.prototype.createReadStream=function(t,r){throw new c(u.ENOTSUP)},U.prototype.createWriteStream=function(t,r){throw new c(u.ENOTSUP)},U.prototype.wrapCallbacks=function(t){et=t},U.prototype.getFdForFile=function(t){var r=this.nextFd++;return this.fdMap[r]=t,r},U.prototype.fd2file=function(t){var r=this.fdMap[t];if(r)return r;throw new c(u.EBADF,"Invalid file descriptor.")},U.prototype.closeFd=function(t){delete this.fdMap[t]},U.Stats=D;var $=new U,st={},Rt=U.prototype;Object.keys(Rt).forEach(function(n){typeof $[n]=="function"?st[n]=function(){return $[n].apply($,arguments)}:st[n]=$[n]}),st.changeFSModule=function(n){$=n},st.getFSModule=function(){return $},st.FS=U;function dt(n,t,r,e,i){return n<t||r<t?n>r?r+1:n+1:e===i?t:t+1}function Dt(n,t){if(n===t)return 0;if(n.length>t.length){var r=n;n=t,t=r}for(var e=n.length,i=t.length;e>0&&n.charCodeAt(e-1)===t.charCodeAt(i-1);)e--,i--;for(var o=0;o<e&&n.charCodeAt(o)===t.charCodeAt(o);)o++;if(e-=o,i-=o,e===0||i===1)return i;for(var a=new Array(e<<1),s=0;s<e;)a[e+s]=n.charCodeAt(o+s),a[s]=++s;var h,d,R,L,B;for(h=0;h+3<i;)for(var J=t.charCodeAt(o+(d=h)),tt=t.charCodeAt(o+(R=h+1)),ut=t.charCodeAt(o+(L=h+2)),pt=t.charCodeAt(o+(B=h+3)),It=h+=4,Ht=0;Ht<e;){var ie=a[e+Ht],Re=a[Ht];d=dt(Re,d,R,J,ie),R=dt(d,R,L,tt,ie),L=dt(R,L,B,ut,ie),It=dt(L,B,It,pt,ie),a[Ht++]=It,B=L,L=R,R=d,d=Re}for(var Ne=0;h<i;){var ar=t.charCodeAt(o+(d=h));Ne=++h;for(var Ae=0;Ae<e;Ae++){var xe=a[Ae];a[Ae]=Ne=xe<d||Ne<d?xe>Ne?Ne+1:xe+1:ar===a[e+Ae]?d:d+1,d=xe}}return Ne}function bt(n,t,r){n&&console.warn("["+t+"] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '"+t+".Create("+JSON.stringify(r)+", callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.")}var wt=typeof navigator<"u"&&!!(/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||navigator.userAgent.indexOf("Trident")!==-1),Xt=typeof window>"u";function P(){throw new Error("BFS has reached an impossible code path; please file a bug.")}function M(n,t,r){r.existsSync(n)||(M(p.dirname(n),t,r),r.mkdirSync(n,t))}function G(n){var t=ct(n),r=t.byteOffset,e=t.byteLength;return r===0&&e===t.buffer.byteLength?t.buffer:t.buffer.slice(r,r+e)}function ct(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function kt(n){return n instanceof I?n:n instanceof Uint8Array?vt(n):I.from(n)}function vt(n){return n instanceof I?n:n.byteOffset===0&&n.byteLength===n.buffer.byteLength?mt(n.buffer):I.from(n.buffer,n.byteOffset,n.byteLength)}function mt(n){return I.from(n)}function Nt(n,t,r){if(t===void 0&&(t=0),r===void 0&&(r=n.length),t<0||r<0||r>n.length||t>r)throw new TypeError("Invalid slice bounds on buffer of length "+n.length+": ["+t+", "+r+"]");if(n.length===0)return xt();var e=ct(n),i=n[0],o=(i+1)%255;return n[0]=o,e[0]===o?(e[0]=i,vt(e.slice(t,r))):(n[0]=i,vt(e.subarray(t,r)))}var jt=null;function xt(){return jt||(jt=I.alloc(0))}function k(n,t){I.isBuffer(n)?t():t(new c(u.EINVAL,"option must be a Buffer."))}function b(n,t,r){var e=n.Options,i=n.Name,o=0,a=!1,s=!1;function h(B){a||(B&&(a=!0,r(B)),o--,o===0&&s&&r())}var d=function(B){if(e.hasOwnProperty(B)){var J=e[B],tt=t[B];if(tt==null){if(!J.optional){var ut=Object.keys(t).filter(function(It){return!(It in e)}).map(function(It){return{str:It,distance:Dt(B,It)}}).filter(function(It){return It.distance<5}).sort(function(It,Ht){return It.distance-Ht.distance});return a?{}:(a=!0,{v:r(new c(u.EINVAL,"["+i+"] Required option '"+B+"' not provided."+(ut.length>0?" You provided unrecognized option '"+ut[0].str+"'; perhaps you meant to type '"+B+"'.":"")+`
Option description: `+J.description))})}}else{var pt=!1;if(Array.isArray(J.type)?pt=J.type.indexOf(typeof tt)!==-1:pt=typeof tt===J.type,pt)J.validator&&(o++,J.validator(tt,h));else return a?{}:(a=!0,{v:r(new c(u.EINVAL,"["+i+"] Value provided for option "+B+" is not the proper type. Expected "+(Array.isArray(J.type)?"one of {"+J.type.join(", ")+"}":J.type)+", but received "+typeof tt+`
Option description: `+J.description))})}}};for(var R in e){var L=d(R);if(L)return L.v}s=!0,o===0&&!a&&r()}var X=Object.freeze({deprecationMessage:bt,isIE:wt,isWebWorker:Xt,fail:P,mkdirpSync:M,buffer2ArrayBuffer:G,buffer2Uint8array:ct,arrayish2Buffer:kt,uint8Array2Buffer:vt,arrayBuffer2Buffer:mt,copyingSlice:Nt,emptyBuffer:xt,bufferValidator:k,checkOptions:b}),rt=function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()};rt.prototype.open=function(t){var r=this.fs.realPath(t.node),e=this.FS;try{e.isFile(t.node.mode)&&(t.nfd=this.nodefs.openSync(r,this.fs.flagsToPermissionString(t.flags)))}catch(i){throw i.code?new e.ErrnoError(this.ERRNO_CODES[i.code]):i}},rt.prototype.close=function(t){var r=this.FS;try{r.isFile(t.node.mode)&&t.nfd&&this.nodefs.closeSync(t.nfd)}catch(e){throw e.code?new r.ErrnoError(this.ERRNO_CODES[e.code]):e}},rt.prototype.read=function(t,r,e,i,o){try{return this.nodefs.readSync(t.nfd,vt(r),e,i,o)}catch(a){throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}},rt.prototype.write=function(t,r,e,i,o){try{return this.nodefs.writeSync(t.nfd,vt(r),e,i,o)}catch(a){throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}},rt.prototype.llseek=function(t,r,e){var i=r;if(e===1)i+=t.position;else if(e===2&&this.FS.isFile(t.node.mode))try{var o=this.nodefs.fstatSync(t.nfd);i+=o.size}catch(a){throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}if(i<0)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return t.position=i,i};var lt=function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()};lt.prototype.getattr=function(t){var r=this.fs.realPath(t),e;try{e=this.nodefs.lstatSync(r)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}return{dev:e.dev,ino:e.ino,mode:e.mode,nlink:e.nlink,uid:e.uid,gid:e.gid,rdev:e.rdev,size:e.size,atime:e.atime,mtime:e.mtime,ctime:e.ctime,blksize:e.blksize,blocks:e.blocks}},lt.prototype.setattr=function(t,r){var e=this.fs.realPath(t);try{if(r.mode!==void 0&&(this.nodefs.chmodSync(e,r.mode),t.mode=r.mode),r.timestamp!==void 0){var i=new Date(r.timestamp);this.nodefs.utimesSync(e,i,i)}}catch(o){if(!o.code)throw o;if(o.code!=="ENOTSUP")throw new this.FS.ErrnoError(this.ERRNO_CODES[o.code])}if(r.size!==void 0)try{this.nodefs.truncateSync(e,r.size)}catch(o){throw o.code?new this.FS.ErrnoError(this.ERRNO_CODES[o.code]):o}},lt.prototype.lookup=function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r),i=this.fs.getMode(e);return this.fs.createNode(t,r,i)},lt.prototype.mknod=function(t,r,e,i){var o=this.fs.createNode(t,r,e,i),a=this.fs.realPath(o);try{this.FS.isDir(o.mode)?this.nodefs.mkdirSync(a,o.mode):this.nodefs.writeFileSync(a,"",{mode:o.mode})}catch(s){throw s.code?new this.FS.ErrnoError(this.ERRNO_CODES[s.code]):s}return o},lt.prototype.rename=function(t,r,e){var i=this.fs.realPath(t),o=this.PATH.join2(this.fs.realPath(r),e);try{this.nodefs.renameSync(i,o),t.name=e,t.parent=r}catch(a){throw a.code?new this.FS.ErrnoError(this.ERRNO_CODES[a.code]):a}},lt.prototype.unlink=function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.unlinkSync(e)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}},lt.prototype.rmdir=function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.rmdirSync(e)}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}},lt.prototype.readdir=function(t){var r=this.fs.realPath(t);try{var e=this.nodefs.readdirSync(r);return e.push(".",".."),e}catch(i){throw i.code?new this.FS.ErrnoError(this.ERRNO_CODES[i.code]):i}},lt.prototype.symlink=function(t,r,e){var i=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.symlinkSync(e,i)}catch(o){throw o.code?new this.FS.ErrnoError(this.ERRNO_CODES[o.code]):o}},lt.prototype.readlink=function(t){var r=this.fs.realPath(t);try{return this.nodefs.readlinkSync(r)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}};var _t=function(t,r,e,i){t===void 0&&(t=self.FS),r===void 0&&(r=self.PATH),e===void 0&&(e=self.ERRNO_CODES),i===void 0&&(i=st),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},this.nodefs=i,this.FS=t,this.PATH=r,this.ERRNO_CODES=e,this.node_ops=new lt(this),this.stream_ops=new rt(this)};_t.prototype.mount=function(t){return this.createNode(null,"/",this.getMode(t.opts.root),0)},_t.prototype.createNode=function(t,r,e,i){var o=this.FS;if(!o.isDir(e)&&!o.isFile(e)&&!o.isLink(e))throw new o.ErrnoError(this.ERRNO_CODES.EINVAL);var a=o.createNode(t,r,e);return a.node_ops=this.node_ops,a.stream_ops=this.stream_ops,a},_t.prototype.getMode=function(t){var r;try{r=this.nodefs.lstatSync(t)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}return r.mode},_t.prototype.realPath=function(t){for(var r=[];t.parent!==t;)r.push(t.name),t=t.parent;return r.push(t.mount.opts.root),r.reverse(),this.PATH.join.apply(null,r)},_t.prototype.flagsToPermissionString=function(t){var r=typeof t=="string"?parseInt(t,10):t;return r&=8191,r in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[r]:t},_t.prototype.getNodeFS=function(){return this.nodefs},_t.prototype.getFS=function(){return this.FS},_t.prototype.getPATH=function(){return this.PATH},_t.prototype.getERRNO_CODES=function(){return this.ERRNO_CODES};var K=function(){};K.prototype.supportsLinks=function(){return!1},K.prototype.diskSpace=function(t,r){r(0,0)},K.prototype.openFile=function(t,r,e){throw new c(u.ENOTSUP)},K.prototype.createFile=function(t,r,e,i){throw new c(u.ENOTSUP)},K.prototype.open=function(t,r,e,i){var o=this,a=function(s,h){if(s)switch(r.pathNotExistsAction()){case m.CREATE_FILE:return o.stat(p.dirname(t),!1,function(d,R){d?i(d):R&&!R.isDirectory()?i(c.ENOTDIR(p.dirname(t))):o.createFile(t,r,e,i)});case m.THROW_EXCEPTION:return i(c.ENOENT(t));default:return i(new c(u.EINVAL,"Invalid FileFlag object."))}else{if(h&&h.isDirectory())return i(c.EISDIR(t));switch(r.pathExistsAction()){case m.THROW_EXCEPTION:return i(c.EEXIST(t));case m.TRUNCATE_FILE:return o.openFile(t,r,function(d,R){d?i(d):R?R.truncate(0,function(){R.sync(function(){i(null,R)})}):P()});case m.NOP:return o.openFile(t,r,i);default:return i(new c(u.EINVAL,"Invalid FileFlag object."))}}};this.stat(t,!1,a)},K.prototype.rename=function(t,r,e){e(new c(u.ENOTSUP))},K.prototype.renameSync=function(t,r){throw new c(u.ENOTSUP)},K.prototype.stat=function(t,r,e){e(new c(u.ENOTSUP))},K.prototype.statSync=function(t,r){throw new c(u.ENOTSUP)},K.prototype.openFileSync=function(t,r,e){throw new c(u.ENOTSUP)},K.prototype.createFileSync=function(t,r,e){throw new c(u.ENOTSUP)},K.prototype.openSync=function(t,r,e){var i;try{i=this.statSync(t,!1)}catch{switch(r.pathNotExistsAction()){case m.CREATE_FILE:var o=this.statSync(p.dirname(t),!1);if(!o.isDirectory())throw c.ENOTDIR(p.dirname(t));return this.createFileSync(t,r,e);case m.THROW_EXCEPTION:throw c.ENOENT(t);default:throw new c(u.EINVAL,"Invalid FileFlag object.")}}if(i.isDirectory())throw c.EISDIR(t);switch(r.pathExistsAction()){case m.THROW_EXCEPTION:throw c.EEXIST(t);case m.TRUNCATE_FILE:return this.unlinkSync(t),this.createFileSync(t,r,i.mode);case m.NOP:return this.openFileSync(t,r,e);default:throw new c(u.EINVAL,"Invalid FileFlag object.")}},K.prototype.unlink=function(t,r){r(new c(u.ENOTSUP))},K.prototype.unlinkSync=function(t){throw new c(u.ENOTSUP)},K.prototype.rmdir=function(t,r){r(new c(u.ENOTSUP))},K.prototype.rmdirSync=function(t){throw new c(u.ENOTSUP)},K.prototype.mkdir=function(t,r,e){e(new c(u.ENOTSUP))},K.prototype.mkdirSync=function(t,r){throw new c(u.ENOTSUP)},K.prototype.readdir=function(t,r){r(new c(u.ENOTSUP))},K.prototype.readdirSync=function(t){throw new c(u.ENOTSUP)},K.prototype.exists=function(t,r){this.stat(t,null,function(e){r(!e)})},K.prototype.existsSync=function(t){try{return this.statSync(t,!0),!0}catch{return!1}},K.prototype.realpath=function(t,r,e){if(this.supportsLinks())for(var i=t.split(p.sep),o=0;o<i.length;o++){var a=i.slice(0,o+1);i[o]=p.join.apply(null,a)}else this.exists(t,function(s){s?e(null,t):e(c.ENOENT(t))})},K.prototype.realpathSync=function(t,r){if(this.supportsLinks()){for(var e=t.split(p.sep),i=0;i<e.length;i++){var o=e.slice(0,i+1);e[i]=p.join.apply(p,o)}return e.join(p.sep)}else{if(this.existsSync(t))return t;throw c.ENOENT(t)}},K.prototype.truncate=function(t,r,e){this.open(t,O.getFileFlag("r+"),420,function(i,o){if(i)return e(i);o.truncate(r,function(a){o.close(function(s){e(a||s)})})})},K.prototype.truncateSync=function(t,r){var e=this.openSync(t,O.getFileFlag("r+"),420);try{e.truncateSync(r)}catch(i){throw i}finally{e.closeSync()}},K.prototype.readFile=function(t,r,e,i){var o=i;this.open(t,e,420,function(a,s){if(a)return i(a);i=function(h,d){s.close(function(R){return h||(h=R),o(h,d)})},s.stat(function(h,d){if(h)return i(h);var R=I.alloc(d.size);s.read(R,0,d.size,0,function(L){if(L)return i(L);if(r===null)return i(L,R);try{i(null,R.toString(r))}catch(B){i(B)}})})})},K.prototype.readFileSync=function(t,r,e){var i=this.openSync(t,e,420);try{var o=i.statSync(),a=I.alloc(o.size);return i.readSync(a,0,o.size,0),i.closeSync(),r===null?a:a.toString(r)}finally{i.closeSync()}},K.prototype.writeFile=function(t,r,e,i,o,a){var s=a;this.open(t,i,420,function(h,d){if(h)return a(h);a=function(R){d.close(function(L){s(R||L)})};try{typeof r=="string"&&(r=I.from(r,e))}catch(R){return a(R)}d.write(r,0,r.length,0,a)})},K.prototype.writeFileSync=function(t,r,e,i,o){var a=this.openSync(t,i,o);try{typeof r=="string"&&(r=I.from(r,e)),a.writeSync(r,0,r.length,0)}finally{a.closeSync()}},K.prototype.appendFile=function(t,r,e,i,o,a){var s=a;this.open(t,i,o,function(h,d){if(h)return a(h);a=function(R){d.close(function(L){s(R||L)})},typeof r=="string"&&(r=I.from(r,e)),d.write(r,0,r.length,null,a)})},K.prototype.appendFileSync=function(t,r,e,i,o){var a=this.openSync(t,i,o);try{typeof r=="string"&&(r=I.from(r,e)),a.writeSync(r,0,r.length,null)}finally{a.closeSync()}},K.prototype.chmod=function(t,r,e,i){i(new c(u.ENOTSUP))},K.prototype.chmodSync=function(t,r,e){throw new c(u.ENOTSUP)},K.prototype.chown=function(t,r,e,i,o){o(new c(u.ENOTSUP))},K.prototype.chownSync=function(t,r,e,i){throw new c(u.ENOTSUP)},K.prototype.utimes=function(t,r,e,i){i(new c(u.ENOTSUP))},K.prototype.utimesSync=function(t,r,e){throw new c(u.ENOTSUP)},K.prototype.link=function(t,r,e){e(new c(u.ENOTSUP))},K.prototype.linkSync=function(t,r){throw new c(u.ENOTSUP)},K.prototype.symlink=function(t,r,e,i){i(new c(u.ENOTSUP))},K.prototype.symlinkSync=function(t,r,e){throw new c(u.ENOTSUP)},K.prototype.readlink=function(t,r){r(new c(u.ENOTSUP))},K.prototype.readlinkSync=function(t){throw new c(u.ENOTSUP)};var $t=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.supportsSynch=function(){return!0},t.prototype.rename=function(e,i,o){try{this.renameSync(e,i),o()}catch(a){o(a)}},t.prototype.stat=function(e,i,o){try{o(null,this.statSync(e,i))}catch(a){o(a)}},t.prototype.open=function(e,i,o,a){try{a(null,this.openSync(e,i,o))}catch(s){a(s)}},t.prototype.unlink=function(e,i){try{this.unlinkSync(e),i()}catch(o){i(o)}},t.prototype.rmdir=function(e,i){try{this.rmdirSync(e),i()}catch(o){i(o)}},t.prototype.mkdir=function(e,i,o){try{this.mkdirSync(e,i),o()}catch(a){o(a)}},t.prototype.readdir=function(e,i){try{i(null,this.readdirSync(e))}catch(o){i(o)}},t.prototype.chmod=function(e,i,o,a){try{this.chmodSync(e,i,o),a()}catch(s){a(s)}},t.prototype.chown=function(e,i,o,a,s){try{this.chownSync(e,i,o,a),s()}catch(h){s(h)}},t.prototype.utimes=function(e,i,o,a){try{this.utimesSync(e,i,o),a()}catch(s){a(s)}},t.prototype.link=function(e,i,o){try{this.linkSync(e,i),o()}catch(a){o(a)}},t.prototype.symlink=function(e,i,o,a){try{this.symlinkSync(e,i,o),a()}catch(s){a(s)}},t.prototype.readlink=function(e,i){try{i(null,this.readlinkSync(e))}catch(o){i(o)}},t}(K),yt=function(){};yt.prototype.sync=function(t){t(new c(u.ENOTSUP))},yt.prototype.syncSync=function(){throw new c(u.ENOTSUP)},yt.prototype.datasync=function(t){this.sync(t)},yt.prototype.datasyncSync=function(){return this.syncSync()},yt.prototype.chown=function(t,r,e){e(new c(u.ENOTSUP))},yt.prototype.chownSync=function(t,r){throw new c(u.ENOTSUP)},yt.prototype.chmod=function(t,r){r(new c(u.ENOTSUP))},yt.prototype.chmodSync=function(t){throw new c(u.ENOTSUP)},yt.prototype.utimes=function(t,r,e){e(new c(u.ENOTSUP))},yt.prototype.utimesSync=function(t,r){throw new c(u.ENOTSUP)};var re=function(n){function t(r,e,i,o,a){if(n.call(this),this._pos=0,this._dirty=!1,this._fs=r,this._path=e,this._flag=i,this._stat=o,a?this._buffer=a:this._buffer=xt(),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw new Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getBuffer=function(){return this._buffer},t.prototype.getStats=function(){return this._stat},t.prototype.getFlag=function(){return this._flag},t.prototype.getPath=function(){return this._path},t.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},t.prototype.advancePos=function(e){return this._pos+=e},t.prototype.setPos=function(e){return this._pos=e},t.prototype.sync=function(e){try{this.syncSync(),e()}catch(i){e(i)}},t.prototype.syncSync=function(){throw new c(u.ENOTSUP)},t.prototype.close=function(e){try{this.closeSync(),e()}catch(i){e(i)}},t.prototype.closeSync=function(){throw new c(u.ENOTSUP)},t.prototype.stat=function(e){try{e(null,this._stat.clone())}catch(i){e(i)}},t.prototype.statSync=function(){return this._stat.clone()},t.prototype.truncate=function(e,i){try{this.truncateSync(e),this._flag.isSynchronous()&&!st.getRootFS().supportsSynch()&&this.sync(i),i()}catch(o){return i(o)}},t.prototype.truncateSync=function(e){if(this._dirty=!0,!this._flag.isWriteable())throw new c(u.EPERM,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,e>this._buffer.length){var i=I.alloc(e-this._buffer.length,0);this.writeSync(i,0,i.length,this._buffer.length),this._flag.isSynchronous()&&st.getRootFS().supportsSynch()&&this.syncSync();return}this._stat.size=e;var o=I.alloc(e);this._buffer.copy(o,0,0,e),this._buffer=o,this._flag.isSynchronous()&&st.getRootFS().supportsSynch()&&this.syncSync()},t.prototype.write=function(e,i,o,a,s){try{s(null,this.writeSync(e,i,o,a),e)}catch(h){s(h)}},t.prototype.writeSync=function(e,i,o,a){if(this._dirty=!0,a==null&&(a=this.getPos()),!this._flag.isWriteable())throw new c(u.EPERM,"File not opened with a writeable mode.");var s=a+o;if(s>this._stat.size&&(this._stat.size=s,s>this._buffer.length)){var h=I.alloc(s);this._buffer.copy(h),this._buffer=h}var d=e.copy(this._buffer,a,i,i+o);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),d):(this.setPos(a+d),d)},t.prototype.read=function(e,i,o,a,s){try{s(null,this.readSync(e,i,o,a),e)}catch(h){s(h)}},t.prototype.readSync=function(e,i,o,a){if(!this._flag.isReadable())throw new c(u.EPERM,"File not opened with a readable mode.");a==null&&(a=this.getPos());var s=a+o;s>this._stat.size&&(o=this._stat.size-a);var h=this._buffer.copy(e,i,a,a+o);return this._stat.atime=new Date,this._pos=a+o,h},t.prototype.chmod=function(e,i){try{this.chmodSync(e),i()}catch(o){i(o)}},t.prototype.chmodSync=function(e){if(!this._fs.supportsProps())throw new c(u.ENOTSUP);this._dirty=!0,this._stat.chmod(e),this.syncSync()},t.prototype.isDirty=function(){return this._dirty},t.prototype.resetDirty=function(){this._dirty=!1},t}(yt),oe=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.close=function(e){e()},t.prototype.closeSync=function(){},t}(re),_e=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t}(re),_=function(n){function t(r,e,i){if(i===void 0&&(i=!0),n.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._initializeCallbacks=[],this._sync=r,this._async=e,!r.supportsSynch())throw new Error("The first argument to AsyncMirror needs to be a synchronous file system.");bt(i,t.Name,{sync:"sync file system instance",async:"async file system instance"})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){try{var o=new t(e.sync,e.async,!1);o.initialize(function(a){a?i(a):i(null,o)},!1)}catch(a){i(a)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){return t.Name},t.prototype._syncSync=function(e){this._sync.writeFileSync(e.getPath(),e.getBuffer(),null,O.getFileFlag("w"),e.getStats().mode),this.enqueueOp({apiMethod:"writeFile",arguments:[e.getPath(),e.getBuffer(),null,e.getFlag(),e.getStats().mode]})},t.prototype.initialize=function(e,i){var o=this;i===void 0&&(i=!0),i&&console.warn("[AsyncMirror] AsyncMirror.initialize() is deprecated and will be removed in the next major version. Please use 'AsyncMirror.Create({ sync: (sync file system instance), async: (async file system instance)}, cb)' to create and initialize AsyncMirror instances.");var a=this._initializeCallbacks,s=function(L){o._isInitialized=!L,o._initializeCallbacks=[],a.forEach(function(B){return B(L)})};if(this._isInitialized)e();else if(a.push(e)===1){var h=function(L,B,J){L!=="/"&&o._sync.mkdirSync(L,B),o._async.readdir(L,function(tt,ut){var pt=0;function It(Ht){Ht?J(Ht):pt<ut.length?(R(p.join(L,ut[pt]),It),pt++):J()}tt?J(tt):It()})},d=function(L,B,J){o._async.readFile(L,null,O.getFileFlag("r"),function(tt,ut){if(tt)J(tt);else try{o._sync.writeFileSync(L,ut,null,O.getFileFlag("w"),B)}catch(pt){tt=pt}finally{J(tt)}})},R=function(L,B){o._async.stat(L,!1,function(J,tt){J?B(J):tt.isDirectory()?h(L,tt.mode,B):d(L,tt.mode,B)})};h("/",0,s)}},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._sync.supportsProps()&&this._async.supportsProps()},t.prototype.renameSync=function(e,i){this.checkInitialized(),this._sync.renameSync(e,i),this.enqueueOp({apiMethod:"rename",arguments:[e,i]})},t.prototype.statSync=function(e,i){return this.checkInitialized(),this._sync.statSync(e,i)},t.prototype.openSync=function(e,i,o){this.checkInitialized();var a=this._sync.openSync(e,i,o);return a.closeSync(),new _e(this,e,i,this._sync.statSync(e,!1),this._sync.readFileSync(e,null,O.getFileFlag("r")))},t.prototype.unlinkSync=function(e){this.checkInitialized(),this._sync.unlinkSync(e),this.enqueueOp({apiMethod:"unlink",arguments:[e]})},t.prototype.rmdirSync=function(e){this.checkInitialized(),this._sync.rmdirSync(e),this.enqueueOp({apiMethod:"rmdir",arguments:[e]})},t.prototype.mkdirSync=function(e,i){this.checkInitialized(),this._sync.mkdirSync(e,i),this.enqueueOp({apiMethod:"mkdir",arguments:[e,i]})},t.prototype.readdirSync=function(e){return this.checkInitialized(),this._sync.readdirSync(e)},t.prototype.existsSync=function(e){return this.checkInitialized(),this._sync.existsSync(e)},t.prototype.chmodSync=function(e,i,o){this.checkInitialized(),this._sync.chmodSync(e,i,o),this.enqueueOp({apiMethod:"chmod",arguments:[e,i,o]})},t.prototype.chownSync=function(e,i,o,a){this.checkInitialized(),this._sync.chownSync(e,i,o,a),this.enqueueOp({apiMethod:"chown",arguments:[e,i,o,a]})},t.prototype.utimesSync=function(e,i,o){this.checkInitialized(),this._sync.utimesSync(e,i,o),this.enqueueOp({apiMethod:"utimes",arguments:[e,i,o]})},t.prototype.checkInitialized=function(){if(!this._isInitialized)throw new c(u.EPERM,"AsyncMirrorFS is not initialized. Please initialize AsyncMirrorFS using its initialize() method before using it.")},t.prototype.enqueueOp=function(e){var i=this;if(this._queue.push(e),!this._queueRunning){this._queueRunning=!0;var o=function(a){if(a&&console.error("WARNING: File system has desynchronized. Received following error: "+a+`
$`),i._queue.length>0){var s=i._queue.shift(),h=s.arguments;h.push(o),i._async[s.apiMethod].apply(i._async,h)}else i._queueRunning=!1};o()}},t}($t);_.Name="AsyncMirror",_.Options={sync:{type:"object",description:"The synchronous file system to mirror the asynchronous file system to."},async:{type:"object",description:"The asynchronous file system to mirror."}};function f(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}var l=Math.max;function S(n,t,r){return t=l(t===void 0?n.length-1:t,0),function(){for(var e=arguments,i=-1,o=l(e.length-t,0),a=Array(o);++i<o;)a[i]=e[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=e[i];return s[t]=r(a),f(n,this,s)}}function C(n){return n}function W(n,t){return S(n,t,C)}var Y=function(n){return W(function(t){var r=t.pop();n.call(this,t,r)})};function Ot(n){return W(function(t,r){var e=Y(function(i,o){var a=this;return n(t,function(s,h){s.apply(a,i.concat(h))},o)});return r.length?e.apply(this,r):e})}var Lt=typeof x=="object"&&x&&x.Object===Object&&x,Ct=typeof self=="object"&&self&&self.Object===Object&&self,Yt=Lt||Ct||Function("return this")(),At=Yt.Symbol,Se=Object.prototype,Ke=Se.hasOwnProperty,ze=Se.toString,je=At?At.toStringTag:void 0;function zr(n){var t=Ke.call(n,je),r=n[je];try{n[je]=void 0;var e=!0}catch{}var i=ze.call(n);return e&&(t?n[je]=r:delete n[je]),i}var jr=Object.prototype,Br=jr.toString;function z(n){return Br.call(n)}var it="[object Null]",y="[object Undefined]",at=At?At.toStringTag:void 0;function Mt(n){return n==null?n===void 0?y:it:at&&at in Object(n)?zr(n):z(n)}function nt(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var se="[object AsyncFunction]",ot="[object Function]",qt="[object GeneratorFunction]",Z="[object Proxy]";function V(n){if(!nt(n))return!1;var t=Mt(n);return t==ot||t==qt||t==se||t==Z}var Je=9007199254740991;function Ut(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Je}function ft(n){return n!=null&&Ut(n.length)&&!V(n)}var Be={};function Fe(){}function Bt(n){return function(){if(n!==null){var t=n;n=null,t.apply(this,arguments)}}}var Ft=typeof Symbol=="function"&&Symbol.iterator,te=function(n){return Ft&&n[Ft]&&n[Ft]()};function ae(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function ee(n){return n!=null&&typeof n=="object"}var Qe="[object Arguments]";function We(n){return ee(n)&&Mt(n)==Qe}var Vt=Object.prototype,ue=Vt.hasOwnProperty,Qt=Vt.propertyIsEnumerable,Ee=We(function(){return arguments}())?We:function(n){return ee(n)&&ue.call(n,"callee")&&!Qt.call(n,"callee")},ve=Array.isArray;function mr(){return!1}var sn=typeof A=="object"&&A&&!A.nodeType&&A,un=sn&&typeof E=="object"&&E&&!E.nodeType&&E,Ii=un&&un.exports===sn,cn=Ii?Yt.Buffer:void 0,ki=cn?cn.isBuffer:void 0,bi=ki||mr,Oi=9007199254740991,Ri=/^(?:0|[1-9]\d*)$/;function Ni(n,t){return t=t??Oi,!!t&&(typeof n=="number"||Ri.test(n))&&n>-1&&n%1==0&&n<t}var Fi="[object Arguments]",Ti="[object Array]",Li="[object Boolean]",Di="[object Date]",Ai="[object Error]",xi="[object Function]",Ci="[object Map]",Mi="[object Number]",Ui="[object Object]",Pi="[object RegExp]",zi="[object Set]",ji="[object String]",Bi="[object WeakMap]",Wi="[object ArrayBuffer]",Hi="[object DataView]",Vi="[object Float32Array]",Zi="[object Float64Array]",Xi="[object Int8Array]",Yi="[object Int16Array]",qi="[object Int32Array]",Gi="[object Uint8Array]",Ki="[object Uint8ClampedArray]",Ji="[object Uint16Array]",Qi="[object Uint32Array]",Pt={};Pt[Vi]=Pt[Zi]=Pt[Xi]=Pt[Yi]=Pt[qi]=Pt[Gi]=Pt[Ki]=Pt[Ji]=Pt[Qi]=!0,Pt[Fi]=Pt[Ti]=Pt[Wi]=Pt[Li]=Pt[Hi]=Pt[Di]=Pt[Ai]=Pt[xi]=Pt[Ci]=Pt[Mi]=Pt[Ui]=Pt[Pi]=Pt[zi]=Pt[ji]=Pt[Bi]=!1;function $i(n){return ee(n)&&Ut(n.length)&&!!Pt[Mt(n)]}function to(n){return function(t){return n(t)}}var fn=typeof A=="object"&&A&&!A.nodeType&&A,ln=fn&&typeof E=="object"&&E&&!E.nodeType&&E,eo=ln&&ln.exports===fn,Wr=eo&&Lt.process,hn=function(){try{return Wr&&Wr.binding&&Wr.binding("util")}catch{}}(),pn=hn&&hn.isTypedArray,ro=pn?to(pn):$i,no=Object.prototype,io=no.hasOwnProperty;function oo(n,t){var r=ve(n),e=!r&&Ee(n),i=!r&&!e&&bi(n),o=!r&&!e&&!i&&ro(n),a=r||e||i||o,s=a?ae(n.length,String):[],h=s.length;for(var d in n)(t||io.call(n,d))&&!(a&&(d=="length"||i&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Ni(d,h)))&&s.push(d);return s}var ao=Object.prototype;function so(n){var t=n&&n.constructor,r=typeof t=="function"&&t.prototype||ao;return n===r}function uo(n,t){return function(r){return n(t(r))}}var co=uo(Object.keys,Object),fo=Object.prototype,lo=fo.hasOwnProperty;function ho(n){if(!so(n))return co(n);var t=[];for(var r in Object(n))lo.call(n,r)&&r!="constructor"&&t.push(r);return t}function po(n){return ft(n)?oo(n):ho(n)}function yo(n){var t=-1,r=n.length;return function(){return++t<r?{value:n[t],key:t}:null}}function vo(n){var t=-1;return function(){var e=n.next();return e.done?null:(t++,{value:e.value,key:t})}}function go(n){var t=po(n),r=-1,e=t.length;return function(){var o=t[++r];return r<e?{value:n[o],key:o}:null}}function wo(n){if(ft(n))return yo(n);var t=te(n);return t?vo(t):go(n)}function dn(n){return function(){if(n===null)throw new Error("Callback was already called.");var t=n;n=null,t.apply(this,arguments)}}function yn(n){return function(t,r,e){if(e=Bt(e||Fe),n<=0||!t)return e(null);var i=wo(t),o=!1,a=0;function s(d,R){if(a-=1,d)o=!0,e(d);else{if(R===Be||o&&a<=0)return o=!0,e(null);h()}}function h(){for(;a<n&&!o;){var d=i();if(d===null){o=!0,a<=0&&e(null);return}a+=1,r(d.value,d.key,dn(s))}}h()}}function vn(n,t,r,e){yn(t)(n,r,e)}function Hr(n,t){return function(r,e,i){return n(r,t,e,i)}}function mo(n,t,r){r=Bt(r||Fe);var e=0,i=0,o=n.length;o===0&&r(null);function a(s,h){s?r(s):(++i===o||h===Be)&&r(null)}for(;e<o;e++)t(n[e],e,dn(a))}var _o=Hr(vn,1/0),gn=function(n,t,r){var e=ft(n)?mo:_o;e(n,t,r)};function So(n){return function(t,r,e){return n(gn,t,r,e)}}function wn(n,t,r,e){e=e||Fe,t=t||[];var i=[],o=0;n(t,function(a,s,h){var d=o++;r(a,function(R,L){i[d]=L,h(R)})},function(a){e(a,i)})}var Eo=So(wn);Ot(Eo);function Io(n){return function(t,r,e,i){return n(yn(r),t,e,i)}}var ko=Io(wn),bo=Hr(ko,1);Ot(bo),W(function(n,t){return W(function(r){return n.apply(null,t.concat(r))})});function Oo(n,t){for(var r=-1,e=n==null?0:n.length;++r<e&&t(n[r],r,n)!==!1;);return n}var mn=typeof setImmediate=="function"&&setImmediate,_n=typeof N=="object"&&typeof N.nextTick=="function";function Sn(n){setTimeout(n,0)}function En(n){return W(function(t,r){n(function(){t.apply(null,r)})})}var _r;mn?_r=setImmediate:_n?_r=N.nextTick:_r=Sn,En(_r);var Ro=Hr(vn,1);function No(n,t,r,e){e=Bt(e||Fe),Ro(n,function(i,o,a){r(t,i,function(s,h){t=h,a(s)})},function(i){e(i,t)})}var Fo=W(function(t){return W(function(r){var e=this,i=r[r.length-1];typeof i=="function"?r.pop():i=Fe,No(t,r,function(o,a,s){a.apply(e,o.concat(W(function(h,d){s(h,d)})))},function(o,a){i.apply(e,[o].concat(a))})})});W(function(n){return Fo.apply(null,n.reverse())}),W(function(n){var t=[null].concat(n);return Y(function(r,e){return e.apply(this,t)})});function In(n){return W(function(t,r){t.apply(null,r.concat(W(function(e,i){typeof console=="object"&&(e?console.error&&console.error(e):console[n]&&Oo(i,function(o){console[n](o)}))})))})}In("dir");function To(n){return function(t,r,e){return n(t,e)}}function kn(n,t,r){gn(n,To(t),r)}In("log");var Sr;_n?Sr=N.nextTick:mn?Sr=setImmediate:Sr=Sn,En(Sr);var ce;function Lo(){ce||(ce={},ce[Dropbox.ApiError.NETWORK_ERROR]=u.EIO,ce[Dropbox.ApiError.INVALID_PARAM]=u.EINVAL,ce[Dropbox.ApiError.INVALID_TOKEN]=u.EPERM,ce[Dropbox.ApiError.OAUTH_ERROR]=u.EPERM,ce[Dropbox.ApiError.NOT_FOUND]=u.ENOENT,ce[Dropbox.ApiError.INVALID_METHOD]=u.EINVAL,ce[Dropbox.ApiError.NOT_ACCEPTABLE]=u.EINVAL,ce[Dropbox.ApiError.CONFLICT]=u.EINVAL,ce[Dropbox.ApiError.RATE_LIMITED]=u.EBUSY,ce[Dropbox.ApiError.SERVER_ERROR]=u.EBUSY,ce[Dropbox.ApiError.OVER_QUOTA]=u.ENOSPC)}function Do(n){return n&&n.stat.isFile}function Ao(n){return n&&n.stat.isFolder}function xo(n){return n==null||typeof n=="object"&&typeof n.byteLength=="number"}var ne=function(t){this._cache={},this._client=t};ne.prototype.readdir=function(t,r){var e=this,i=this.getCachedDirInfo(t);this._wrap(function(o){i!==null&&i.contents?e._client.readdir(t,{contentHash:i.stat.contentHash},o):e._client.readdir(t,o)},function(o,a,s,h){o?o.status===Dropbox.ApiError.NO_CONTENT&&i!==null?r(null,i.contents.slice(0)):r(o):(e.updateCachedDirInfo(t,s,a.slice(0)),h.forEach(function(d){e.updateCachedInfo(p.join(t,d.name),d)}),r(null,a))})},ne.prototype.remove=function(t,r){var e=this;this._wrap(function(i){e._client.remove(t,i)},function(i,o){i||e.updateCachedInfo(t,o),r(i)})},ne.prototype.move=function(t,r,e){var i=this;this._wrap(function(o){i._client.move(t,r,o)},function(o,a){o||(i.deleteCachedInfo(t),i.updateCachedInfo(r,a)),e(o)})},ne.prototype.stat=function(t,r){var e=this;this._wrap(function(i){e._client.stat(t,i)},function(i,o){i||e.updateCachedInfo(t,o),r(i,o)})},ne.prototype.readFile=function(t,r){var e=this,i=this.getCachedFileInfo(t);i!==null&&i.contents!==null?this.stat(t,function(o,a){o?r(o):a.contentHash===i.stat.contentHash?r(o,i.contents.slice(0),i.stat):e.readFile(t,r)}):this._wrap(function(o){e._client.readFile(t,{arrayBuffer:!0},o)},function(o,a,s){o||e.updateCachedInfo(t,s,a.slice(0)),r(o,a,s)})},ne.prototype.writeFile=function(t,r,e){var i=this;this._wrap(function(o){i._client.writeFile(t,r,o)},function(o,a){o||i.updateCachedInfo(t,a,r.slice(0)),e(o,a)})},ne.prototype.mkdir=function(t,r){var e=this;this._wrap(function(i){e._client.mkdir(t,i)},function(i,o){i||e.updateCachedInfo(t,o,[]),r(i)})},ne.prototype._wrap=function(t,r){var e=0,i=function(o){var a=2;if(o&&3>++e)switch(o.status){case Dropbox.ApiError.SERVER_ERROR:case Dropbox.ApiError.NETWORK_ERROR:case Dropbox.ApiError.RATE_LIMITED:setTimeout(function(){t(i)},a*1e3);break;default:r.apply(null,arguments);break}else r.apply(null,arguments)};t(i)},ne.prototype.getCachedInfo=function(t){return this._cache[t.toLowerCase()]},ne.prototype.putCachedInfo=function(t,r){this._cache[t.toLowerCase()]=r},ne.prototype.deleteCachedInfo=function(t){delete this._cache[t.toLowerCase()]},ne.prototype.getCachedDirInfo=function(t){var r=this.getCachedInfo(t);return Ao(r)?r:null},ne.prototype.getCachedFileInfo=function(t){var r=this.getCachedInfo(t);return Do(r)?r:null},ne.prototype.updateCachedDirInfo=function(t,r,e){e===void 0&&(e=null);var i=this.getCachedInfo(t);r.contentHash!==null&&(i===void 0||i.stat.contentHash!==r.contentHash)&&this.putCachedInfo(t,{stat:r,contents:e})},ne.prototype.updateCachedFileInfo=function(t,r,e){e===void 0&&(e=null);var i=this.getCachedInfo(t);r.versionTag!==null&&(i===void 0||i.stat.versionTag!==r.versionTag)&&this.putCachedInfo(t,{stat:r,contents:e})},ne.prototype.updateCachedInfo=function(t,r,e){e===void 0&&(e=null),r.isFile&&xo(e)?this.updateCachedFileInfo(t,r,e):r.isFolder&&Array.isArray(e)&&this.updateCachedDirInfo(t,r,e)};var Co=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;if(this.isDirty()){var o=this.getBuffer(),a=G(o);this._fs._writeFileStrict(this.getPath(),a,function(s){s||i.resetDirty(),e(s)})}else e()},t.prototype.close=function(e){this.sync(e)},t}(re),Er=function(n){function t(r,e){e===void 0&&(e=!0),n.call(this),this._client=new ne(r),bt(e,t.Name,{client:"authenticated dropbox client instance"}),Lo()}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t(e.client,!1))},t.isAvailable=function(){return typeof Dropbox<"u"},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.empty=function(e){var i=this;this._client.readdir("/",function(o,a){if(o)e(i.convert(o,"/"));else{var s=function(d,R){var L=p.join("/",d);i._client.remove(L,function(B){R(B?i.convert(B,L):null)})},h=function(d){d?e(d):e()};kn(a,s,h)}})},t.prototype.rename=function(e,i,o){var a=this;this._client.move(e,i,function(s){s?a._client.stat(i,function(h,d){if(h||d.isFolder){var R=s.response.error.indexOf(e)>-1?e:i;o(a.convert(s,R))}else a._client.remove(i,function(L){L?o(a.convert(L,i)):a.rename(e,i,o)})}):o()})},t.prototype.stat=function(e,i,o){var a=this;this._client.stat(e,function(s,h){if(s)o(a.convert(s,e));else if(h&&h.isRemoved)o(c.FileError(u.ENOENT,e));else{var d=new D(a._statType(h),h.size);return o(null,d)}})},t.prototype.open=function(e,i,o,a){var s=this;this._client.readFile(e,function(h,d,R){if(h)if(i.isReadable())a(s.convert(h,e));else switch(h.status){case Dropbox.ApiError.NOT_FOUND:var L=new ArrayBuffer(0);return s._writeFileStrict(e,L,function(tt,ut){if(tt)a(tt);else{var pt=s._makeFile(e,i,ut,mt(L));a(null,pt)}});default:return a(s.convert(h,e))}else{var B;d===null?B=xt():B=mt(d);var J=s._makeFile(e,i,R,B);return a(null,J)}})},t.prototype._writeFileStrict=function(e,i,o){var a=this,s=p.dirname(e);this.stat(s,!1,function(h,d){h?o(c.FileError(u.ENOENT,s)):a._client.writeFile(e,i,function(R,L){R?o(a.convert(R,e)):o(null,L)})})},t.prototype._statType=function(e){return e.isFile?T.FILE:T.DIRECTORY},t.prototype._makeFile=function(e,i,o,a){var s=this._statType(o),h=new D(s,o.size);return new Co(this,e,i,h,a)},t.prototype._remove=function(e,i,o){var a=this;this._client.stat(e,function(s,h){s?i(a.convert(s,e)):h.isFile&&!o?i(c.FileError(u.ENOTDIR,e)):!h.isFile&&o?i(c.FileError(u.EISDIR,e)):a._client.remove(e,function(d){i(d?a.convert(d,e):null)})})},t.prototype.unlink=function(e,i){this._remove(e,i,!0)},t.prototype.rmdir=function(e,i){this._remove(e,i,!1)},t.prototype.mkdir=function(e,i,o){var a=this,s=p.dirname(e);this._client.stat(s,function(h,d){h?o(a.convert(h,s)):a._client.mkdir(e,function(R){o(R?c.FileError(u.EEXIST,e):null)})})},t.prototype.readdir=function(e,i){var o=this;this._client.readdir(e,function(a,s){return a?i(o.convert(a)):i(null,s)})},t.prototype.convert=function(e,i){i===void 0&&(i=null);var o=ce[e.status];return o===void 0&&(o=u.EIO),i?c.FileError(o,i):new c(o)},t}(K);Er.Name="Dropbox",Er.Options={client:{type:"object",description:"An *authenticated* Dropbox client. Must be from the 0.10 JS SDK.",validator:function(n,t){n.isAuthenticated&&n.isAuthenticated()?t():t(new c(u.EINVAL,"'client' option must be an authenticated Dropbox client from the v0.10 JS SDK."))}}};function Zt(n,t){t===void 0&&(t="");for(var r=n.errno,e=n.node,i=[];e&&(i.unshift(e.name),e!==e.parent);)e=e.parent;return new c(r,g[r],i.length>0?"/"+i.join("/"):t)}var Mo=function(n){function t(r,e,i,o){n.call(this),this._fs=r,this._FS=e,this._path=i,this._stream=o}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getPos=function(){},t.prototype.close=function(e){var i=null;try{this.closeSync()}catch(o){i=o}finally{e(i)}},t.prototype.closeSync=function(){try{this._FS.close(this._stream)}catch(e){throw Zt(e,this._path)}},t.prototype.stat=function(e){try{e(null,this.statSync())}catch(i){e(i)}},t.prototype.statSync=function(){try{return this._fs.statSync(this._path,!1)}catch(e){throw Zt(e,this._path)}},t.prototype.truncate=function(e,i){var o=null;try{this.truncateSync(e)}catch(a){o=a}finally{i(o)}},t.prototype.truncateSync=function(e){try{this._FS.ftruncate(this._stream.fd,e)}catch(i){throw Zt(i,this._path)}},t.prototype.write=function(e,i,o,a,s){try{s(null,this.writeSync(e,i,o,a),e)}catch(h){s(h)}},t.prototype.writeSync=function(e,i,o,a){try{var s=ct(e),h=a===null?void 0:a;return this._FS.write(this._stream,s,i,o,h)}catch(d){throw Zt(d,this._path)}},t.prototype.read=function(e,i,o,a,s){try{s(null,this.readSync(e,i,o,a),e)}catch(h){s(h)}},t.prototype.readSync=function(e,i,o,a){try{var s=ct(e),h=a===null?void 0:a;return this._FS.read(this._stream,s,i,o,h)}catch(d){throw Zt(d,this._path)}},t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.chown=function(e,i,o){var a=null;try{this.chownSync(e,i)}catch(s){a=s}finally{o(a)}},t.prototype.chownSync=function(e,i){try{this._FS.fchown(this._stream.fd,e,i)}catch(o){throw Zt(o,this._path)}},t.prototype.chmod=function(e,i){var o=null;try{this.chmodSync(e)}catch(a){o=a}finally{i(o)}},t.prototype.chmodSync=function(e){try{this._FS.fchmod(this._stream.fd,e)}catch(i){throw Zt(i,this._path)}},t.prototype.utimes=function(e,i,o){var a=null;try{this.utimesSync(e,i)}catch(s){a=s}finally{o(a)}},t.prototype.utimesSync=function(e,i){this._fs.utimesSync(this._path,e,i)},t}(yt),Ir=function(n){function t(r){n.call(this),this._FS=r}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t(e.FS))},t.isAvailable=function(){return!0},t.prototype.getName=function(){return this._FS.DB_NAME()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsLinks=function(){return!0},t.prototype.supportsProps=function(){return!0},t.prototype.supportsSynch=function(){return!0},t.prototype.renameSync=function(e,i){try{this._FS.rename(e,i)}catch(o){throw o.errno===u.ENOENT?Zt(o,this.existsSync(e)?i:e):Zt(o)}},t.prototype.statSync=function(e,i){try{var o=i?this._FS.lstat(e):this._FS.stat(e),a=this.modeToFileType(o.mode);return new D(a,o.size,o.mode,o.atime,o.mtime,o.ctime)}catch(s){throw Zt(s,e)}},t.prototype.openSync=function(e,i,o){try{var a=this._FS.open(e,i.getFlagString(),o);if(this._FS.isDir(a.node.mode))throw this._FS.close(a),c.EISDIR(e);return new Mo(this,this._FS,e,a)}catch(s){throw Zt(s,e)}},t.prototype.unlinkSync=function(e){try{this._FS.unlink(e)}catch(i){throw Zt(i,e)}},t.prototype.rmdirSync=function(e){try{this._FS.rmdir(e)}catch(i){throw Zt(i,e)}},t.prototype.mkdirSync=function(e,i){try{this._FS.mkdir(e,i)}catch(o){throw Zt(o,e)}},t.prototype.readdirSync=function(e){try{return this._FS.readdir(e).filter(function(i){return i!=="."&&i!==".."})}catch(i){throw Zt(i,e)}},t.prototype.truncateSync=function(e,i){try{this._FS.truncate(e,i)}catch(o){throw Zt(o,e)}},t.prototype.readFileSync=function(e,i,o){try{var a=this._FS.readFile(e,{flags:o.getFlagString()}),s=vt(a);return i?s.toString(i):s}catch(h){throw Zt(h,e)}},t.prototype.writeFileSync=function(e,i,o,a,s){try{o&&(i=I.from(i,o));var h=ct(i);this._FS.writeFile(e,h,{flags:a.getFlagString(),encoding:"binary"}),this._FS.chmod(e,s)}catch(d){throw Zt(d,e)}},t.prototype.chmodSync=function(e,i,o){try{i?this._FS.lchmod(e,o):this._FS.chmod(e,o)}catch(a){throw Zt(a,e)}},t.prototype.chownSync=function(e,i,o,a){try{i?this._FS.lchown(e,o,a):this._FS.chown(e,o,a)}catch(s){throw Zt(s,e)}},t.prototype.symlinkSync=function(e,i,o){try{this._FS.symlink(e,i)}catch(a){throw Zt(a)}},t.prototype.readlinkSync=function(e){try{return this._FS.readlink(e)}catch(i){throw Zt(i,e)}},t.prototype.utimesSync=function(e,i,o){try{this._FS.utime(e,i.getTime(),o.getTime())}catch(a){throw Zt(a,e)}},t.prototype.modeToFileType=function(e){if(this._FS.isDir(e))return T.DIRECTORY;if(this._FS.isFile(e))return T.FILE;if(this._FS.isLink(e))return T.SYMLINK;throw c.EPERM("Invalid mode: "+e)},t}($t);Ir.Name="EmscriptenFileSystem",Ir.Options={FS:{type:"object",description:"The Emscripten file system to use (the `FS` variable)"}};var $e=function(n){function t(r,e){n.call(this),this._folder=r,this._wrapped=e}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t(e.folder,e.wrapped))},t.isAvailable=function(){return!0},t.prototype.initialize=function(e){var i=this;this._wrapped.exists(this._folder,function(o){o?e():i._wrapped.isReadOnly()?e(c.ENOENT(i._folder)):i._wrapped.mkdir(i._folder,511,e)})},t.prototype.getName=function(){return this._wrapped.getName()},t.prototype.isReadOnly=function(){return this._wrapped.isReadOnly()},t.prototype.supportsProps=function(){return this._wrapped.supportsProps()},t.prototype.supportsSynch=function(){return this._wrapped.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t}(K);$e.Name="FolderAdapter",$e.Options={folder:{type:"string",description:"The folder to use as the root directory"},wrapped:{type:"object",description:"The file system to wrap"}};function bn(n,t){if(t!==null&&typeof t=="object"){var r=t,e=r.path;e&&(e="/"+p.relative(n,e),r.message=r.message.replace(r.path,e),r.path=e)}return t}function Uo(n,t){return typeof t=="function"?function(r){arguments.length>0&&(arguments[0]=bn(n,r)),t.apply(null,arguments)}:t}function On(n,t,r){return n.slice(n.length-4)!=="Sync"?function(){return arguments.length>0&&(t&&(arguments[0]=p.join(this._folder,arguments[0])),r&&(arguments[1]=p.join(this._folder,arguments[1])),arguments[arguments.length-1]=Uo(this._folder,arguments[arguments.length-1])),this._wrapped[n].apply(this._wrapped,arguments)}:function(){try{return t&&(arguments[0]=p.join(this._folder,arguments[0])),r&&(arguments[1]=p.join(this._folder,arguments[1])),this._wrapped[n].apply(this._wrapped,arguments)}catch(e){throw bn(this._folder,e)}}}["diskSpace","stat","statSync","open","openSync","unlink","unlinkSync","rmdir","rmdirSync","mkdir","mkdirSync","readdir","readdirSync","exists","existsSync","realpath","realpathSync","truncate","truncateSync","readFile","readFileSync","writeFile","writeFileSync","appendFile","appendFileSync","chmod","chmodSync","chown","chownSync","utimes","utimesSync","readlink","readlinkSync"].forEach(function(n){$e.prototype[n]=On(n,!0,!1)}),["rename","renameSync","link","linkSync","symlink","symlinkSync"].forEach(function(n){$e.prototype[n]=On(n,!0,!0)});var kr;typeof window<"u"?kr=window:typeof self<"u"?kr=self:kr=x;var Gt=kr;function Po(n){return n.isDirectory}var Vr=Gt.webkitRequestFileSystem||Gt.requestFileSystem||null;function zo(n,t,r,e){if(typeof navigator.webkitPersistentStorage<"u")switch(n){case Gt.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(t,r,e);break;case Gt.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(t,r,e);break;default:e(new TypeError("Invalid storage type: "+n));break}else Gt.webkitStorageInfo.requestQuota(n,t,r,e)}function jo(n){return Array.prototype.slice.call(n||[],0)}function ke(n,t,r){switch(n.name){case"PathExistsError":return c.EEXIST(t);case"QuotaExceededError":return c.FileError(u.ENOSPC,t);case"NotFoundError":return c.ENOENT(t);case"SecurityError":return c.FileError(u.EACCES,t);case"InvalidModificationError":return c.FileError(u.EPERM,t);case"TypeMismatchError":return c.FileError(r?u.ENOTDIR:u.EISDIR,t);case"EncodingError":case"InvalidStateError":case"NoModificationAllowedError":default:return c.FileError(u.EINVAL,t)}}var Bo=function(n){function t(r,e,i,o,a,s){n.call(this,r,i,o,a,s),this._entry=e}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;if(!this.isDirty())return e();this._entry.createWriter(function(o){var a=i.getBuffer(),s=new Blob([G(a)]),h=s.size;o.onwriteend=function(d){o.onwriteend=null,o.onerror=null,o.truncate(h),i.resetDirty(),e()},o.onerror=function(d){e(ke(d,i.getPath(),!1))},o.write(s)})},t.prototype.close=function(e){this.sync(e)},t}(re),br=function(n){function t(r,e,i){r===void 0&&(r=5),e===void 0&&(e=Gt.PERSISTENT),i===void 0&&(i=!0),n.call(this),this.size=1024*1024*r,this.type=e,bt(i,t.Name,{size:r,type:e})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o=new t(e.size,e.type,!1);o.allocate(function(a){return a?i(a):i(null,o)},!1)},t.isAvailable=function(){return!!Vr},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.allocate=function(e,i){var o=this;e===void 0&&(e=function(){}),i===void 0&&(i=!0),i&&console.warn("[HTML5FS] HTML5FS.allocate() is deprecated and will be removed in the next major release. Please use 'HTML5FS.Create({type: "+this.type+", size: "+this.size+"}, cb)' to create and allocate HTML5FS instances.");var a=function(h){o.fs=h,e()},s=function(h){e(ke(h,"/",!0))};this.type===Gt.PERSISTENT?zo(this.type,this.size,function(h){Vr(o.type,h,a,s)},s):Vr(this.type,this.size,a,s)},t.prototype.empty=function(e){this._readdir("/",function(i,o){if(i)console.error("Failed to empty FS"),e(i);else{var a=function(h){i?(console.error("Failed to empty FS"),e(i)):e()},s=function(h,d){var R=function(){d()},L=function(B){d(ke(B,h.fullPath,!h.isDirectory))};Po(h)?h.removeRecursively(R,L):h.remove(R,L)};kn(o,s,a)}})},t.prototype.rename=function(e,i,o){var a=this,s=2,h=0,d=this.fs.root,R=e,L=function(J){--s<=0&&o(ke(J,R,!1))},B=function(J){if(++h===2)return o(new c(u.EINVAL,"Something was identified as both a file and a directory. This should never happen."));if(e===i)return o();R=p.dirname(i),d.getDirectory(R,{},function(tt){R=p.basename(i),J.moveTo(tt,R,function(ut){o()},function(ut){J.isDirectory?(R=i,a.unlink(i,function(pt){pt?L(ut):a.rename(e,i,o)})):L(ut)})},L)};d.getFile(e,{},B,L),d.getDirectory(e,{},B,L)},t.prototype.stat=function(e,i,o){var a=this,s={create:!1},h=function(B){var J=function(tt){var ut=new D(T.FILE,tt.size);o(null,ut)};B.file(J,R)},d=function(B){var J=4096,tt=new D(T.DIRECTORY,J);o(null,tt)},R=function(B){o(ke(B,e,!1))},L=function(){a.fs.root.getDirectory(e,s,d,R)};this.fs.root.getFile(e,s,h,L)},t.prototype.open=function(e,i,o,a){var s=this,h=function(d){d.name==="InvalidModificationError"&&i.isExclusive()?a(c.EEXIST(e)):a(ke(d,e,!1))};this.fs.root.getFile(e,{create:i.pathNotExistsAction()===m.CREATE_FILE,exclusive:i.isExclusive()},function(d){d.file(function(R){var L=new FileReader;L.onloadend=function(B){var J=s._makeFile(e,d,i,R,L.result);a(null,J)},L.onerror=function(B){h(L.error)},L.readAsArrayBuffer(R)},h)},h)},t.prototype.unlink=function(e,i){this._remove(e,i,!0)},t.prototype.rmdir=function(e,i){var o=this;this.readdir(e,function(a,s){a?i(a):s.length>0?i(c.ENOTEMPTY(e)):o._remove(e,i,!1)})},t.prototype.mkdir=function(e,i,o){var a={create:!0,exclusive:!0},s=function(d){o()},h=function(d){o(ke(d,e,!0))};this.fs.root.getDirectory(e,a,s,h)},t.prototype.readdir=function(e,i){this._readdir(e,function(o,a){if(a){for(var s=[],h=0,d=a;h<d.length;h+=1){var R=d[h];s.push(R.name)}i(null,s)}else return i(o)})},t.prototype._makeFile=function(e,i,o,a,s){s===void 0&&(s=new ArrayBuffer(0));var h=new D(T.FILE,a.size),d=mt(s);return new Bo(this,i,e,o,h,d)},t.prototype._readdir=function(e,i){var o=function(a){i(ke(a,e,!0))};this.fs.root.getDirectory(e,{create:!1},function(a){var s=a.createReader(),h=[],d=function(){s.readEntries(function(R){R.length?(h=h.concat(jo(R)),d()):i(null,h)},o)};d()},o)},t.prototype._remove=function(e,i,o){var a=function(d){var R=function(){i()},L=function(B){i(ke(B,e,!o))};d.remove(R,L)},s=function(d){i(ke(d,e,!o))},h={create:!1};o?this.fs.root.getFile(e,h,a,s):this.fs.root.getDirectory(e,h,a,s)},t}(K);br.Name="HTML5FS",br.Options={size:{type:"number",optional:!0,description:"Storage quota to request, in megabytes. Allocated value may be less. Defaults to 5."},type:{type:"number",optional:!0,description:"window.PERSISTENT or window.TEMPORARY. Defaults to PERSISTENT."}};var fe=function(t,r,e,i,o,a){this.id=t,this.size=r,this.mode=e,this.atime=i,this.mtime=o,this.ctime=a};fe.fromBuffer=function(t){if(t===void 0)throw new Error("NO");return new fe(t.toString("ascii",30),t.readUInt32LE(0),t.readUInt16LE(4),t.readDoubleLE(6),t.readDoubleLE(14),t.readDoubleLE(22))},fe.prototype.toStats=function(){return new D((this.mode&61440)===T.DIRECTORY?T.DIRECTORY:T.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},fe.prototype.getSize=function(){return 30+this.id.length},fe.prototype.toBuffer=function(t){return t===void 0&&(t=I.alloc(this.getSize())),t.writeUInt32LE(this.size,0),t.writeUInt16LE(this.mode,4),t.writeDoubleLE(this.atime,6),t.writeDoubleLE(this.mtime,14),t.writeDoubleLE(this.ctime,22),t.write(this.id,30,this.id.length,"ascii"),t},fe.prototype.update=function(t){var r=!1;this.size!==t.size&&(this.size=t.size,r=!0),this.mode!==t.mode&&(this.mode=t.mode,r=!0);var e=t.atime.getTime();this.atime!==e&&(this.atime=e,r=!0);var i=t.mtime.getTime();this.mtime!==i&&(this.mtime=i,r=!0);var o=t.ctime.getTime();return this.ctime!==o&&(this.ctime=o,r=!0),r},fe.prototype.isFile=function(){return(this.mode&61440)===T.FILE},fe.prototype.isDirectory=function(){return(this.mode&61440)===T.DIRECTORY};var Ue="/",Zr=null;function Rn(){return Zr||(Zr=I.from("{}"))}function Or(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,r=n==="x"?t:t&3|8;return r.toString(16)})}function pe(n,t){return n?(t(n),!1):!0}function Jt(n,t,r){return n?(t.abort(function(){r(n)}),!1):!0}var Te=function(t){this.store=t,this.originalData={},this.modifiedKeys=[]};Te.prototype.get=function(t){var r=this.store.get(t);return this.stashOldValue(t,r),r},Te.prototype.put=function(t,r,e){return this.markModified(t),this.store.put(t,r,e)},Te.prototype.del=function(t){this.markModified(t),this.store.del(t)},Te.prototype.commit=function(){},Te.prototype.abort=function(){for(var t=this,r=0,e=t.modifiedKeys;r<e.length;r+=1){var i=e[r],o=t.originalData[i];o?t.store.put(i,o,!0):t.store.del(i)}},Te.prototype.stashOldValue=function(t,r){this.originalData.hasOwnProperty(t)||(this.originalData[t]=r)},Te.prototype.markModified=function(t){this.modifiedKeys.indexOf(t)===-1&&(this.modifiedKeys.push(t),this.originalData.hasOwnProperty(t)||(this.originalData[t]=this.store.get(t)))};var Nn=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t}(re),Fn=function(n){function t(r){n.call(this),this.store=r.store,this.makeRootDirectory()}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.getName=function(){return this.store.name()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.empty=function(){this.store.clear(),this.makeRootDirectory()},t.prototype.renameSync=function(e,i){var o=this.store.beginTransaction("readwrite"),a=p.dirname(e),s=p.basename(e),h=p.dirname(i),d=p.basename(i),R=this.findINode(o,a),L=this.getDirListing(o,a,R);if(!L[s])throw c.ENOENT(e);var B=L[s];if(delete L[s],(h+"/").indexOf(e+"/")===0)throw new c(u.EBUSY,a);var J,tt;if(h===a?(J=R,tt=L):(J=this.findINode(o,h),tt=this.getDirListing(o,h,J)),tt[d]){var ut=this.getINode(o,i,tt[d]);if(ut.isFile())try{o.del(ut.id),o.del(tt[d])}catch(pt){throw o.abort(),pt}else throw c.EPERM(i)}tt[d]=B;try{o.put(R.id,I.from(JSON.stringify(L)),!0),o.put(J.id,I.from(JSON.stringify(tt)),!0)}catch(pt){throw o.abort(),pt}o.commit()},t.prototype.statSync=function(e,i){return this.findINode(this.store.beginTransaction("readonly"),e).toStats()},t.prototype.createFileSync=function(e,i,o){var a=this.store.beginTransaction("readwrite"),s=xt(),h=this.commitNewFile(a,e,T.FILE,o,s);return new Nn(this,e,i,h.toStats(),s)},t.prototype.openFileSync=function(e,i){var o=this.store.beginTransaction("readonly"),a=this.findINode(o,e),s=o.get(a.id);if(s===void 0)throw c.ENOENT(e);return new Nn(this,e,i,a.toStats(),s)},t.prototype.unlinkSync=function(e){this.removeEntry(e,!1)},t.prototype.rmdirSync=function(e){if(this.readdirSync(e).length>0)throw c.ENOTEMPTY(e);this.removeEntry(e,!0)},t.prototype.mkdirSync=function(e,i){var o=this.store.beginTransaction("readwrite"),a=I.from("{}");this.commitNewFile(o,e,T.DIRECTORY,i,a)},t.prototype.readdirSync=function(e){var i=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(i,e,this.findINode(i,e)))},t.prototype._syncSync=function(e,i,o){var a=this.store.beginTransaction("readwrite"),s=this._findINode(a,p.dirname(e),p.basename(e)),h=this.getINode(a,e,s),d=h.update(o);try{a.put(h.id,i,!0),d&&a.put(s,h.toBuffer(),!0)}catch(R){throw a.abort(),R}a.commit()},t.prototype.makeRootDirectory=function(){var e=this.store.beginTransaction("readwrite");if(e.get(Ue)===void 0){var i=new Date().getTime(),o=new fe(Or(),4096,511|T.DIRECTORY,i,i,i);e.put(o.id,Rn(),!1),e.put(Ue,o.toBuffer(),!1),e.commit()}},t.prototype._findINode=function(e,i,o){var a=this,s=function(h){var d=a.getDirListing(e,i,h);if(d[o])return d[o];throw c.ENOENT(p.resolve(i,o))};return i==="/"?o===""?Ue:s(this.getINode(e,i,Ue)):s(this.getINode(e,i+p.sep+o,this._findINode(e,p.dirname(i),p.basename(i))))},t.prototype.findINode=function(e,i){return this.getINode(e,i,this._findINode(e,p.dirname(i),p.basename(i)))},t.prototype.getINode=function(e,i,o){var a=e.get(o);if(a===void 0)throw c.ENOENT(i);return fe.fromBuffer(a)},t.prototype.getDirListing=function(e,i,o){if(!o.isDirectory())throw c.ENOTDIR(i);var a=e.get(o.id);if(a===void 0)throw c.ENOENT(i);return JSON.parse(a.toString())},t.prototype.addNewNode=function(e,i){for(var o=0,a;o<5;)try{return a=Or(),e.put(a,i,!1),a}catch{}throw new c(u.EIO,"Unable to commit data to key-value store.")},t.prototype.commitNewFile=function(e,i,o,a,s){var h=p.dirname(i),d=p.basename(i),R=this.findINode(e,h),L=this.getDirListing(e,h,R),B=new Date().getTime();if(i==="/"||L[d])throw c.EEXIST(i);var J;try{var tt=this.addNewNode(e,s);J=new fe(tt,s.length,a|o,B,B,B);var ut=this.addNewNode(e,J.toBuffer());L[d]=ut,e.put(R.id,I.from(JSON.stringify(L)),!0)}catch(pt){throw e.abort(),pt}return e.commit(),J},t.prototype.removeEntry=function(e,i){var o=this.store.beginTransaction("readwrite"),a=p.dirname(e),s=this.findINode(o,a),h=this.getDirListing(o,a,s),d=p.basename(e);if(!h[d])throw c.ENOENT(e);var R=h[d];delete h[d];var L=this.getINode(o,e,R);if(!i&&L.isDirectory())throw c.EISDIR(e);if(i&&!L.isDirectory())throw c.ENOTDIR(e);try{o.del(L.id),o.del(R),o.put(s.id,I.from(JSON.stringify(h)),!0)}catch(B){throw o.abort(),B}o.commit()},t}($t),Tn=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),function(o){o||i.resetDirty(),e(o)}):e()},t.prototype.close=function(e){this.sync(e)},t}(re),Wo=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.init=function(e,i){this.store=e,this.makeRootDirectory(i)},t.prototype.getName=function(){return this.store.name()},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.empty=function(e){var i=this;this.store.clear(function(o){pe(o,e)&&i.makeRootDirectory(e)})},t.prototype.rename=function(e,i,o){var a=this,s=this.store.beginTransaction("readwrite"),h=p.dirname(e),d=p.basename(e),R=p.dirname(i),L=p.basename(i),B={},J={},tt=!1;if((R+"/").indexOf(e+"/")===0)return o(new c(u.EBUSY,h));var ut=function(){if(!(tt||!J.hasOwnProperty(h)||!J.hasOwnProperty(R))){var It=J[h],Ht=B[h],ie=J[R],Re=B[R];if(!It[d])o(c.ENOENT(e));else{var Ne=It[d];delete It[d];var ar=function(){ie[L]=Ne,s.put(Ht.id,I.from(JSON.stringify(It)),!0,function(Ae){Jt(Ae,s,o)&&(h===R?s.commit(o):s.put(Re.id,I.from(JSON.stringify(ie)),!0,function(xe){Jt(xe,s,o)&&s.commit(o)}))})};ie[L]?a.getINode(s,i,ie[L],function(Ae,xe){Jt(Ae,s,o)&&(xe.isFile()?s.del(xe.id,function(gi){Jt(gi,s,o)&&s.del(ie[L],function(va){Jt(va,s,o)&&ar()})}):s.abort(function(gi){o(c.EPERM(i))}))}):ar()}}},pt=function(It){a.findINodeAndDirListing(s,It,function(Ht,ie,Re){Ht?tt||(tt=!0,s.abort(function(){o(Ht)})):(B[It]=ie,J[It]=Re,ut())})};pt(h),h!==R&&pt(R)},t.prototype.stat=function(e,i,o){var a=this.store.beginTransaction("readonly");this.findINode(a,e,function(s,h){pe(s,o)&&o(null,h.toStats())})},t.prototype.createFile=function(e,i,o,a){var s=this,h=this.store.beginTransaction("readwrite"),d=xt();this.commitNewFile(h,e,T.FILE,o,d,function(R,L){pe(R,a)&&a(null,new Tn(s,e,i,L.toStats(),d))})},t.prototype.openFile=function(e,i,o){var a=this,s=this.store.beginTransaction("readonly");this.findINode(s,e,function(h,d){pe(h,o)&&s.get(d.id,function(R,L){pe(R,o)&&(L===void 0?o(c.ENOENT(e)):o(null,new Tn(a,e,i,d.toStats(),L)))})})},t.prototype.unlink=function(e,i){this.removeEntry(e,!1,i)},t.prototype.rmdir=function(e,i){var o=this;this.readdir(e,function(a,s){a?i(a):s.length>0?i(c.ENOTEMPTY(e)):o.removeEntry(e,!0,i)})},t.prototype.mkdir=function(e,i,o){var a=this.store.beginTransaction("readwrite"),s=I.from("{}");this.commitNewFile(a,e,T.DIRECTORY,i,s,o)},t.prototype.readdir=function(e,i){var o=this,a=this.store.beginTransaction("readonly");this.findINode(a,e,function(s,h){pe(s,i)&&o.getDirListing(a,e,h,function(d,R){pe(d,i)&&i(null,Object.keys(R))})})},t.prototype._sync=function(e,i,o,a){var s=this,h=this.store.beginTransaction("readwrite");this._findINode(h,p.dirname(e),p.basename(e),function(d,R){Jt(d,h,a)&&s.getINode(h,e,R,function(L,B){if(Jt(L,h,a)){var J=B.update(o);h.put(B.id,i,!0,function(tt){Jt(tt,h,a)&&(J?h.put(R,B.toBuffer(),!0,function(ut){Jt(ut,h,a)&&h.commit(a)}):h.commit(a))})}})})},t.prototype.makeRootDirectory=function(e){var i=this.store.beginTransaction("readwrite");i.get(Ue,function(o,a){if(o||a===void 0){var s=new Date().getTime(),h=new fe(Or(),4096,511|T.DIRECTORY,s,s,s);i.put(h.id,Rn(),!1,function(d){Jt(d,i,e)&&i.put(Ue,h.toBuffer(),!1,function(R){R?i.abort(function(){e(R)}):i.commit(e)})})}else i.commit(e)})},t.prototype._findINode=function(e,i,o,a){var s=this,h=function(d,R,L){d?a(d):L[o]?a(null,L[o]):a(c.ENOENT(p.resolve(i,o)))};i==="/"?o===""?a(null,Ue):this.getINode(e,i,Ue,function(d,R){pe(d,a)&&s.getDirListing(e,i,R,function(L,B){h(L,R,B)})}):this.findINodeAndDirListing(e,i,h)},t.prototype.findINode=function(e,i,o){var a=this;this._findINode(e,p.dirname(i),p.basename(i),function(s,h){pe(s,o)&&a.getINode(e,i,h,o)})},t.prototype.getINode=function(e,i,o,a){e.get(o,function(s,h){pe(s,a)&&(h===void 0?a(c.ENOENT(i)):a(null,fe.fromBuffer(h)))})},t.prototype.getDirListing=function(e,i,o,a){o.isDirectory()?e.get(o.id,function(s,h){if(pe(s,a))try{a(null,JSON.parse(h.toString()))}catch{a(c.ENOENT(i))}}):a(c.ENOTDIR(i))},t.prototype.findINodeAndDirListing=function(e,i,o){var a=this;this.findINode(e,i,function(s,h){pe(s,o)&&a.getDirListing(e,i,h,function(d,R){pe(d,o)&&o(null,h,R)})})},t.prototype.addNewNode=function(e,i,o){var a=0,s,h=function(){++a===5?o(new c(u.EIO,"Unable to commit data to key-value store.")):(s=Or(),e.put(s,i,!1,function(d,R){d||!R?h():o(null,s)}))};h()},t.prototype.commitNewFile=function(e,i,o,a,s,h){var d=this,R=p.dirname(i),L=p.basename(i),B=new Date().getTime();if(i==="/")return h(c.EEXIST(i));this.findINodeAndDirListing(e,R,function(J,tt,ut){Jt(J,e,h)&&(ut[L]?e.abort(function(){h(c.EEXIST(i))}):d.addNewNode(e,s,function(pt,It){if(Jt(pt,e,h)){var Ht=new fe(It,s.length,a|o,B,B,B);d.addNewNode(e,Ht.toBuffer(),function(ie,Re){Jt(ie,e,h)&&(ut[L]=Re,e.put(tt.id,I.from(JSON.stringify(ut)),!0,function(Ne){Jt(Ne,e,h)&&e.commit(function(ar){Jt(ar,e,h)&&h(null,Ht)})}))})}}))})},t.prototype.removeEntry=function(e,i,o){var a=this,s=this.store.beginTransaction("readwrite"),h=p.dirname(e),d=p.basename(e);this.findINodeAndDirListing(s,h,function(R,L,B){if(Jt(R,s,o))if(!B[d])s.abort(function(){o(c.ENOENT(e))});else{var J=B[d];delete B[d],a.getINode(s,e,J,function(tt,ut){Jt(tt,s,o)&&(!i&&ut.isDirectory()?s.abort(function(){o(c.EISDIR(e))}):i&&!ut.isDirectory()?s.abort(function(){o(c.ENOTDIR(e))}):s.del(ut.id,function(pt){Jt(pt,s,o)&&s.del(J,function(It){Jt(It,s,o)&&s.put(L.id,I.from(JSON.stringify(B)),!0,function(Ht){Jt(Ht,s,o)&&s.commit(o)})})}))})}})},t}(K),He=function(){this.store={}};He.prototype.name=function(){return tr.Name},He.prototype.clear=function(){this.store={}},He.prototype.beginTransaction=function(t){return new Te(this)},He.prototype.get=function(t){return this.store[t]},He.prototype.put=function(t,r,e){return!e&&this.store.hasOwnProperty(t)?!1:(this.store[t]=r,!0)},He.prototype.del=function(t){delete this.store[t]};var tr=function(n){function t(){n.call(this,{store:new He})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t)},t}(Fn);tr.Name="InMemory",tr.Options={};var Xr=Gt.indexedDB||Gt.mozIndexedDB||Gt.webkitIndexedDB||Gt.msIndexedDB;function ur(n,t){switch(t===void 0&&(t=n.toString()),n.name){case"NotFoundError":return new c(u.ENOENT,t);case"QuotaExceededError":return new c(u.ENOSPC,t);default:return new c(u.EIO,t)}}function cr(n,t,r){return t===void 0&&(t=u.EIO),r===void 0&&(r=null),function(e){e.preventDefault(),n(new c(t,r!==null?r:void 0))}}var Yr=function(t,r){this.tx=t,this.store=r};Yr.prototype.get=function(t,r){try{var e=this.store.get(t);e.onerror=cr(r),e.onsuccess=function(i){var o=i.target.result;o===void 0?r(null,o):r(null,mt(o))}}catch(i){r(ur(i))}};var Ho=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.put=function(e,i,o,a){try{var s=G(i),h;o?h=this.store.put(s,e):h=this.store.add(s,e),h.onerror=cr(a),h.onsuccess=function(d){a(null,!0)}}catch(d){a(ur(d))}},t.prototype.del=function(e,i){try{var o=this.store.delete(e);o.onerror=cr(i),o.onsuccess=function(a){i()}}catch(a){i(ur(a))}},t.prototype.commit=function(e){setTimeout(e,0)},t.prototype.abort=function(e){var i=null;try{this.tx.abort()}catch(o){i=ur(o)}finally{e(i)}},t}(Yr),Rr=function(t,r){var e=this;r===void 0&&(r="browserfs"),this.storeName=r;var i=Xr.open(this.storeName,1);i.onupgradeneeded=function(o){var a=o.target.result;a.objectStoreNames.contains(e.storeName)&&a.deleteObjectStore(e.storeName),a.createObjectStore(e.storeName)},i.onsuccess=function(o){e.db=o.target.result,t(null,e)},i.onerror=cr(t,u.EACCES)};Rr.prototype.name=function(){return fr.Name+" - "+this.storeName},Rr.prototype.clear=function(t){try{var r=this.db.transaction(this.storeName,"readwrite"),e=r.objectStore(this.storeName),i=e.clear();i.onsuccess=function(o){setTimeout(t,0)},i.onerror=cr(t)}catch(o){t(ur(o))}},Rr.prototype.beginTransaction=function(t){t===void 0&&(t="readonly");var r=this.db.transaction(this.storeName,t),e=r.objectStore(this.storeName);if(t==="readwrite")return new Ho(r,e);if(t==="readonly")return new Yr(r,e);throw new c(u.EINVAL,"Invalid transaction type.")};var fr=function(n){function t(r,e,i){var o=this;i===void 0&&(i=!0),n.call(this),this.store=new Rr(function(a){a?r(a):o.init(o.store,function(s){r(s,o)})},e),bt(i,t.Name,{storeName:e})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){new t(i,e.storeName,!1)},t.isAvailable=function(){try{return typeof Xr<"u"&&Xr.open("__browserfs_test__")!==null}catch{return!1}},t}(Wo);fr.Name="IndexedDB",fr.Options={storeName:{type:"string",optional:!0,description:"The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name."}};var qr=!1,lr;try{Gt.localStorage.setItem("__test__","\uD800"),qr=Gt.localStorage.getItem("__test__")==="\uD800"}catch{qr=!1}lr=qr?"binary_string":"binary_string_ie",I.isEncoding(lr)||(lr="base64");var Ve=function(){};Ve.prototype.name=function(){return hr.Name},Ve.prototype.clear=function(){Gt.localStorage.clear()},Ve.prototype.beginTransaction=function(t){return new Te(this)},Ve.prototype.get=function(t){try{var r=Gt.localStorage.getItem(t);if(r!==null)return I.from(r,lr)}catch{}},Ve.prototype.put=function(t,r,e){try{return!e&&Gt.localStorage.getItem(t)!==null?!1:(Gt.localStorage.setItem(t,r.toString(lr)),!0)}catch{throw new c(u.ENOSPC,"LocalStorage is full.")}},Ve.prototype.del=function(t){try{Gt.localStorage.removeItem(t)}catch(r){throw new c(u.EIO,"Unable to delete key "+t+": "+r)}};var hr=function(n){function t(){n.call(this,{store:new Ve})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){i(null,new t)},t.isAvailable=function(){return typeof Gt.localStorage<"u"},t}(Fn);hr.Name="LocalStorage",hr.Options={};var er=function(n){function t(){n.call(this),this.mountList=[],this.mntMap={},this.rootFs=new tr}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o=new t;Object.keys(e).forEach(function(a){o.mount(a,e[a])}),i(null,o)},t.isAvailable=function(){return!0},t.prototype.mount=function(e,i){if(e[0]!=="/"&&(e="/"+e),e=p.resolve(e),this.mntMap[e])throw new c(u.EINVAL,"Mount point "+e+" is already taken.");M(e,511,this.rootFs),this.mntMap[e]=i,this.mountList.push(e),this.mountList=this.mountList.sort(function(o,a){return a.length-o.length})},t.prototype.umount=function(e){var i=this;if(e[0]!=="/"&&(e="/"+e),e=p.resolve(e),!this.mntMap[e])throw new c(u.EINVAL,"Mount point "+e+" is already unmounted.");for(delete this.mntMap[e],this.mountList.splice(this.mountList.indexOf(e),1);e!=="/"&&i.rootFs.readdirSync(e).length===0;)i.rootFs.rmdirSync(e),e=p.dirname(e)},t.prototype._getFs=function(e){for(var i=this,o=this.mountList,a=o.length,s=0;s<a;s++){var h=o[s];if(h.length<=e.length&&e.indexOf(h)===0)return e=e.substr(h.length>1?h.length:0),e===""&&(e="/"),{fs:i.mntMap[h],path:e}}return{fs:this.rootFs,path:e}},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,i){i(0,0)},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.standardizeError=function(e,i,o){var a=e.message.indexOf(i);return a!==-1&&(e.message=e.message.substr(0,a)+o+e.message.substr(a+i.length),e.path=o),e},t.prototype.rename=function(e,i,o){var a=this,s=this._getFs(e),h=this._getFs(i);return s.fs===h.fs?s.fs.rename(s.path,h.path,function(d){d&&a.standardizeError(a.standardizeError(d,s.path,e),h.path,i),o(d)}):st.readFile(e,function(d,R){if(d)return o(d);st.writeFile(i,R,function(L){if(L)return o(L);st.unlink(e,o)})})},t.prototype.renameSync=function(e,i){var o=this._getFs(e),a=this._getFs(i);if(o.fs===a.fs)try{return o.fs.renameSync(o.path,a.path)}catch(h){throw this.standardizeError(this.standardizeError(h,o.path,e),a.path,i),h}var s=st.readFileSync(e);return st.writeFileSync(i,s),st.unlinkSync(e)},t.prototype.readdirSync=function(e){var i=this._getFs(e),o=null;if(i.fs!==this.rootFs)try{o=this.rootFs.readdirSync(e)}catch{}try{var a=i.fs.readdirSync(i.path);return o===null?a:a.concat(o.filter(function(s){return a.indexOf(s)===-1}))}catch(s){if(o===null)throw this.standardizeError(s,i.path,e);return o}},t.prototype.readdir=function(e,i){var o=this,a=this._getFs(e);a.fs.readdir(a.path,function(s,h){if(a.fs!==o.rootFs)try{var d=o.rootFs.readdirSync(e);h?h=h.concat(d.filter(function(R){return h.indexOf(R)===-1})):h=d}catch{if(s)return i(o.standardizeError(s,a.path,e))}else if(s)return i(o.standardizeError(s,a.path,e));i(null,h)})},t.prototype.rmdirSync=function(e){var i=this._getFs(e);if(this._containsMountPt(e))throw c.ENOTEMPTY(e);try{i.fs.rmdirSync(i.path)}catch(o){throw this.standardizeError(o,i.path,e)}},t.prototype.rmdir=function(e,i){var o=this,a=this._getFs(e);this._containsMountPt(e)?i(c.ENOTEMPTY(e)):a.fs.rmdir(a.path,function(s){i(s?o.standardizeError(s,a.path,e):null)})},t.prototype._containsMountPt=function(e){for(var i=this.mountList,o=i.length,a=0;a<o;a++){var s=i[a];if(s.length>=e.length&&s.slice(0,e.length)===e)return!0}return!1},t}(K);er.Name="MountableFileSystem",er.Options={};function Ln(n,t,r){return t?function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];var o=e[0],a=this._getFs(o);e[0]=a.path;try{return a.fs[n].apply(a.fs,e)}catch(s){throw this.standardizeError(s,a.path,o),s}}:function(){for(var e=this,i=[],o=arguments.length;o--;)i[o]=arguments[o];var a=i[0],s=this._getFs(a);if(i[0]=s.path,typeof i[i.length-1]=="function"){var h=i[i.length-1];i[i.length-1]=function(){for(var d=[],R=arguments.length;R--;)d[R]=arguments[R];d.length>0&&d[0]instanceof c&&e.standardizeError(d[0],s.path,a),h.apply(null,d)}}return s.fs[n].apply(s.fs,i)}}for(var Dn=[["exists","unlink","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]],Gr=0;Gr<Dn.length;Gr++)for(var Vo=Dn[Gr],Kr=0,An=Vo;Kr<An.length;Kr+=1){var Nr=An[Kr];er.prototype[Nr]=Ln(Nr,!1),er.prototype[Nr+"Sync"]=Ln(Nr+"Sync",!0)}var pr;if(typeof setImmediate<"u")pr=setImmediate;else{var ge=Gt,rr=[],xn="zero-timeout-message",Zo=function(){if(typeof ge.importScripts<"u"||!ge.postMessage)return!1;var n=!0,t=ge.onmessage;return ge.onmessage=function(){n=!1},ge.postMessage("","*"),ge.onmessage=t,n};if(Zo()){pr=function(n){rr.push(n),ge.postMessage(xn,"*")};var Cn=function(n){if(n.source===self&&n.data===xn&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0,rr.length>0)){var t=rr.shift();return t()}};ge.addEventListener?ge.addEventListener("message",Cn,!0):ge.attachEvent("onmessage",Cn)}else if(ge.MessageChannel){var Mn=new ge.MessageChannel;Mn.port1.onmessage=function(n){if(rr.length>0)return rr.shift()()},pr=function(n){rr.push(n),Mn.port2.postMessage("")}}else pr=function(n){return setTimeout(n,0)}}var Jr=pr,dr=function(){this._locked=!1,this._waiters=[]};dr.prototype.lock=function(t){if(this._locked){this._waiters.push(t);return}this._locked=!0,t()},dr.prototype.unlock=function(){if(!this._locked)throw new Error("unlock of a non-locked mutex");var t=this._waiters.shift();if(t){Jr(t);return}this._locked=!1},dr.prototype.tryLock=function(){return this._locked?!1:(this._locked=!0,!0)},dr.prototype.isLocked=function(){return this._locked};var gt=function(t){this._fs=t,this._mu=new dr};gt.prototype.getName=function(){return"LockedFS<"+this._fs.getName()+">"},gt.prototype.getFSUnlocked=function(){return this._fs},gt.prototype.initialize=function(t){this._fs.initialize(t)},gt.prototype.diskSpace=function(t,r){this._fs.diskSpace(t,r)},gt.prototype.isReadOnly=function(){return this._fs.isReadOnly()},gt.prototype.supportsLinks=function(){return this._fs.supportsLinks()},gt.prototype.supportsProps=function(){return this._fs.supportsProps()},gt.prototype.supportsSynch=function(){return this._fs.supportsSynch()},gt.prototype.rename=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.rename(t,r,function(o){i._mu.unlock(),e(o)})})},gt.prototype.renameSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.renameSync(t,r)},gt.prototype.stat=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.stat(t,r,function(o,a){i._mu.unlock(),e(o,a)})})},gt.prototype.statSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.statSync(t,r)},gt.prototype.open=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.open(t,r,e,function(a,s){o._mu.unlock(),i(a,s)})})},gt.prototype.openSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.openSync(t,r,e)},gt.prototype.unlink=function(t,r){var e=this;this._mu.lock(function(){e._fs.unlink(t,function(i){e._mu.unlock(),r(i)})})},gt.prototype.unlinkSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.unlinkSync(t)},gt.prototype.rmdir=function(t,r){var e=this;this._mu.lock(function(){e._fs.rmdir(t,function(i){e._mu.unlock(),r(i)})})},gt.prototype.rmdirSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.rmdirSync(t)},gt.prototype.mkdir=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.mkdir(t,r,function(o){i._mu.unlock(),e(o)})})},gt.prototype.mkdirSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.mkdirSync(t,r)},gt.prototype.readdir=function(t,r){var e=this;this._mu.lock(function(){e._fs.readdir(t,function(i,o){e._mu.unlock(),r(i,o)})})},gt.prototype.readdirSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readdirSync(t)},gt.prototype.exists=function(t,r){var e=this;this._mu.lock(function(){e._fs.exists(t,function(i){e._mu.unlock(),r(i)})})},gt.prototype.existsSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.existsSync(t)},gt.prototype.realpath=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.realpath(t,r,function(o,a){i._mu.unlock(),e(o,a)})})},gt.prototype.realpathSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.realpathSync(t,r)},gt.prototype.truncate=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.truncate(t,r,function(o){i._mu.unlock(),e(o)})})},gt.prototype.truncateSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.truncateSync(t,r)},gt.prototype.readFile=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.readFile(t,r,e,function(a,s){o._mu.unlock(),i(a,s)})})},gt.prototype.readFileSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readFileSync(t,r,e)},gt.prototype.writeFile=function(t,r,e,i,o,a){var s=this;this._mu.lock(function(){s._fs.writeFile(t,r,e,i,o,function(h){s._mu.unlock(),a(h)})})},gt.prototype.writeFileSync=function(t,r,e,i,o){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.writeFileSync(t,r,e,i,o)},gt.prototype.appendFile=function(t,r,e,i,o,a){var s=this;this._mu.lock(function(){s._fs.appendFile(t,r,e,i,o,function(h){s._mu.unlock(),a(h)})})},gt.prototype.appendFileSync=function(t,r,e,i,o){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.appendFileSync(t,r,e,i,o)},gt.prototype.chmod=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.chmod(t,r,e,function(a){o._mu.unlock(),i(a)})})},gt.prototype.chmodSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chmodSync(t,r,e)},gt.prototype.chown=function(t,r,e,i,o){var a=this;this._mu.lock(function(){a._fs.chown(t,r,e,i,function(s){a._mu.unlock(),o(s)})})},gt.prototype.chownSync=function(t,r,e,i){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chownSync(t,r,e,i)},gt.prototype.utimes=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.utimes(t,r,e,function(a){o._mu.unlock(),i(a)})})},gt.prototype.utimesSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.utimesSync(t,r,e)},gt.prototype.link=function(t,r,e){var i=this;this._mu.lock(function(){i._fs.link(t,r,function(o){i._mu.unlock(),e(o)})})},gt.prototype.linkSync=function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.linkSync(t,r)},gt.prototype.symlink=function(t,r,e,i){var o=this;this._mu.lock(function(){o._fs.symlink(t,r,e,function(a){o._mu.unlock(),i(a)})})},gt.prototype.symlinkSync=function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.symlinkSync(t,r,e)},gt.prototype.readlink=function(t,r){var e=this;this._mu.lock(function(){e._fs.readlink(t,function(i,o){e._mu.unlock(),r(i,o)})})},gt.prototype.readlinkSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readlinkSync(t)};var Le="/.deletedFiles.log";function Un(n){return 146|n}function de(n){return O.getFileFlag(n)}var Pn=function(n){function t(r,e,i,o,a){n.call(this,r,e,i,o,a)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var i=this;if(!this.isDirty()){e(null);return}this._fs._syncAsync(this,function(o){i.resetDirty(),e(o)})},t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.close=function(e){this.sync(e)},t.prototype.closeSync=function(){this.syncSync()},t}(re),zn=function(n){function t(r,e){if(n.call(this),this._isInitialized=!1,this._initializeCallbacks=[],this._deletedFiles={},this._deleteLog="",this._deleteLogUpdatePending=!1,this._deleteLogUpdateNeeded=!1,this._deleteLogError=null,this._writable=r,this._readable=e,this._writable.isReadOnly())throw new c(u.EINVAL,"Writable file system must be writable.")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.getOverlayedFileSystems=function(){return{readable:this._readable,writable:this._writable}},t.prototype._syncAsync=function(e,i){var o=this;this.createParentDirectoriesAsync(e.getPath(),function(a){if(a)return i(a);o._writable.writeFile(e.getPath(),e.getBuffer(),null,de("w"),e.getStats().mode,i)})},t.prototype._syncSync=function(e){this.createParentDirectories(e.getPath()),this._writable.writeFileSync(e.getPath(),e.getBuffer(),null,de("w"),e.getStats().mode)},t.prototype.getName=function(){return yr.Name},t.prototype.initialize=function(e){var i=this,o=this._initializeCallbacks,a=function(s){i._isInitialized=!s,i._initializeCallbacks=[],o.forEach(function(h){return h(s)})};if(this._isInitialized)return e();o.push(e),o.length===1&&this._writable.readFile(Le,"utf8",de("r"),function(s,h){if(s){if(s.errno!==u.ENOENT)return a(s)}else i._deleteLog=h;i._reparseDeletionLog(),a()})},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return this._readable.supportsSynch()&&this._writable.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._readable.supportsProps()&&this._writable.supportsProps()},t.prototype.getDeletionLog=function(){return this._deleteLog},t.prototype.restoreDeletionLog=function(e){this._deleteLog=e,this._reparseDeletionLog(),this.updateLog("")},t.prototype.rename=function(e,i,o){var a=this;if(!(!this.checkInitAsync(o)||this.checkPathAsync(e,o)||this.checkPathAsync(i,o))){if(e===Le||i===Le)return o(c.EPERM("Cannot rename deletion log."));if(e===i)return o();this.stat(e,!1,function(s,h){return s?o(s):a.stat(i,!1,function(d,R){var L=a;function B(tt){var ut=tt.shift();if(!ut)return o();var pt=p.resolve(e,ut),It=p.resolve(i,ut);L.rename(pt,It,function(Ht){if(Ht)return o(Ht);B(tt)})}var J=511;if(h.isDirectory()){if(d)return d.errno!==u.ENOENT?o(d):a._writable.exists(e,function(tt){if(tt)return a._writable.rename(e,i,o);a._writable.mkdir(i,J,function(ut){if(ut)return o(ut);a._readable.readdir(e,function(pt,It){if(pt)return o();B(It)})})});if(J=R.mode,!R.isDirectory())return o(c.ENOTDIR(i));a.readdir(i,function(tt,ut){if(ut&&ut.length)return o(c.ENOTEMPTY(i));a._readable.readdir(e,function(pt,It){if(pt)return o();B(It)})})}if(R&&R.isDirectory())return o(c.EISDIR(i));a.readFile(e,null,de("r"),function(tt,ut){return tt?o(tt):a.writeFile(i,ut,null,de("w"),h.mode,function(pt){return pt?o(pt):a.unlink(e,o)})})})})}},t.prototype.renameSync=function(e,i){var o=this;if(this.checkInitialized(),this.checkPath(e),this.checkPath(i),e===Le||i===Le)throw c.EPERM("Cannot rename deletion log.");var a=this.statSync(e,!1);if(a.isDirectory()){if(e===i)return;var s=511;if(this.existsSync(i)){var h=this.statSync(i,!1);if(s=h.mode,h.isDirectory()){if(this.readdirSync(i).length>0)throw c.ENOTEMPTY(i)}else throw c.ENOTDIR(i)}this._writable.existsSync(e)?this._writable.renameSync(e,i):this._writable.existsSync(i)||this._writable.mkdirSync(i,s),this._readable.existsSync(e)&&this._readable.readdirSync(e).forEach(function(d){o.renameSync(p.resolve(e,d),p.resolve(i,d))})}else{if(this.existsSync(i)&&this.statSync(i,!1).isDirectory())throw c.EISDIR(i);this.writeFileSync(i,this.readFileSync(e,null,de("r")),null,de("w"),a.mode)}e!==i&&this.existsSync(e)&&this.unlinkSync(e)},t.prototype.stat=function(e,i,o){var a=this;this.checkInitAsync(o)&&this._writable.stat(e,i,function(s,h){s&&s.errno===u.ENOENT?(a._deletedFiles[e]&&o(c.ENOENT(e)),a._readable.stat(e,i,function(d,R){R&&(R=R.clone(),R.mode=Un(R.mode)),o(d,R)})):o(s,h)})},t.prototype.statSync=function(e,i){this.checkInitialized();try{return this._writable.statSync(e,i)}catch{if(this._deletedFiles[e])throw c.ENOENT(e);var o=this._readable.statSync(e,i).clone();return o.mode=Un(o.mode),o}},t.prototype.open=function(e,i,o,a){var s=this;!this.checkInitAsync(a)||this.checkPathAsync(e,a)||this.stat(e,!1,function(h,d){if(d)switch(i.pathExistsAction()){case m.TRUNCATE_FILE:return s.createParentDirectoriesAsync(e,function(R){if(R)return a(R);s._writable.open(e,i,o,a)});case m.NOP:return s._writable.exists(e,function(R){R?s._writable.open(e,i,o,a):(d=d.clone(),d.mode=o,s._readable.readFile(e,null,de("r"),function(L,B){if(L)return a(L);d.size===-1&&(d.size=B.length);var J=new Pn(s,e,i,d,B);a(null,J)}))});default:return a(c.EEXIST(e))}else switch(i.pathNotExistsAction()){case m.CREATE_FILE:return s.createParentDirectoriesAsync(e,function(R){return R?a(R):s._writable.open(e,i,o,a)});default:return a(c.ENOENT(e))}})},t.prototype.openSync=function(e,i,o){if(this.checkInitialized(),this.checkPath(e),e===Le)throw c.EPERM("Cannot open deletion log.");if(this.existsSync(e))switch(i.pathExistsAction()){case m.TRUNCATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,i,o);case m.NOP:if(this._writable.existsSync(e))return this._writable.openSync(e,i,o);var a=this._readable.readFileSync(e,null,de("r")),s=this._readable.statSync(e,!1).clone();return s.mode=o,new Pn(this,e,i,s,a);default:throw c.EEXIST(e)}else switch(i.pathNotExistsAction()){case m.CREATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,i,o);default:throw c.ENOENT(e)}},t.prototype.unlink=function(e,i){var o=this;!this.checkInitAsync(i)||this.checkPathAsync(e,i)||this.exists(e,function(a){if(!a)return i(c.ENOENT(e));o._writable.exists(e,function(s){if(s)return o._writable.unlink(e,function(h){if(h)return i(h);o.exists(e,function(d){d&&o.deletePath(e),i(null)})});o.deletePath(e),i(null)})})},t.prototype.unlinkSync=function(e){if(this.checkInitialized(),this.checkPath(e),this.existsSync(e))this._writable.existsSync(e)&&this._writable.unlinkSync(e),this.existsSync(e)&&this.deletePath(e);else throw c.ENOENT(e)},t.prototype.rmdir=function(e,i){var o=this;if(this.checkInitAsync(i)){var a=function(){o.readdir(e,function(s,h){if(s)return i(s);if(h.length)return i(c.ENOTEMPTY(e));o.deletePath(e),i(null)})};this.exists(e,function(s){if(!s)return i(c.ENOENT(e));o._writable.exists(e,function(h){h?o._writable.rmdir(e,function(d){if(d)return i(d);o._readable.exists(e,function(R){R?a():i()})}):a()})})}},t.prototype.rmdirSync=function(e){if(this.checkInitialized(),this.existsSync(e)){if(this._writable.existsSync(e)&&this._writable.rmdirSync(e),this.existsSync(e)){if(this.readdirSync(e).length>0)throw c.ENOTEMPTY(e);this.deletePath(e)}}else throw c.ENOENT(e)},t.prototype.mkdir=function(e,i,o){var a=this;this.checkInitAsync(o)&&this.exists(e,function(s){if(s)return o(c.EEXIST(e));a.createParentDirectoriesAsync(e,function(h){if(h)return o(h);a._writable.mkdir(e,i,o)})})},t.prototype.mkdirSync=function(e,i){if(this.checkInitialized(),this.existsSync(e))throw c.EEXIST(e);this.createParentDirectories(e),this._writable.mkdirSync(e,i)},t.prototype.readdir=function(e,i){var o=this;this.checkInitAsync(i)&&this.stat(e,!1,function(a,s){if(a)return i(a);if(!s.isDirectory())return i(c.ENOTDIR(e));o._writable.readdir(e,function(h,d){if(h&&h.code!=="ENOENT")return i(h);(h||!d)&&(d=[]),o._readable.readdir(e,function(R,L){(R||!L)&&(L=[]);var B={},J=d.concat(L.filter(function(tt){return!o._deletedFiles[e+"/"+tt]})).filter(function(tt){var ut=!B[tt];return B[tt]=!0,ut});i(null,J)})})})},t.prototype.readdirSync=function(e){var i=this;this.checkInitialized();var o=this.statSync(e,!1);if(!o.isDirectory())throw c.ENOTDIR(e);var a=[];try{a=a.concat(this._writable.readdirSync(e))}catch{}try{a=a.concat(this._readable.readdirSync(e).filter(function(h){return!i._deletedFiles[e+"/"+h]}))}catch{}var s={};return a.filter(function(h){var d=!s[h];return s[h]=!0,d})},t.prototype.exists=function(e,i){var o=this;this.checkInitialized(),this._writable.exists(e,function(a){if(a)return i(!0);o._readable.exists(e,function(s){i(s&&o._deletedFiles[e]!==!0)})})},t.prototype.existsSync=function(e){return this.checkInitialized(),this._writable.existsSync(e)||this._readable.existsSync(e)&&this._deletedFiles[e]!==!0},t.prototype.chmod=function(e,i,o,a){var s=this;this.checkInitAsync(a)&&this.operateOnWritableAsync(e,function(h){if(h)return a(h);s._writable.chmod(e,i,o,a)})},t.prototype.chmodSync=function(e,i,o){var a=this;this.checkInitialized(),this.operateOnWritable(e,function(){a._writable.chmodSync(e,i,o)})},t.prototype.chown=function(e,i,o,a,s){var h=this;this.checkInitAsync(s)&&this.operateOnWritableAsync(e,function(d){if(d)return s(d);h._writable.chown(e,i,o,a,s)})},t.prototype.chownSync=function(e,i,o,a){var s=this;this.checkInitialized(),this.operateOnWritable(e,function(){s._writable.chownSync(e,i,o,a)})},t.prototype.utimes=function(e,i,o,a){var s=this;this.checkInitAsync(a)&&this.operateOnWritableAsync(e,function(h){if(h)return a(h);s._writable.utimes(e,i,o,a)})},t.prototype.utimesSync=function(e,i,o){var a=this;this.checkInitialized(),this.operateOnWritable(e,function(){a._writable.utimesSync(e,i,o)})},t.prototype.deletePath=function(e){this._deletedFiles[e]=!0,this.updateLog("d"+e+`
`)},t.prototype.updateLog=function(e){var i=this;this._deleteLog+=e,this._deleteLogUpdatePending?this._deleteLogUpdateNeeded=!0:(this._deleteLogUpdatePending=!0,this._writable.writeFile(Le,this._deleteLog,"utf8",O.getFileFlag("w"),420,function(o){i._deleteLogUpdatePending=!1,o?i._deleteLogError=o:i._deleteLogUpdateNeeded&&(i._deleteLogUpdateNeeded=!1,i.updateLog(""))}))},t.prototype._reparseDeletionLog=function(){var e=this;this._deletedFiles={},this._deleteLog.split(`
`).forEach(function(i){e._deletedFiles[i.slice(1)]=i.slice(0,1)==="d"})},t.prototype.checkInitialized=function(){if(this._isInitialized){if(this._deleteLogError!==null){var e=this._deleteLogError;throw this._deleteLogError=null,e}}else throw new c(u.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")},t.prototype.checkInitAsync=function(e){if(this._isInitialized){if(this._deleteLogError!==null){var i=this._deleteLogError;return this._deleteLogError=null,e(i),!1}}else return e(new c(u.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")),!1;return!0},t.prototype.checkPath=function(e){if(e===Le)throw c.EPERM(e)},t.prototype.checkPathAsync=function(e,i){return e===Le?(i(c.EPERM(e)),!0):!1},t.prototype.createParentDirectoriesAsync=function(e,i){var o=p.dirname(e),a=[],s=this;this._writable.stat(o,!1,h);function h(R,L){R?(a.push(o),o=p.dirname(o),s._writable.stat(o,!1,h)):d()}function d(){if(!a.length)return i();var R=a.pop();s._readable.stat(R,!1,function(L,B){if(!B)return i();s._writable.mkdir(R,B.mode,function(J){if(J)return i(J);d()})})}},t.prototype.createParentDirectories=function(e){for(var i=this,o=p.dirname(e),a=[];!this._writable.existsSync(o);)a.push(o),o=p.dirname(o);a=a.reverse(),a.forEach(function(s){i._writable.mkdirSync(s,i.statSync(s,!1).mode)})},t.prototype.operateOnWritable=function(e,i){if(this.existsSync(e))this._writable.existsSync(e)||this.copyToWritable(e),i();else throw c.ENOENT(e)},t.prototype.operateOnWritableAsync=function(e,i){var o=this;this.exists(e,function(a){if(!a)return i(c.ENOENT(e));o._writable.exists(e,function(s){if(s)i();else return o.copyToWritableAsync(e,i)})})},t.prototype.copyToWritable=function(e){var i=this.statSync(e,!1);i.isDirectory()?this._writable.mkdirSync(e,i.mode):this.writeFileSync(e,this._readable.readFileSync(e,null,de("r")),null,de("w"),this.statSync(e,!1).mode)},t.prototype.copyToWritableAsync=function(e,i){var o=this;this.stat(e,!1,function(a,s){if(a)return i(a);if(s.isDirectory())return o._writable.mkdir(e,s.mode,i);o._readable.readFile(e,null,de("r"),function(h,d){if(h)return i(h);o.writeFile(e,d,null,de("w"),s.mode,i)})})},t}(K),yr=function(n){function t(r,e,i){i===void 0&&(i=!0),n.call(this,new zn(r,e)),bt(i,t.Name,{readable:"readable file system",writable:"writable file system"})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){try{var o=new t(e.writable,e.readable,!1);o.initialize(function(a){i(a,o)},!1)}catch(a){i(a)}},t.isAvailable=function(){return zn.isAvailable()},t.prototype.initialize=function(e,i){i===void 0&&(i=!0),i&&console.warn("[OverlayFS] OverlayFS.initialize() is deprecated and will be removed in the next major release. Please use 'OverlayFS.Create({readable: readable file system instance, writable: writable file system instance}, cb)' to create and initialize OverlayFS instances."),n.prototype.initialize.call(this,e)},t.prototype.getOverlayedFileSystems=function(){return n.prototype.getFSUnlocked.call(this).getOverlayedFileSystems()},t.prototype.unwrap=function(){return n.prototype.getFSUnlocked.call(this)},t}(gt);yr.Name="OverlayFS",yr.Options={writable:{type:"object",description:"The file system to write modified files to."},readable:{type:"object",description:"The file system that initially populates this file system."}};var Wt;(function(n){n[n.CB=0]="CB",n[n.FD=1]="FD",n[n.API_ERROR=2]="API_ERROR",n[n.STATS=3]="STATS",n[n.PROBE=4]="PROBE",n[n.FILEFLAG=5]="FILEFLAG",n[n.BUFFER=6]="BUFFER",n[n.ERROR=7]="ERROR"})(Wt||(Wt={}));var Qr=function(){this._callbacks={},this._nextId=0};Qr.prototype.toRemoteArg=function(t){var r=this._nextId++;return this._callbacks[r]=t,{type:Wt.CB,id:r}},Qr.prototype.toLocalArg=function(t){var r=this._callbacks[t];return delete this._callbacks[t],r};var Fr=function(){this._fileDescriptors={},this._nextId=0};Fr.prototype.toRemoteArg=function(t,r,e,i){var o=this._nextId++,a,s;this._fileDescriptors[o]=t,t.stat(function(h,d){h?i(h):(s=Ze(d.toBuffer()),e.isReadable()?t.read(I.alloc(d.size),0,d.size,0,function(R,L,B){R?i(R):(a=Ze(B),i(null,{type:Wt.FD,id:o,data:a,stat:s,path:r,flag:e.getFlagString()}))}):i(null,{type:Wt.FD,id:o,data:new ArrayBuffer(0),stat:s,path:r,flag:e.getFlagString()}))})},Fr.prototype.applyFdAPIRequest=function(t,r){var e=this,i=t.args[0];this._applyFdChanges(i,function(o,a){o?r(o):a[t.method](function(s){t.method==="close"&&delete e._fileDescriptors[i.id],r(s)})})},Fr.prototype._applyFdChanges=function(t,r){var e=this._fileDescriptors[t.id],i=Xe(t.data),o=D.fromBuffer(Xe(t.stat)),a=O.getFileFlag(t.flag);a.isWriteable()?e.write(i,0,i.length,a.isAppendable()?e.getPos():0,function(s){function h(){e.stat(function(d,R){d?r(d):R.mode!==o.mode?e.chmod(o.mode,function(L){r(L,e)}):r(d,e)})}s?r(s):a.isAppendable()?h():e.truncate(i.length,function(){h()})}):r(null,e)};function Tr(n){return{type:Wt.API_ERROR,errorData:Ze(n.writeToBuffer())}}function jn(n){return c.fromBuffer(Xe(n.errorData))}function Bn(n){return{type:Wt.ERROR,name:n.name,message:n.message,stack:n.stack}}function Wn(n){var t=Gt[n.name];typeof t!="function"&&(t=Error);var r=new t(n.message);return r.stack=n.stack,r}function Hn(n){return{type:Wt.STATS,statsData:Ze(n.toBuffer())}}function Vn(n){return D.fromBuffer(Xe(n.statsData))}function Zn(n){return{type:Wt.FILEFLAG,flagStr:n.getFlagString()}}function Xn(n){return O.getFileFlag(n.flagStr)}function Ze(n){return G(n)}function Xe(n){return mt(n)}function Yn(n){return{type:Wt.BUFFER,data:Ze(n)}}function qn(n){return Xe(n.data)}function Xo(n){return n&&typeof n=="object"&&n.hasOwnProperty("browserfsMessage")&&n.browserfsMessage}function Yo(n){return n&&typeof n=="object"&&n.hasOwnProperty("browserfsMessage")&&n.browserfsMessage}var Gn=function(n){function t(r,e,i,o,a,s){n.call(this,r,e,i,o,s),this._remoteFdId=a}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getRemoteFdId=function(){return this._remoteFdId},t.prototype.toRemoteArg=function(){return{type:Wt.FD,id:this._remoteFdId,data:Ze(this.getBuffer()),stat:Ze(this.getStats().toBuffer()),path:this.getPath(),flag:this.getFlag().getFlagString()}},t.prototype.sync=function(e){this._syncClose("sync",e)},t.prototype.close=function(e){this._syncClose("close",e)},t.prototype._syncClose=function(e,i){var o=this;this.isDirty()?this._fs.syncClose(e,this,function(a){a||o.resetDirty(),i(a)}):i()},t}(re),Lr=function(n){function t(r,e){var i=this;e===void 0&&(e=!0),n.call(this),this._callbackConverter=new Qr,this._isInitialized=!1,this._isReadOnly=!1,this._supportLinks=!1,this._supportProps=!1,this._worker=r,bt(e,t.Name,{worker:"Web Worker instance"}),this._worker.addEventListener("message",function(o){var a=o.data;if(Yo(a)){var s,h=a.args,d=new Array(h.length);for(s=0;s<d.length;s++)d[s]=i._argRemote2Local(h[s]);i._callbackConverter.toLocalArg(a.cbId).apply(null,d)}})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o=new t(e.worker,!1);o.initialize(function(){i(null,o)})},t.isAvailable=function(){return typeof importScripts<"u"||typeof Worker<"u"},t.attachRemoteListener=function(e){var i=new Fr;function o(s,h,d){switch(typeof s){case"object":s instanceof D?d(null,Hn(s)):s instanceof c?d(null,Tr(s)):s instanceof yt?d(null,i.toRemoteArg(s,h[0],h[1],d)):s instanceof O?d(null,Zn(s)):s instanceof I?d(null,Yn(s)):s instanceof Error?d(null,Bn(s)):d(null,s);break;default:d(null,s);break}}function a(s,h){if(!s)return s;switch(typeof s){case"object":if(typeof s.type=="number"){var d=s;switch(d.type){case Wt.CB:var R=s.id;return function(){var L=arguments,B,J=new Array(arguments.length),tt,ut=arguments.length;function pt(It){ut>0&&(ut=-1,tt={browserfsMessage:!0,cbId:R,args:[Tr(It)]},e.postMessage(tt))}for(B=0;B<arguments.length;B++)(function(It,Ht){o(Ht,h,function(ie,Re){J[It]=Re,ie?pt(ie):--ut===0&&(tt={browserfsMessage:!0,cbId:R,args:J},e.postMessage(tt))})})(B,L[B]);arguments.length===0&&(tt={browserfsMessage:!0,cbId:R,args:J},e.postMessage(tt))};case Wt.API_ERROR:return jn(d);case Wt.STATS:return Vn(d);case Wt.FILEFLAG:return Xn(d);case Wt.BUFFER:return qn(d);case Wt.ERROR:return Wn(d);default:return s}}else return s;default:return s}}e.addEventListener("message",function(s){var h=s.data;if(Xo(h)){var d=h.args,R=new Array(d.length);switch(h.method){case"close":case"sync":(function(){var J=d[1];i.applyFdAPIRequest(h,function(tt){var ut={browserfsMessage:!0,cbId:J.id,args:tt?[Tr(tt)]:[]};e.postMessage(ut)})})();break;case"probe":(function(){var J=st.getRootFS(),tt=d[1],ut={type:Wt.PROBE,isReadOnly:J.isReadOnly(),supportsLinks:J.supportsLinks(),supportsProps:J.supportsProps()},pt={browserfsMessage:!0,cbId:tt.id,args:[ut]};e.postMessage(pt)})();break;default:for(var L=0;L<d.length;L++)R[L]=a(d[L],R);var B=st.getRootFS();B[h.method].apply(B,R);break}}})},t.prototype.getName=function(){return t.Name},t.prototype.initialize=function(e){var i=this;if(this._isInitialized)e();else{var o={browserfsMessage:!0,method:"probe",args:[this._argLocal2Remote(xt()),this._callbackConverter.toRemoteArg(function(a){i._isInitialized=!0,i._isReadOnly=a.isReadOnly,i._supportLinks=a.supportsLinks,i._supportProps=a.supportsProps,e()})]};this._worker.postMessage(o)}},t.prototype.isReadOnly=function(){return this._isReadOnly},t.prototype.supportsSynch=function(){return!1},t.prototype.supportsLinks=function(){return this._supportLinks},t.prototype.supportsProps=function(){return this._supportProps},t.prototype.rename=function(e,i,o){this._rpc("rename",arguments)},t.prototype.stat=function(e,i,o){this._rpc("stat",arguments)},t.prototype.open=function(e,i,o,a){this._rpc("open",arguments)},t.prototype.unlink=function(e,i){this._rpc("unlink",arguments)},t.prototype.rmdir=function(e,i){this._rpc("rmdir",arguments)},t.prototype.mkdir=function(e,i,o){this._rpc("mkdir",arguments)},t.prototype.readdir=function(e,i){this._rpc("readdir",arguments)},t.prototype.exists=function(e,i){this._rpc("exists",arguments)},t.prototype.realpath=function(e,i,o){this._rpc("realpath",arguments)},t.prototype.truncate=function(e,i,o){this._rpc("truncate",arguments)},t.prototype.readFile=function(e,i,o,a){this._rpc("readFile",arguments)},t.prototype.writeFile=function(e,i,o,a,s,h){this._rpc("writeFile",arguments)},t.prototype.appendFile=function(e,i,o,a,s,h){this._rpc("appendFile",arguments)},t.prototype.chmod=function(e,i,o,a){this._rpc("chmod",arguments)},t.prototype.chown=function(e,i,o,a,s){this._rpc("chown",arguments)},t.prototype.utimes=function(e,i,o,a){this._rpc("utimes",arguments)},t.prototype.link=function(e,i,o){this._rpc("link",arguments)},t.prototype.symlink=function(e,i,o,a){this._rpc("symlink",arguments)},t.prototype.readlink=function(e,i){this._rpc("readlink",arguments)},t.prototype.syncClose=function(e,i,o){this._worker.postMessage({browserfsMessage:!0,method:e,args:[i.toRemoteArg(),this._callbackConverter.toRemoteArg(o)]})},t.prototype._argRemote2Local=function(e){if(!e)return e;switch(typeof e){case"object":if(typeof e.type=="number"){var i=e;switch(i.type){case Wt.API_ERROR:return jn(i);case Wt.FD:var o=i;return new Gn(this,o.path,O.getFileFlag(o.flag),D.fromBuffer(Xe(o.stat)),o.id,Xe(o.data));case Wt.STATS:return Vn(i);case Wt.FILEFLAG:return Xn(i);case Wt.BUFFER:return qn(i);case Wt.ERROR:return Wn(i);default:return e}}else return e;default:return e}},t.prototype._rpc=function(e,i){for(var o=this,a=new Array(i.length),s=0;s<i.length;s++)a[s]=o._argLocal2Remote(i[s]);var h={browserfsMessage:!0,method:e,args:a};this._worker.postMessage(h)},t.prototype._argLocal2Remote=function(e){if(!e)return e;switch(typeof e){case"object":return e instanceof D?Hn(e):e instanceof c?Tr(e):e instanceof Gn?e.toRemoteArg():e instanceof O?Zn(e):e instanceof I?Yn(e):e instanceof Error?Bn(e):"Unknown argument";case"function":return this._callbackConverter.toRemoteArg(e);default:return e}},t}(K);Lr.Name="WorkerFS",Lr.Options={worker:{type:"object",description:"The target worker that you want to connect to, or the current worker if in a worker context.",validator:function(n,t){n.postMessage?t():t(new c(u.EINVAL,"option must be a Web Worker instance."))}}};function qo(n,t,r){var e=new XMLHttpRequest;e.open("GET",n,!0);var i=!0;switch(t){case"buffer":e.responseType="arraybuffer";break;case"json":try{e.responseType="json",i=e.responseType==="json"}catch{i=!1}break;default:return r(new c(u.EINVAL,"Invalid download type: "+t))}e.onreadystatechange=function(o){if(e.readyState===4)if(e.status===200)switch(t){case"buffer":return r(null,e.response?I.from(e.response):xt());case"json":return i?r(null,e.response):r(null,JSON.parse(e.responseText))}else return r(new c(e.status,"XHR error."))},e.send()}function Go(n,t){var r=new XMLHttpRequest;r.open("GET",n,!1);var e=null,i=null;if(r.overrideMimeType("text/plain; charset=x-user-defined"),r.onreadystatechange=function(o){if(r.readyState===4)if(r.status===200)switch(t){case"buffer":var a=r.responseText;e=I.alloc(a.length);for(var s=0;s<a.length;s++)e[s]=a.charCodeAt(s);return;case"json":e=JSON.parse(r.responseText);return}else{i=new c(r.status,"XHR error.");return}},r.send(),i)throw i;return e}function Ko(n,t){var r=new XMLHttpRequest;switch(r.open("GET",n,!1),t){case"buffer":r.responseType="arraybuffer";break;case"json":break;default:throw new c(u.EINVAL,"Invalid download type: "+t)}var e,i;if(r.onreadystatechange=function(o){if(r.readyState===4)if(r.status===200)switch(t){case"buffer":e=I.from(r.response);break;case"json":e=JSON.parse(r.response);break}else i=new c(r.status,"XHR error.")},r.send(),i)throw i;return e}function Kn(n,t,r){var e=new XMLHttpRequest;e.open("HEAD",t,n),e.onreadystatechange=function(i){if(e.readyState===4)if(e.status===200)try{return r(null,parseInt(e.getResponseHeader("Content-Length")||"-1",10))}catch{return r(new c(u.EIO,"XHR HEAD error: Could not read content-length."))}else return r(new c(e.status,"XHR HEAD error."))},e.send()}var Jn=qo,Jo=wt&&typeof Blob<"u"?Ko:Go;function Qo(n){var t=-1;return Kn(!1,n,function(r,e){if(r)throw r;t=e}),t}function $o(n,t){Kn(!0,n,t)}var we=function(){this._index={},this.addPath("/",new le)};we.fromListing=function(t){var r=new we,e=new le;r._index["/"]=e;for(var i=[["",t,e]];i.length>0;){var o=void 0,a=i.pop(),s=a[0],h=a[1],d=a[2];for(var R in h)if(h.hasOwnProperty(R)){var L=h[R],B=s+"/"+R;L?(r._index[B]=o=new le,i.push([B,L,o])):o=new nr(new D(T.FILE,-1,365)),d&&(d._ls[R]=o)}}return r},we.prototype.fileIterator=function(t){var r=this;for(var e in r._index)if(r._index.hasOwnProperty(e))for(var i=r._index[e],o=i.getListing(),a=0,s=o;a<s.length;a+=1){var h=s[a],d=i.getItem(h);De(d)&&t(d.getData())}},we.prototype.addPath=function(t,r){if(!r)throw new Error("Inode must be specified");if(t[0]!=="/")throw new Error("Path must be absolute, got: "+t);if(this._index.hasOwnProperty(t))return this._index[t]===r;var e=this._split_path(t),i=e[0],o=e[1],a=this._index[i];return a===void 0&&t!=="/"&&(a=new le,!this.addPath(i,a))||t!=="/"&&!a.addItem(o,r)?!1:(Pe(r)&&(this._index[t]=r),!0)},we.prototype.addPathFast=function(t,r){var e=t.lastIndexOf("/"),i=e===0?"/":t.substring(0,e),o=t.substring(e+1),a=this._index[i];return a===void 0&&(a=new le,this.addPathFast(i,a)),a.addItem(o,r)?(r.isDir()&&(this._index[t]=r),!0):!1},we.prototype.removePath=function(t){var r=this,e=this._split_path(t),i=e[0],o=e[1],a=this._index[i];if(a===void 0)return null;var s=a.remItem(o);if(s===null)return null;if(Pe(s)){for(var h=s.getListing(),d=0,R=h;d<R.length;d+=1){var L=R[d];r.removePath(t+"/"+L)}t!=="/"&&delete this._index[t]}return s},we.prototype.ls=function(t){var r=this._index[t];return r===void 0?null:r.getListing()},we.prototype.getInode=function(t){var r=this._split_path(t),e=r[0],i=r[1],o=this._index[e];return o===void 0?null:e===t?o:o.getItem(i)},we.prototype._split_path=function(t){var r=p.dirname(t),e=t.substr(r.length+(r==="/"?0:1));return[r,e]};var nr=function(t){this.data=t};nr.prototype.isFile=function(){return!0},nr.prototype.isDir=function(){return!1},nr.prototype.getData=function(){return this.data},nr.prototype.setData=function(t){this.data=t};var le=function(t){t===void 0&&(t=null),this.data=t,this._ls={}};le.prototype.isFile=function(){return!1},le.prototype.isDir=function(){return!0},le.prototype.getData=function(){return this.data},le.prototype.getStats=function(){return new D(T.DIRECTORY,4096,365)},le.prototype.getListing=function(){return Object.keys(this._ls)},le.prototype.getItem=function(t){var r=this._ls[t];return r||null},le.prototype.addItem=function(t,r){return t in this._ls?!1:(this._ls[t]=r,!0)},le.prototype.remItem=function(t){var r=this._ls[t];return r===void 0?null:(delete this._ls[t],r)};function De(n){return!!n&&n.isFile()}function Pe(n){return!!n&&n.isDir()}function ta(n,t,r){try{r(null,n.toString(t))}catch(e){r(e)}}var Dr=function(n){function t(r,e,i){e===void 0&&(e=""),i===void 0&&(i=!0),n.call(this),r||(r="index.json"),e.length>0&&e.charAt(e.length-1)!=="/"&&(e=e+"/"),this.prefixUrl=e;var o=null;if(typeof r=="string"){if(o=this._requestFileSync(r,"json"),!o)throw new Error("Unable to find listing at URL: ${listingUrlOrObj}")}else o=r;bt(i,t.Name,{index:typeof r=="string"?r:"file index as an object",baseUrl:e}),this._index=we.fromListing(o)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){e.index===void 0&&(e.index="index.json"),typeof e.index=="string"?t.FromURL(e.index,i,e.baseUrl,!1):i(null,new t(e.index,e.baseUrl,!1))},t.isAvailable=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest!==null},t.FromURL=function(e,i,o,a){o===void 0&&(o=e.slice(0,e.lastIndexOf("/")+1)),a===void 0&&(a=!0),a&&console.warn(`[XmlHttpRequest] XmlHttpRequest.FromURL() is deprecated and will be removed in the next major release. Please use 'XmlHttpRequest.Create({ index: "`+e+'", baseUrl: "'+o+`" }, cb)' instead.`),Jn(e,"json",function(s,h){s?i(s):i(null,new t(h,o,!1))})},t.prototype.empty=function(){this._index.fileIterator(function(e){e.fileData=null})},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,i){i(0,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.preloadFile=function(e,i){var o=this._index.getInode(e);if(De(o)){if(o===null)throw c.ENOENT(e);var a=o.getData();a.size=i.length,a.fileData=i}else throw c.EISDIR(e)},t.prototype.stat=function(e,i,o){var a=this._index.getInode(e);if(a===null)return o(c.ENOENT(e));var s;De(a)?(s=a.getData(),s.size<0?this._requestFileSizeAsync(e,function(h,d){if(h)return o(h);s.size=d,o(null,s.clone())}):o(null,s.clone())):Pe(a)?(s=a.getStats(),o(null,s)):o(c.FileError(u.EINVAL,e))},t.prototype.statSync=function(e,i){var o=this._index.getInode(e);if(o===null)throw c.ENOENT(e);var a;if(De(o))a=o.getData(),a.size<0&&(a.size=this._requestFileSizeSync(e));else if(Pe(o))a=o.getStats();else throw c.FileError(u.EINVAL,e);return a},t.prototype.open=function(e,i,o,a){if(i.isWriteable())return a(new c(u.EPERM,e));var s=this,h=this._index.getInode(e);if(h===null)return a(c.ENOENT(e));if(De(h)){var d=h.getData();switch(i.pathExistsAction()){case m.THROW_EXCEPTION:case m.TRUNCATE_FILE:return a(c.EEXIST(e));case m.NOP:if(d.fileData)return a(null,new oe(s,e,i,d.clone(),d.fileData));this._requestFileAsync(e,"buffer",function(R,L){return R?a(R):(d.size=L.length,d.fileData=L,a(null,new oe(s,e,i,d.clone(),L)))});break;default:return a(new c(u.EINVAL,"Invalid FileMode object."))}}else return a(c.EISDIR(e))},t.prototype.openSync=function(e,i,o){if(i.isWriteable())throw new c(u.EPERM,e);var a=this._index.getInode(e);if(a===null)throw c.ENOENT(e);if(De(a)){var s=a.getData();switch(i.pathExistsAction()){case m.THROW_EXCEPTION:case m.TRUNCATE_FILE:throw c.EEXIST(e);case m.NOP:if(s.fileData)return new oe(this,e,i,s.clone(),s.fileData);var h=this._requestFileSync(e,"buffer");return s.size=h.length,s.fileData=h,new oe(this,e,i,s.clone(),h);default:throw new c(u.EINVAL,"Invalid FileMode object.")}}else throw c.EISDIR(e)},t.prototype.readdir=function(e,i){try{i(null,this.readdirSync(e))}catch(o){i(o)}},t.prototype.readdirSync=function(e){var i=this._index.getInode(e);if(i===null)throw c.ENOENT(e);if(Pe(i))return i.getListing();throw c.ENOTDIR(e)},t.prototype.readFile=function(e,i,o,a){var s=a;this.open(e,o,420,function(h,d){if(h)return a(h);a=function(B,J){d.close(function(tt){return B||(B=tt),s(B,J)})};var R=d,L=R.getBuffer();i===null?a(h,Nt(L)):ta(L,i,a)})},t.prototype.readFileSync=function(e,i,o){var a=this.openSync(e,o,420);try{var s=a,h=s.getBuffer();return i===null?Nt(h):h.toString(i)}finally{a.closeSync()}},t.prototype.getXhrPath=function(e){return e.charAt(0)==="/"&&(e=e.slice(1)),this.prefixUrl+e},t.prototype._requestFileAsync=function(e,i,o){Jn(this.getXhrPath(e),i,o)},t.prototype._requestFileSync=function(e,i){return Jo(this.getXhrPath(e),i)},t.prototype._requestFileSizeAsync=function(e,i){$o(this.getXhrPath(e),i)},t.prototype._requestFileSizeSync=function(e){return Qo(this.getXhrPath(e))},t}(K);Dr.Name="XmlHttpRequest",Dr.Options={index:{type:["string","object"],optional:!0,description:"URL to a file index as a JSON file or the file index object itself, generated with the make_xhrfs_index script. Defaults to `index.json`."},baseUrl:{type:"string",optional:!0,description:"Used as the URL prefix for fetched files. Default: Fetch files relative to the index."}};var Ye=function(){};Ye.str2byte=function(t,r){for(var e=t.length>r.length?r.length:t.length,i=0;i<e;i++){var o=t.charCodeAt(i);if(o>127){var a=Ye.extendedChars.indexOf(t.charAt(i));a>-1&&(o=a+128)}r[o]=i}return e},Ye.byte2str=function(t){for(var r=new Array(t.length),e=0;e<t.length;e++){var i=t[e];i>127?r[e]=Ye.extendedChars[i-128]:r[e]=String.fromCharCode(i)}return r.join("")},Ye.byteLength=function(t){return t.length},Ye.extendedChars=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","_","_","_","","","","","","","","","+","+","","","+","+","-","-","+","-","+","","","+","+","-","-","","-","+","","","","","","","i","","","","+","+","_","_","","","_","","","","","","","","","","","","","","","","","","","_","","","","","","","","","","","","_"," "];var ea=F(31).inflateRaw,Qn={},$n;(function(n){n[n.MSDOS=0]="MSDOS",n[n.AMIGA=1]="AMIGA",n[n.OPENVMS=2]="OPENVMS",n[n.UNIX=3]="UNIX",n[n.VM_CMS=4]="VM_CMS",n[n.ATARI_ST=5]="ATARI_ST",n[n.OS2_HPFS=6]="OS2_HPFS",n[n.MAC=7]="MAC",n[n.Z_SYSTEM=8]="Z_SYSTEM",n[n.CP_M=9]="CP_M",n[n.NTFS=10]="NTFS",n[n.MVS=11]="MVS",n[n.VSE=12]="VSE",n[n.ACORN_RISC=13]="ACORN_RISC",n[n.VFAT=14]="VFAT",n[n.ALT_MVS=15]="ALT_MVS",n[n.BEOS=16]="BEOS",n[n.TANDEM=17]="TANDEM",n[n.OS_400=18]="OS_400",n[n.OSX=19]="OSX"})($n||($n={}));var ir;(function(n){n[n.STORED=0]="STORED",n[n.SHRUNK=1]="SHRUNK",n[n.REDUCED_1=2]="REDUCED_1",n[n.REDUCED_2=3]="REDUCED_2",n[n.REDUCED_3=4]="REDUCED_3",n[n.REDUCED_4=5]="REDUCED_4",n[n.IMPLODE=6]="IMPLODE",n[n.DEFLATE=8]="DEFLATE",n[n.DEFLATE64=9]="DEFLATE64",n[n.TERSE_OLD=10]="TERSE_OLD",n[n.BZIP2=12]="BZIP2",n[n.LZMA=14]="LZMA",n[n.TERSE_NEW=18]="TERSE_NEW",n[n.LZ77=19]="LZ77",n[n.WAVPACK=97]="WAVPACK",n[n.PPMD=98]="PPMD"})(ir||(ir={}));function ti(n,t){var r=t&31,e=(t>>5&15)-1,i=(t>>9)+1980,o=n&31,a=n>>5&63,s=n>>11;return new Date(i,e,r,s,a,o)}function Ar(n,t,r,e){return e===0?"":t?n.toString("utf8",r,r+e):Ye.byte2str(n.slice(r,r+e))}var ye=function(t){if(this.data=t,t.readUInt32LE(0)!==67324752)throw new c(u.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0))};ye.prototype.versionNeeded=function(){return this.data.readUInt16LE(4)},ye.prototype.flags=function(){return this.data.readUInt16LE(6)},ye.prototype.compressionMethod=function(){return this.data.readUInt16LE(8)},ye.prototype.lastModFileTime=function(){return ti(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},ye.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(10)},ye.prototype.crc32=function(){return this.data.readUInt32LE(14)},ye.prototype.fileNameLength=function(){return this.data.readUInt16LE(26)},ye.prototype.extraFieldLength=function(){return this.data.readUInt16LE(28)},ye.prototype.fileName=function(){return Ar(this.data,this.useUTF8(),30,this.fileNameLength())},ye.prototype.extraField=function(){var t=30+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},ye.prototype.totalSize=function(){return 30+this.fileNameLength()+this.extraFieldLength()},ye.prototype.useUTF8=function(){return(this.flags()&2048)===2048};var vr=function(t,r,e){this.header=t,this.record=r,this.data=e};vr.prototype.decompress=function(){var t=this.header.compressionMethod(),r=Qn[t];if(r)return r(this.data,this.record.compressedSize(),this.record.uncompressedSize(),this.record.flag());var e=ir[t];throw e||(e="Unknown: "+t),new c(u.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+e)},vr.prototype.getHeader=function(){return this.header},vr.prototype.getRecord=function(){return this.record},vr.prototype.getRawData=function(){return this.data};var Tt=function(t,r){if(this.zipData=t,this.data=r,this.data.readUInt32LE(0)!==33639248)throw new c(u.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));this._filename=this.produceFilename()};Tt.prototype.versionMadeBy=function(){return this.data.readUInt16LE(4)},Tt.prototype.versionNeeded=function(){return this.data.readUInt16LE(6)},Tt.prototype.flag=function(){return this.data.readUInt16LE(8)},Tt.prototype.compressionMethod=function(){return this.data.readUInt16LE(10)},Tt.prototype.lastModFileTime=function(){return ti(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},Tt.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(12)},Tt.prototype.crc32=function(){return this.data.readUInt32LE(16)},Tt.prototype.compressedSize=function(){return this.data.readUInt32LE(20)},Tt.prototype.uncompressedSize=function(){return this.data.readUInt32LE(24)},Tt.prototype.fileNameLength=function(){return this.data.readUInt16LE(28)},Tt.prototype.extraFieldLength=function(){return this.data.readUInt16LE(30)},Tt.prototype.fileCommentLength=function(){return this.data.readUInt16LE(32)},Tt.prototype.diskNumberStart=function(){return this.data.readUInt16LE(34)},Tt.prototype.internalAttributes=function(){return this.data.readUInt16LE(36)},Tt.prototype.externalAttributes=function(){return this.data.readUInt32LE(38)},Tt.prototype.headerRelativeOffset=function(){return this.data.readUInt32LE(42)},Tt.prototype.produceFilename=function(){var t=Ar(this.data,this.useUTF8(),46,this.fileNameLength());return t.replace(/\\/g,"/")},Tt.prototype.fileName=function(){return this._filename},Tt.prototype.rawFileName=function(){return this.data.slice(46,46+this.fileNameLength())},Tt.prototype.extraField=function(){var t=44+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},Tt.prototype.fileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return Ar(this.data,this.useUTF8(),t,this.fileCommentLength())},Tt.prototype.rawFileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return this.data.slice(t,t+this.fileCommentLength())},Tt.prototype.totalSize=function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},Tt.prototype.isDirectory=function(){var t=this.fileName();return!!(this.externalAttributes()&16)||t.charAt(t.length-1)==="/"},Tt.prototype.isFile=function(){return!this.isDirectory()},Tt.prototype.useUTF8=function(){return(this.flag()&2048)===2048},Tt.prototype.isEncrypted=function(){return(this.flag()&1)===1},Tt.prototype.getFileData=function(){var t=this.headerRelativeOffset(),r=new ye(this.zipData.slice(t));return new vr(r,this,this.zipData.slice(t+r.totalSize()))},Tt.prototype.getData=function(){return this.getFileData().decompress()},Tt.prototype.getRawData=function(){return this.getFileData().getRawData()},Tt.prototype.getStats=function(){return new D(T.FILE,this.uncompressedSize(),365,new Date,this.lastModFileTime())};var be=function(t){if(this.data=t,this.data.readUInt32LE(0)!==101010256)throw new c(u.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0))};be.prototype.diskNumber=function(){return this.data.readUInt16LE(4)},be.prototype.cdDiskNumber=function(){return this.data.readUInt16LE(6)},be.prototype.cdDiskEntryCount=function(){return this.data.readUInt16LE(8)},be.prototype.cdTotalEntryCount=function(){return this.data.readUInt16LE(10)},be.prototype.cdSize=function(){return this.data.readUInt32LE(12)},be.prototype.cdOffset=function(){return this.data.readUInt32LE(16)},be.prototype.cdZipCommentLength=function(){return this.data.readUInt16LE(20)},be.prototype.cdZipComment=function(){return Ar(this.data,!0,22,this.cdZipCommentLength())},be.prototype.rawCdZipComment=function(){return this.data.slice(22,22+this.cdZipCommentLength())};var ei=function(t,r,e,i){this.index=t,this.directoryEntries=r,this.eocd=e,this.data=i},qe=function(n){function t(r,e,i){e===void 0&&(e=""),i===void 0&&(i=!0),n.call(this),this.name=e,this._index=new we,this._directoryEntries=[],this._eocd=null,bt(i,t.Name,{zipData:"zip data as a Buffer",name:e}),r instanceof ei?(this._index=r.index,this._directoryEntries=r.directoryEntries,this._eocd=r.eocd,this.data=r.data):(this.data=r,this.populateIndex())}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){try{t.computeIndex(e.zipData,function(o){var a=new t(o,e.name,!1);i(null,a)},!1)}catch(o){i(o)}},t.isAvailable=function(){return!0},t.RegisterDecompressionMethod=function(e,i){Qn[e]=i},t.computeIndex=function(e,i,o){o===void 0&&(o=!0),o&&console.warn("[ZipFS] ZipFS.computeIndex is now deprecated, and will be removed in the next major release. Please update your code to use 'ZipFS.Create({ zipData: zip file as a Buffer}, cb)' instead.");var a=new we,s=t.getEOCD(e);if(s.diskNumber()!==s.cdDiskNumber())throw new c(u.EINVAL,"ZipFS does not support spanned zip files.");var h=s.cdOffset();if(h===4294967295)throw new c(u.EINVAL,"ZipFS does not support Zip64.");var d=h+s.cdSize();t.computeIndexResponsive(e,a,h,d,i,[],s)},t.getEOCD=function(e){for(var i=22,o=Math.min(i+65535,e.length-1),a=i;a<o;a++)if(e.readUInt32LE(e.length-a)===101010256)return new be(e.slice(e.length-a));throw new c(u.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.")},t.addToIndex=function(e,i){var o=e.fileName();if(o.charAt(0)==="/")throw new Error("WHY IS THIS ABSOLUTE");o.charAt(o.length-1)==="/"&&(o=o.substr(0,o.length-1)),e.isDirectory()?i.addPathFast("/"+o,new le(e)):i.addPathFast("/"+o,new nr(e))},t.computeIndexResponsive=function(e,i,o,a,s,h,d){if(o<a){for(var R=0;R++<200&&o<a;){var L=new Tt(e,e.slice(o));t.addToIndex(L,i),o+=L.totalSize(),h.push(L)}Jr(function(){t.computeIndexResponsive(e,i,o,a,s,h,d)})}else s(new ei(i,h,d,e))},t.prototype.getName=function(){return t.Name+(this.name!==""?" "+this.name:"")},t.prototype.getCentralDirectoryEntry=function(e){var i=this._index.getInode(e);if(i===null)throw c.ENOENT(e);if(De(i))return i.getData();if(Pe(i))return i.getData();throw c.EPERM("Invalid inode: "+i)},t.prototype.getCentralDirectoryEntryAt=function(e){var i=this._directoryEntries[e];if(!i)throw new RangeError("Invalid directory index: "+e+".");return i},t.prototype.getNumberOfCentralDirectoryEntries=function(){return this._directoryEntries.length},t.prototype.getEndOfCentralDirectory=function(){return this._eocd},t.prototype.diskSpace=function(e,i){i(this.data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,i){var o=this._index.getInode(e);if(o===null)throw c.ENOENT(e);var a;if(De(o))a=o.getData().getStats();else if(Pe(o))a=o.getStats();else throw new c(u.EINVAL,"Invalid inode.");return a},t.prototype.openSync=function(e,i,o){if(i.isWriteable())throw new c(u.EPERM,e);var a=this._index.getInode(e);if(a)if(De(a)){var s=a.getData(),h=s.getStats();switch(i.pathExistsAction()){case m.THROW_EXCEPTION:case m.TRUNCATE_FILE:throw c.EEXIST(e);case m.NOP:return new oe(this,e,i,h,s.getData());default:throw new c(u.EINVAL,"Invalid FileMode object.")}}else throw c.EISDIR(e);else throw c.ENOENT(e)},t.prototype.readdirSync=function(e){var i=this._index.getInode(e);if(i){if(Pe(i))return i.getListing();throw c.ENOTDIR(e)}else throw c.ENOENT(e)},t.prototype.readFileSync=function(e,i,o){var a=this.openSync(e,o,420);try{var s=a,h=s.getBuffer();return i===null?Nt(h):h.toString(i)}finally{a.closeSync()}},t.prototype.populateIndex=function(){var e=this,i=this._eocd=t.getEOCD(this.data);if(i.diskNumber()!==i.cdDiskNumber())throw new c(u.EINVAL,"ZipFS does not support spanned zip files.");var o=i.cdOffset();if(o===4294967295)throw new c(u.EINVAL,"ZipFS does not support Zip64.");for(var a=o+i.cdSize();o<a;){var s=new Tt(e.data,e.data.slice(o));o+=s.totalSize(),t.addToIndex(s,e._index),e._directoryEntries.push(s)}},t}($t);qe.Name="ZipFS",qe.Options={zipData:{type:"object",description:"The zip file as a Buffer object.",validator:k},name:{type:"string",optional:!0,description:"The name of the zip file (optional)."}},qe.CompressionMethod=ir,qe.RegisterDecompressionMethod(ir.DEFLATE,function(n,t,r){return kt(ea(n.slice(0,t),{chunkSize:r}))}),qe.RegisterDecompressionMethod(ir.STORED,function(n,t,r){return Nt(n,0,r)});var ra="IEEE_P1282";function he(n,t,r){return n.toString("ascii",t,t+r).trim()}function $r(n,t,r){if(r===1)return String.fromCharCode(n[t]);for(var e=Math.floor(r/2),i=new Array(e),o=0;o<e;o++){var a=t+(o<<1);i[o]=String.fromCharCode(n[a+1]|n[a]<<8)}return i.join("")}function Oe(n,t){var r=parseInt(he(n,t,4),10),e=parseInt(he(n,t+4,2),10),i=parseInt(he(n,t+6,2),10),o=parseInt(he(n,t+8,2),10),a=parseInt(he(n,t+10,2),10),s=parseInt(he(n,t+12,2),10),h=parseInt(he(n,t+14,2),10);return new Date(r,e,i,o,a,s,h*100)}function Ge(n,t){var r=n[t],e=n[t+1],i=n[t+2],o=n[t+3],a=n[t+4],s=n[t+5];return new Date(r,e-1,i,o,a,s)}function na(n,t){var r=n.slice(t),e=new Kt(r);switch(e.signatureWord()){case 17221:return new ai(r);case 20548:return new aa(r);case 21328:return new si(r);case 21332:return new ui(r);case 17746:return new ci(r);case 17747:return new sa(r);case 20568:return new li(r);case 20558:return new ua(r);case 21324:return new tn(r);case 20045:return new hi(r);case 17228:return new en(r);case 20556:return new ca(r);case 21061:return new pi(r);case 21574:return new di(r);case 21318:return new fa(r);case 21074:return new fi(r);default:return e}}function ri(n,t,r,e){r=r-4;for(var i=new Array;t<r;){var o=na(n,t),a=o.length();if(a===0)return i;if(t+=a,o instanceof ui)break;o instanceof ai?i=i.concat(o.getEntries(e)):i.push(o)}return i}var or=function(t){this._data=t};or.prototype.type=function(){return this._data[0]},or.prototype.standardIdentifier=function(){return he(this._data,1,5)},or.prototype.version=function(){return this._data[6]},or.prototype.data=function(){return this._data.slice(7,2048)};var ni=function(n){function t(r){n.call(this,r),this._root=null}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.systemIdentifier=function(){return this._getString32(8)},t.prototype.volumeIdentifier=function(){return this._getString32(40)},t.prototype.volumeSpaceSize=function(){return this._data.readUInt32LE(80)},t.prototype.volumeSetSize=function(){return this._data.readUInt16LE(120)},t.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(124)},t.prototype.logicalBlockSize=function(){return this._data.readUInt16LE(128)},t.prototype.pathTableSize=function(){return this._data.readUInt32LE(132)},t.prototype.locationOfTypeLPathTable=function(){return this._data.readUInt32LE(140)},t.prototype.locationOfOptionalTypeLPathTable=function(){return this._data.readUInt32LE(144)},t.prototype.locationOfTypeMPathTable=function(){return this._data.readUInt32BE(148)},t.prototype.locationOfOptionalTypeMPathTable=function(){return this._data.readUInt32BE(152)},t.prototype.rootDirectoryEntry=function(e){return this._root===null&&(this._root=this._constructRootDirectoryRecord(this._data.slice(156)),this._root.rootCheckForRockRidge(e)),this._root},t.prototype.volumeSetIdentifier=function(){return this._getString(190,128)},t.prototype.publisherIdentifier=function(){return this._getString(318,128)},t.prototype.dataPreparerIdentifier=function(){return this._getString(446,128)},t.prototype.applicationIdentifier=function(){return this._getString(574,128)},t.prototype.copyrightFileIdentifier=function(){return this._getString(702,38)},t.prototype.abstractFileIdentifier=function(){return this._getString(740,36)},t.prototype.bibliographicFileIdentifier=function(){return this._getString(776,37)},t.prototype.volumeCreationDate=function(){return Oe(this._data,813)},t.prototype.volumeModificationDate=function(){return Oe(this._data,830)},t.prototype.volumeExpirationDate=function(){return Oe(this._data,847)},t.prototype.volumeEffectiveDate=function(){return Oe(this._data,864)},t.prototype.fileStructureVersion=function(){return this._data[881]},t.prototype.applicationUsed=function(){return this._data.slice(883,1395)},t.prototype.reserved=function(){return this._data.slice(1395,2048)},t.prototype._getString32=function(e){return this._getString(e,32)},t}(or),ia=function(n){function t(r){if(n.call(this,r),this.type()!==1)throw new c(u.EIO,"Invalid primary volume descriptor.")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"ISO9660"},t.prototype._constructRootDirectoryRecord=function(e){return new ii(e,-1)},t.prototype._getString=function(e,i){return this._getString(e,i)},t}(ni),oa=function(n){function t(r){if(n.call(this,r),this.type()!==2)throw new c(u.EIO,"Invalid supplementary volume descriptor.");var e=this.escapeSequence(),i=e[2];if(e[0]!==37||e[1]!==47||i!==64&&i!==67&&i!==69)throw new c(u.EIO,"Unrecognized escape sequence for SupplementaryVolumeDescriptor: "+e.toString())}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"Joliet"},t.prototype.escapeSequence=function(){return this._data.slice(88,120)},t.prototype._constructRootDirectoryRecord=function(e){return new oi(e,-1)},t.prototype._getString=function(e,i){return $r(this._data,e,i)},t}(ni),zt=function(t,r){this._suEntries=null,this._fileOrDir=null,this._data=t,this._rockRidgeOffset=r};zt.prototype.hasRockRidge=function(){return this._rockRidgeOffset>-1},zt.prototype.getRockRidgeOffset=function(){return this._rockRidgeOffset},zt.prototype.rootCheckForRockRidge=function(t){var r=this.getDirectory(t);this._rockRidgeOffset=r.getDotEntry(t)._getRockRidgeOffset(t),this._rockRidgeOffset>-1&&(this._fileOrDir=null)},zt.prototype.length=function(){return this._data[0]},zt.prototype.extendedAttributeRecordLength=function(){return this._data[1]},zt.prototype.lba=function(){return this._data.readUInt32LE(2)*2048},zt.prototype.dataLength=function(){return this._data.readUInt32LE(10)},zt.prototype.recordingDate=function(){return Ge(this._data,18)},zt.prototype.fileFlags=function(){return this._data[25]},zt.prototype.fileUnitSize=function(){return this._data[26]},zt.prototype.interleaveGapSize=function(){return this._data[27]},zt.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(28)},zt.prototype.identifier=function(){return this._getString(33,this._data[32])},zt.prototype.fileName=function(t){if(this.hasRockRidge()){var r=this._rockRidgeFilename(t);if(r!==null)return r}var e=this.identifier();if(this.isDirectory(t))return e;var i=e.indexOf(";");return i===-1?e:e[i-1]==="."?e.slice(0,i-1):e.slice(0,i)},zt.prototype.isDirectory=function(t){var r=!!(this.fileFlags()&2);return!r&&this.hasRockRidge()&&(r=this.getSUEntries(t).filter(function(e){return e instanceof en}).length>0),r},zt.prototype.isSymlink=function(t){return this.hasRockRidge()&&this.getSUEntries(t).filter(function(r){return r instanceof tn}).length>0},zt.prototype.getSymlinkPath=function(t){for(var r="",e=this.getSUEntries(t),i=this._getGetString(),o=0,a=e;o<a.length;o+=1){var s=a[o];if(s instanceof tn){for(var h=s.componentRecords(),d=0,R=h;d<R.length;d+=1){var L=R[d],B=L.flags();B&2?r+="./":B&4?r+="../":B&8?r+="/":(r+=L.content(i),B&1||(r+="/"))}if(!s.continueFlag())break}}return r.length>1&&r[r.length-1]==="/"?r.slice(0,r.length-1):r},zt.prototype.getFile=function(t){if(this.isDirectory(t))throw new Error("Tried to get a File from a directory.");return this._fileOrDir===null&&(this._fileOrDir=t.slice(this.lba(),this.lba()+this.dataLength())),this._fileOrDir},zt.prototype.getDirectory=function(t){if(!this.isDirectory(t))throw new Error("Tried to get a Directory from a file.");return this._fileOrDir===null&&(this._fileOrDir=this._constructDirectory(t)),this._fileOrDir},zt.prototype.getSUEntries=function(t){return this._suEntries||this._constructSUEntries(t),this._suEntries},zt.prototype._rockRidgeFilename=function(t){var r=this.getSUEntries(t).filter(function(h){return h instanceof hi});if(r.length===0||r[0].flags()&6)return null;for(var e="",i=this._getGetString(),o=0,a=r;o<a.length;o+=1){var s=a[o];if(e+=s.name(i),!(s.flags()&1))break}return e},zt.prototype._constructSUEntries=function(t){var r=33+this._data[32];r%2===1&&r++,r+=this._rockRidgeOffset,this._suEntries=ri(this._data,r,this.length(),t)},zt.prototype._getRockRidgeOffset=function(t){this._rockRidgeOffset=0;var r=this.getSUEntries(t);if(r.length>0){var e=r[0];if(e instanceof si&&e.checkBytesPass())for(var i=1;i<r.length;i++){var o=r[i];if(o instanceof fi||o instanceof ci&&o.extensionIdentifier()===ra)return e.bytesSkipped()}}return this._rockRidgeOffset=-1,-1};var ii=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,i){return he(this._data,e,i)},t.prototype._constructDirectory=function(e){return new la(this,e)},t.prototype._getGetString=function(){return he},t}(zt),oi=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,i){return $r(this._data,e,i)},t.prototype._constructDirectory=function(e){return new ha(this,e)},t.prototype._getGetString=function(){return $r},t}(zt),Kt=function(t){this._data=t};Kt.prototype.signatureWord=function(){return this._data.readUInt16BE(0)},Kt.prototype.signatureWordString=function(){return he(this._data,0,2)},Kt.prototype.length=function(){return this._data[2]},Kt.prototype.suVersion=function(){return this._data[3]};var ai=function(n){function t(r){n.call(this,r),this._entries=null}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.continuationLba=function(){return this._data.readUInt32LE(4)},t.prototype.continuationLbaOffset=function(){return this._data.readUInt32LE(12)},t.prototype.continuationLength=function(){return this._data.readUInt32LE(20)},t.prototype.getEntries=function(e){if(!this._entries){var i=this.continuationLba()*2048+this.continuationLbaOffset();this._entries=ri(e,i,this.continuationLength(),e)}return this._entries},t}(Kt),aa=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(Kt),si=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.checkBytesPass=function(){return this._data[4]===190&&this._data[5]===239},t.prototype.bytesSkipped=function(){return this._data[6]},t}(Kt),ui=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(Kt),ci=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.identifierLength=function(){return this._data[4]},t.prototype.descriptorLength=function(){return this._data[5]},t.prototype.sourceLength=function(){return this._data[6]},t.prototype.extensionVersion=function(){return this._data[7]},t.prototype.extensionIdentifier=function(){return he(this._data,8,this.identifierLength())},t.prototype.extensionDescriptor=function(){return he(this._data,8+this.identifierLength(),this.descriptorLength())},t.prototype.extensionSource=function(){return he(this._data,8+this.identifierLength()+this.descriptorLength(),this.sourceLength())},t}(Kt),sa=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.extensionSequence=function(){return this._data[4]},t}(Kt),fi=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(Kt),li=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.mode=function(){return this._data.readUInt32LE(4)},t.prototype.fileLinks=function(){return this._data.readUInt32LE(12)},t.prototype.uid=function(){return this._data.readUInt32LE(20)},t.prototype.gid=function(){return this._data.readUInt32LE(28)},t.prototype.inode=function(){return this._data.readUInt32LE(36)},t}(Kt),ua=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.devTHigh=function(){return this._data.readUInt32LE(4)},t.prototype.devTLow=function(){return this._data.readUInt32LE(12)},t}(Kt),tn=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.continueFlag=function(){return this.flags()&1},t.prototype.componentRecords=function(){for(var e=this,i=new Array,o=5;o<this.length();){var a=new gr(e._data.slice(o));i.push(a),o+=a.length()}return i},t}(Kt),gr=function(t){this._data=t};gr.prototype.flags=function(){return this._data[0]},gr.prototype.length=function(){return 2+this.componentLength()},gr.prototype.componentLength=function(){return this._data[1]},gr.prototype.content=function(t){return t(this._data,2,this.componentLength())};var hi=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.name=function(e){return e(this._data,5,this.length()-5)},t}(Kt),en=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.childDirectoryLba=function(){return this._data.readUInt32LE(4)},t}(Kt),ca=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.parentDirectoryLba=function(){return this._data.readUInt32LE(4)},t}(Kt),pi=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(Kt),di=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.creation=function(){return this.flags()&1?this._longFormDates()?Oe(this._data,5):Ge(this._data,5):null},t.prototype.modify=function(){if(this.flags()&2){var e=this.flags()&1?1:0;return this._longFormDates?Oe(this._data,5+e*17):Ge(this._data,5+e*7)}else return null},t.prototype.access=function(){if(this.flags()&4){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,this._longFormDates?Oe(this._data,5+e*17):Ge(this._data,5+e*7)}else return null},t.prototype.backup=function(){if(this.flags()&16){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,this._longFormDates?Oe(this._data,5+e*17):Ge(this._data,5+e*7)}else return null},t.prototype.expiration=function(){if(this.flags()&32){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,e+=this.flags()&16?1:0,this._longFormDates?Oe(this._data,5+e*17):Ge(this._data,5+e*7)}else return null},t.prototype.effective=function(){if(this.flags()&64){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,e+=this.flags()&16?1:0,e+=this.flags()&32?1:0,this._longFormDates?Oe(this._data,5+e*17):Ge(this._data,5+e*7)}else return null},t.prototype._longFormDates=function(){return!!this.flags()},t}(Kt),fa=function(n){function t(r){n.call(this,r)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.virtualSizeHigh=function(){return this._data.readUInt32LE(4)},t.prototype.virtualSizeLow=function(){return this._data.readUInt32LE(12)},t.prototype.tableDepth=function(){return this._data[20]},t}(Kt),wr=function(t,r){var e=this;this._fileList=[],this._fileMap={},this._record=t;var i=t.lba(),o=i+t.dataLength();if(!(t.fileFlags()&2)){var a=t.getSUEntries(r).filter(function(R){return R instanceof en})[0];i=a.childDirectoryLba()*2048,o=1/0}for(;i<o;){var s=r[i];if(s===0){i++;continue}var h=e._constructDirectoryRecord(r.slice(i)),d=h.fileName(r);d!=="\0"&&d!==""?(!h.hasRockRidge()||h.getSUEntries(r).filter(function(R){return R instanceof pi}).length===0)&&(e._fileMap[d]=h,e._fileList.push(d)):o===1/0&&(o=i+h.dataLength()),i+=h.length()}};wr.prototype.getRecord=function(t){return this._fileMap[t]},wr.prototype.getFileList=function(){return this._fileList},wr.prototype.getDotEntry=function(t){return this._constructDirectoryRecord(t.slice(this._record.lba()))};var la=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new ii(e,this._record.getRockRidgeOffset())},t}(wr),ha=function(n){function t(r,e){n.call(this,r,e)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new oi(e,this._record.getRockRidgeOffset())},t}(wr),xr=function(n){function t(r,e,i){var o=this;e===void 0&&(e=""),i===void 0&&(i=!0),n.call(this),this._data=r,bt(i,t.Name,{data:"ISO data as a Buffer",name:e});for(var a=!1,s=16*2048,h=new Array;!a;){var d=r.slice(s),R=new or(d);switch(R.type()){case 1:h.push(new ia(d));break;case 2:h.push(new oa(d));break;case 255:a=!0;break}s+=2048}if(h.length===0)throw new c(u.EIO,"Unable to find a suitable volume descriptor.");h.forEach(function(L){(!o._pvd||o._pvd.type()!==2)&&(o._pvd=L)}),this._root=this._pvd.rootDirectoryEntry(r),this._name=e}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.Create=function(e,i){var o,a;try{o=new t(e.data,e.name,!1)}catch(s){s=s}finally{i(a,o)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){var e="IsoFS"+this._name+(this._pvd?"-"+this._pvd.name():"");return this._root&&this._root.hasRockRidge()&&(e+="-RockRidge"),e},t.prototype.diskSpace=function(e,i){i(this._data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,i){var o=this._getDirectoryRecord(e);if(o===null)throw c.ENOENT(e);return this._getStats(e,o)},t.prototype.openSync=function(e,i,o){if(i.isWriteable())throw new c(u.EPERM,e);var a=this._getDirectoryRecord(e);if(a){if(a.isSymlink(this._data))return this.openSync(p.resolve(e,a.getSymlinkPath(this._data)),i,o);if(a.isDirectory(this._data))throw c.EISDIR(e);var s=a.getFile(this._data),h=this._getStats(e,a);switch(i.pathExistsAction()){case m.THROW_EXCEPTION:case m.TRUNCATE_FILE:throw c.EEXIST(e);case m.NOP:return new oe(this,e,i,h,s);default:throw new c(u.EINVAL,"Invalid FileMode object.")}}else throw c.ENOENT(e)},t.prototype.readdirSync=function(e){var i=this._getDirectoryRecord(e);if(i){if(i.isDirectory(this._data))return i.getDirectory(this._data).getFileList().slice(0);throw c.ENOTDIR(e)}else throw c.ENOENT(e)},t.prototype.readFileSync=function(e,i,o){var a=this.openSync(e,o,420);try{var s=a,h=s.getBuffer();return i===null?Nt(h):h.toString(i)}finally{a.closeSync()}},t.prototype._getDirectoryRecord=function(e){var i=this;if(e==="/")return this._root;for(var o=e.split("/").slice(1),a=this._root,s=0,h=o;s<h.length;s+=1){var d=h[s];if(a.isDirectory(i._data)){if(a=a.getDirectory(i._data).getRecord(d),!a)return null}else return null}return a},t.prototype._getStats=function(e,i){if(i.isSymlink(this._data)){var o=p.resolve(e,i.getSymlinkPath(this._data)),a=this._getDirectoryRecord(o);return a?this._getStats(o,a):null}else{var s=i.dataLength(),h=365,d=i.recordingDate(),R=d,L=d,B=d;if(i.hasRockRidge())for(var J=i.getSUEntries(this._data),tt=0,ut=J;tt<ut.length;tt+=1){var pt=ut[tt];if(pt instanceof li)h=pt.mode();else if(pt instanceof di){var It=pt.flags();It&4&&(R=pt.access()),It&2&&(L=pt.modify()),It&1&&(B=pt.creation())}}return h=h&365,new D(i.isDirectory(this._data)?T.DIRECTORY:T.FILE,s,h,R,L,B)}},t}($t);xr.Name="IsoFS",xr.Options={data:{type:"object",description:"The ISO file in a buffer",validator:k}},[_,Er,Ir,$e,br,tr,fr,xr,hr,er,yr,Lr,Dr,qe].forEach(function(n){var t=n.Create;n.Create=function(r,e){var i=typeof r=="function",o=i?r:e,a=i?{}:r;function s(h){h?o(h):t.call(n,a,o)}b(n,a,s)}});var Cr={AsyncMirror:_,Dropbox:Er,Emscripten:Ir,FolderAdapter:$e,HTML5FS:br,InMemory:tr,IndexedDB:fr,IsoFS:xr,LocalStorage:hr,MountableFileSystem:er,OverlayFS:yr,WorkerFS:Lr,XmlHttpRequest:Dr,ZipFS:qe};N.initializeTTYs&&N.initializeTTYs();function pa(n){n.Buffer=I,n.process=N;var t=n.require?n.require:null;n.require=function(r){var e=yi(r);return e||t.apply(null,Array.prototype.slice.call(arguments,0))}}function da(n,t){Cr[n]=t}function yi(n){switch(n){case"fs":return st;case"path":return p;case"buffer":return w;case"process":return N;case"bfs_utils":return X;default:return Cr[n]}}function vi(n){return st.initialize(n)}function ya(n,t){rn(n,function(r,e){e?(vi(e),t()):t(r)})}function rn(n,t){var r=n.fs;if(!r)return t(new c(u.EPERM,'Missing "fs" property on configuration object.'));var e=n.options,i=0,o=!1;function a(){if(!o){o=!0;var d=Cr[r];d?d.Create(e,t):t(new c(u.EPERM,"File system "+r+" is not available in BrowserFS."))}}if(e!==null&&typeof e=="object"){var s=!1,h=Object.keys(e).filter(function(d){return d!=="fs"});h.forEach(function(d){var R=e[d];R!==null&&typeof R=="object"&&R.fs&&(i++,rn(R,function(L,B){if(i--,L){if(o)return;o=!0,t(L)}else e[d]=B,i===0&&s&&a()}))}),s=!0}i===0&&a()}"ab".substr(-1)!=="b"&&(String.prototype.substr=function(n){return function(t,r){return t<0&&(t=this.length+t),n.call(this,t,r)}}(String.prototype.substr)),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&(Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(n,t){n===void 0&&(n=0),t===void 0&&(t=this.length);var r=this;return n<0&&(n=this.length+n,n<0&&(n=0)),t<0&&(t=this.length+t,t<0&&(t=0)),t<n&&(t=n),new Uint8Array(r.buffer,r.byteOffset+n,t-n)})),A.install=pa,A.registerFileSystem=da,A.BFSRequire=yi,A.initialize=vi,A.configure=ya,A.getFileSystem=rn,A.EmscriptenFS=_t,A.FileSystem=Cr,A.Errors=v,A.setImmediate=Jr}).call(A,F(1),function(){return this}(),F(5)(q),F(6))},function(q,A,F){q.exports=F(2).Buffer},function(q,A,F){(function(u){var x=F(3),E=F(4);A.Buffer=u,A.SlowBuffer=H,A.INSPECT_MAX_BYTES=50;var N=2147483647;A.kMaxLength=N,u.TYPED_ARRAY_SUPPORT=w(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function w(){try{var _=new Uint8Array(1);return _.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},_.foo()===42}catch{return!1}}function p(_){if(_>N)throw new RangeError("Invalid typed array length");var f=new Uint8Array(_);return f.__proto__=u.prototype,f}function u(_,f,l){if(typeof _=="number"){if(typeof f=="string")throw new Error("If encoding is specified then the first argument must be a string");return m(_)}return g(_,f,l)}typeof Symbol<"u"&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),u.poolSize=8192;function g(_,f,l){if(typeof _=="number")throw new TypeError('"value" argument must not be a number');return re(_)?D(_,f,l):typeof _=="string"?O(_,f):et(_)}u.from=function(_,f,l){return g(_,f,l)},u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array;function c(_){if(typeof _!="number")throw new TypeError('"size" argument must be a number');if(_<0)throw new RangeError('"size" argument must not be negative')}function v(_,f,l){return c(_),_<=0?p(_):f!==void 0?typeof l=="string"?p(_).fill(f,l):p(_).fill(f):p(_)}u.alloc=function(_,f,l){return v(_,f,l)};function m(_){return c(_),p(_<0?0:j(_)|0)}u.allocUnsafe=function(_){return m(_)},u.allocUnsafeSlow=function(_){return m(_)};function O(_,f){if((typeof f!="string"||f==="")&&(f="utf8"),!u.isEncoding(f))throw new TypeError('"encoding" must be a valid string encoding');var l=Et(_,f)|0,S=p(l),C=S.write(_,f);return C!==l&&(S=S.slice(0,C)),S}function T(_){for(var f=_.length<0?0:j(_.length)|0,l=p(f),S=0;S<f;S+=1)l[S]=_[S]&255;return l}function D(_,f,l){if(f<0||_.byteLength<f)throw new RangeError("'offset' is out of bounds");if(_.byteLength<f+(l||0))throw new RangeError("'length' is out of bounds");var S;return f===void 0&&l===void 0?S=new Uint8Array(_):l===void 0?S=new Uint8Array(_,f):S=new Uint8Array(_,f,l),S.__proto__=u.prototype,S}function et(_){if(u.isBuffer(_)){var f=j(_.length)|0,l=p(f);return l.length===0||_.copy(l,0,0,f),l}if(_){if(oe(_)||"length"in _)return typeof _.length!="number"||_e(_.length)?p(0):T(_);if(_.type==="Buffer"&&Array.isArray(_.data))return T(_.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function j(_){if(_>=N)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+N.toString(16)+" bytes");return _|0}function H(_){return+_!=_&&(_=0),u.alloc(+_)}u.isBuffer=function(f){return f!=null&&f._isBuffer===!0},u.compare=function(f,l){if(!u.isBuffer(f)||!u.isBuffer(l))throw new TypeError("Arguments must be Buffers");if(f===l)return 0;for(var S=f.length,C=l.length,W=0,Y=Math.min(S,C);W<Y;++W)if(f[W]!==l[W]){S=f[W],C=l[W];break}return S<C?-1:C<S?1:0},u.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(f,l){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return u.alloc(0);var S;if(l===void 0)for(l=0,S=0;S<f.length;++S)l+=f[S].length;var C=u.allocUnsafe(l),W=0;for(S=0;S<f.length;++S){var Y=f[S];if(!u.isBuffer(Y))throw new TypeError('"list" argument must be an Array of Buffers');Y.copy(C,W),W+=Y.length}return C};function Et(_,f){if(u.isBuffer(_))return _.length;if(oe(_)||re(_))return _.byteLength;typeof _!="string"&&(_=""+_);var l=_.length;if(l===0)return 0;for(var S=!1;;)switch(f){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":case void 0:return lt(_).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return $t(_).length;default:if(S)return lt(_).length;f=(""+f).toLowerCase(),S=!0}}u.byteLength=Et;function Q(_,f,l){var S=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,f>>>=0,l<=f))return"";for(_||(_="utf8");;)switch(_){case"hex":return kt(this,f,l);case"utf8":case"utf-8":return Xt(this,f,l);case"ascii":return G(this,f,l);case"latin1":case"binary":return ct(this,f,l);case"base64":return wt(this,f,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return vt(this,f,l);default:if(S)throw new TypeError("Unknown encoding: "+_);_=(_+"").toLowerCase(),S=!0}}u.prototype._isBuffer=!0;function St(_,f,l){var S=_[f];_[f]=_[l],_[l]=S}u.prototype.swap16=function(){var f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var l=0;l<f;l+=2)St(this,l,l+1);return this},u.prototype.swap32=function(){var f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var l=0;l<f;l+=4)St(this,l,l+3),St(this,l+1,l+2);return this},u.prototype.swap64=function(){var f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var l=0;l<f;l+=8)St(this,l,l+7),St(this,l+1,l+6),St(this,l+2,l+5),St(this,l+3,l+4);return this},u.prototype.toString=function(){var f=this.length;return f===0?"":arguments.length===0?Xt(this,0,f):Q.apply(this,arguments)},u.prototype.equals=function(f){if(!u.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:u.compare(this,f)===0},u.prototype.inspect=function(){var f="",l=A.INSPECT_MAX_BYTES;return this.length>0&&(f=this.toString("hex",0,l).match(/.{2}/g).join(" "),this.length>l&&(f+=" ... ")),"<Buffer "+f+">"},u.prototype.compare=function(f,l,S,C,W){if(!u.isBuffer(f))throw new TypeError("Argument must be a Buffer");if(l===void 0&&(l=0),S===void 0&&(S=f?f.length:0),C===void 0&&(C=0),W===void 0&&(W=this.length),l<0||S>f.length||C<0||W>this.length)throw new RangeError("out of range index");if(C>=W&&l>=S)return 0;if(C>=W)return-1;if(l>=S)return 1;if(l>>>=0,S>>>=0,C>>>=0,W>>>=0,this===f)return 0;for(var Y=W-C,Ot=S-l,Lt=Math.min(Y,Ot),Ct=this.slice(C,W),Yt=f.slice(l,S),At=0;At<Lt;++At)if(Ct[At]!==Yt[At]){Y=Ct[At],Ot=Yt[At];break}return Y<Ot?-1:Ot<Y?1:0};function ht(_,f,l,S,C){if(_.length===0)return-1;if(typeof l=="string"?(S=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,_e(l)&&(l=C?0:_.length-1),l<0&&(l=_.length+l),l>=_.length){if(C)return-1;l=_.length-1}else if(l<0)if(C)l=0;else return-1;if(typeof f=="string"&&(f=u.from(f,S)),u.isBuffer(f))return f.length===0?-1:U(_,f,l,S,C);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?C?Uint8Array.prototype.indexOf.call(_,f,l):Uint8Array.prototype.lastIndexOf.call(_,f,l):U(_,[f],l,S,C);throw new TypeError("val must be string, number or Buffer")}function U(_,f,l,S,C){var W=1,Y=_.length,Ot=f.length;if(S!==void 0&&(S=String(S).toLowerCase(),S==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(_.length<2||f.length<2)return-1;W=2,Y/=2,Ot/=2,l/=2}function Lt(Ke,ze){return W===1?Ke[ze]:Ke.readUInt16BE(ze*W)}var Ct;if(C){var Yt=-1;for(Ct=l;Ct<Y;Ct++)if(Lt(_,Ct)===Lt(f,Yt===-1?0:Ct-Yt)){if(Yt===-1&&(Yt=Ct),Ct-Yt+1===Ot)return Yt*W}else Yt!==-1&&(Ct-=Ct-Yt),Yt=-1}else for(l+Ot>Y&&(l=Y-Ot),Ct=l;Ct>=0;Ct--){for(var At=!0,Se=0;Se<Ot;Se++)if(Lt(_,Ct+Se)!==Lt(f,Se)){At=!1;break}if(At)return Ct}return-1}u.prototype.includes=function(f,l,S){return this.indexOf(f,l,S)!==-1},u.prototype.indexOf=function(f,l,S){return ht(this,f,l,S,!0)},u.prototype.lastIndexOf=function(f,l,S){return ht(this,f,l,S,!1)};function $(_,f,l,S){l=Number(l)||0;var C=_.length-l;S?(S=Number(S),S>C&&(S=C)):S=C;var W=f.length;if(W%2!==0)throw new TypeError("Invalid hex string");S>W/2&&(S=W/2);for(var Y=0;Y<S;++Y){var Ot=parseInt(f.substr(Y*2,2),16);if(_e(Ot))return Y;_[l+Y]=Ot}return Y}function st(_,f,l,S){return yt(lt(f,_.length-l),_,l,S)}function Rt(_,f,l,S){return yt(_t(f),_,l,S)}function dt(_,f,l,S){return Rt(_,f,l,S)}function Dt(_,f,l,S){return yt($t(f),_,l,S)}function bt(_,f,l,S){return yt(K(f,_.length-l),_,l,S)}u.prototype.write=function(f,l,S,C){if(l===void 0)C="utf8",S=this.length,l=0;else if(S===void 0&&typeof l=="string")C=l,S=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(S)?(S=S>>>0,C===void 0&&(C="utf8")):(C=S,S=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var W=this.length-l;if((S===void 0||S>W)&&(S=W),f.length>0&&(S<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");C||(C="utf8");for(var Y=!1;;)switch(C){case"hex":return $(this,f,l,S);case"utf8":case"utf-8":return st(this,f,l,S);case"ascii":return Rt(this,f,l,S);case"latin1":case"binary":return dt(this,f,l,S);case"base64":return Dt(this,f,l,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return bt(this,f,l,S);default:if(Y)throw new TypeError("Unknown encoding: "+C);C=(""+C).toLowerCase(),Y=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function wt(_,f,l){return f===0&&l===_.length?x.fromByteArray(_):x.fromByteArray(_.slice(f,l))}function Xt(_,f,l){l=Math.min(_.length,l);for(var S=[],C=f;C<l;){var W=_[C],Y=null,Ot=W>239?4:W>223?3:W>191?2:1;if(C+Ot<=l){var Lt,Ct,Yt,At;switch(Ot){case 1:W<128&&(Y=W);break;case 2:Lt=_[C+1],(Lt&192)===128&&(At=(W&31)<<6|Lt&63,At>127&&(Y=At));break;case 3:Lt=_[C+1],Ct=_[C+2],(Lt&192)===128&&(Ct&192)===128&&(At=(W&15)<<12|(Lt&63)<<6|Ct&63,At>2047&&(At<55296||At>57343)&&(Y=At));break;case 4:Lt=_[C+1],Ct=_[C+2],Yt=_[C+3],(Lt&192)===128&&(Ct&192)===128&&(Yt&192)===128&&(At=(W&15)<<18|(Lt&63)<<12|(Ct&63)<<6|Yt&63,At>65535&&At<1114112&&(Y=At))}}Y===null?(Y=65533,Ot=1):Y>65535&&(Y-=65536,S.push(Y>>>10&1023|55296),Y=56320|Y&1023),S.push(Y),C+=Ot}return M(S)}var P=4096;function M(_){var f=_.length;if(f<=P)return String.fromCharCode.apply(String,_);for(var l="",S=0;S<f;)l+=String.fromCharCode.apply(String,_.slice(S,S+=P));return l}function G(_,f,l){var S="";l=Math.min(_.length,l);for(var C=f;C<l;++C)S+=String.fromCharCode(_[C]&127);return S}function ct(_,f,l){var S="";l=Math.min(_.length,l);for(var C=f;C<l;++C)S+=String.fromCharCode(_[C]);return S}function kt(_,f,l){var S=_.length;(!f||f<0)&&(f=0),(!l||l<0||l>S)&&(l=S);for(var C="",W=f;W<l;++W)C+=rt(_[W]);return C}function vt(_,f,l){for(var S=_.slice(f,l),C="",W=0;W<S.length;W+=2)C+=String.fromCharCode(S[W]+S[W+1]*256);return C}u.prototype.slice=function(f,l){var S=this.length;f=~~f,l=l===void 0?S:~~l,f<0?(f+=S,f<0&&(f=0)):f>S&&(f=S),l<0?(l+=S,l<0&&(l=0)):l>S&&(l=S),l<f&&(l=f);var C=this.subarray(f,l);return C.__proto__=u.prototype,C};function mt(_,f,l){if(_%1!==0||_<0)throw new RangeError("offset is not uint");if(_+f>l)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUIntLE=function(f,l,S){f=f>>>0,l=l>>>0,S||mt(f,l,this.length);for(var C=this[f],W=1,Y=0;++Y<l&&(W*=256);)C+=this[f+Y]*W;return C},u.prototype.readUIntBE=function(f,l,S){f=f>>>0,l=l>>>0,S||mt(f,l,this.length);for(var C=this[f+--l],W=1;l>0&&(W*=256);)C+=this[f+--l]*W;return C},u.prototype.readUInt8=function(f,l){return f=f>>>0,l||mt(f,1,this.length),this[f]},u.prototype.readUInt16LE=function(f,l){return f=f>>>0,l||mt(f,2,this.length),this[f]|this[f+1]<<8},u.prototype.readUInt16BE=function(f,l){return f=f>>>0,l||mt(f,2,this.length),this[f]<<8|this[f+1]},u.prototype.readUInt32LE=function(f,l){return f=f>>>0,l||mt(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},u.prototype.readUInt32BE=function(f,l){return f=f>>>0,l||mt(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},u.prototype.readIntLE=function(f,l,S){f=f>>>0,l=l>>>0,S||mt(f,l,this.length);for(var C=this[f],W=1,Y=0;++Y<l&&(W*=256);)C+=this[f+Y]*W;return W*=128,C>=W&&(C-=Math.pow(2,8*l)),C},u.prototype.readIntBE=function(f,l,S){f=f>>>0,l=l>>>0,S||mt(f,l,this.length);for(var C=l,W=1,Y=this[f+--C];C>0&&(W*=256);)Y+=this[f+--C]*W;return W*=128,Y>=W&&(Y-=Math.pow(2,8*l)),Y},u.prototype.readInt8=function(f,l){return f=f>>>0,l||mt(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},u.prototype.readInt16LE=function(f,l){f=f>>>0,l||mt(f,2,this.length);var S=this[f]|this[f+1]<<8;return S&32768?S|4294901760:S},u.prototype.readInt16BE=function(f,l){f=f>>>0,l||mt(f,2,this.length);var S=this[f+1]|this[f]<<8;return S&32768?S|4294901760:S},u.prototype.readInt32LE=function(f,l){return f=f>>>0,l||mt(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},u.prototype.readInt32BE=function(f,l){return f=f>>>0,l||mt(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},u.prototype.readFloatLE=function(f,l){return f=f>>>0,l||mt(f,4,this.length),E.read(this,f,!0,23,4)},u.prototype.readFloatBE=function(f,l){return f=f>>>0,l||mt(f,4,this.length),E.read(this,f,!1,23,4)},u.prototype.readDoubleLE=function(f,l){return f=f>>>0,l||mt(f,8,this.length),E.read(this,f,!0,52,8)},u.prototype.readDoubleBE=function(f,l){return f=f>>>0,l||mt(f,8,this.length),E.read(this,f,!1,52,8)};function Nt(_,f,l,S,C,W){if(!u.isBuffer(_))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>C||f<W)throw new RangeError('"value" argument is out of bounds');if(l+S>_.length)throw new RangeError("Index out of range")}u.prototype.writeUIntLE=function(f,l,S,C){if(f=+f,l=l>>>0,S=S>>>0,!C){var W=Math.pow(2,8*S)-1;Nt(this,f,l,S,W,0)}var Y=1,Ot=0;for(this[l]=f&255;++Ot<S&&(Y*=256);)this[l+Ot]=f/Y&255;return l+S},u.prototype.writeUIntBE=function(f,l,S,C){if(f=+f,l=l>>>0,S=S>>>0,!C){var W=Math.pow(2,8*S)-1;Nt(this,f,l,S,W,0)}var Y=S-1,Ot=1;for(this[l+Y]=f&255;--Y>=0&&(Ot*=256);)this[l+Y]=f/Ot&255;return l+S},u.prototype.writeUInt8=function(f,l,S){return f=+f,l=l>>>0,S||Nt(this,f,l,1,255,0),this[l]=f&255,l+1},u.prototype.writeUInt16LE=function(f,l,S){return f=+f,l=l>>>0,S||Nt(this,f,l,2,65535,0),this[l]=f&255,this[l+1]=f>>>8,l+2},u.prototype.writeUInt16BE=function(f,l,S){return f=+f,l=l>>>0,S||Nt(this,f,l,2,65535,0),this[l]=f>>>8,this[l+1]=f&255,l+2},u.prototype.writeUInt32LE=function(f,l,S){return f=+f,l=l>>>0,S||Nt(this,f,l,4,4294967295,0),this[l+3]=f>>>24,this[l+2]=f>>>16,this[l+1]=f>>>8,this[l]=f&255,l+4},u.prototype.writeUInt32BE=function(f,l,S){return f=+f,l=l>>>0,S||Nt(this,f,l,4,4294967295,0),this[l]=f>>>24,this[l+1]=f>>>16,this[l+2]=f>>>8,this[l+3]=f&255,l+4},u.prototype.writeIntLE=function(f,l,S,C){if(f=+f,l=l>>>0,!C){var W=Math.pow(2,8*S-1);Nt(this,f,l,S,W-1,-W)}var Y=0,Ot=1,Lt=0;for(this[l]=f&255;++Y<S&&(Ot*=256);)f<0&&Lt===0&&this[l+Y-1]!==0&&(Lt=1),this[l+Y]=(f/Ot>>0)-Lt&255;return l+S},u.prototype.writeIntBE=function(f,l,S,C){if(f=+f,l=l>>>0,!C){var W=Math.pow(2,8*S-1);Nt(this,f,l,S,W-1,-W)}var Y=S-1,Ot=1,Lt=0;for(this[l+Y]=f&255;--Y>=0&&(Ot*=256);)f<0&&Lt===0&&this[l+Y+1]!==0&&(Lt=1),this[l+Y]=(f/Ot>>0)-Lt&255;return l+S},u.prototype.writeInt8=function(f,l,S){return f=+f,l=l>>>0,S||Nt(this,f,l,1,127,-128),f<0&&(f=255+f+1),this[l]=f&255,l+1},u.prototype.writeInt16LE=function(f,l,S){return f=+f,l=l>>>0,S||Nt(this,f,l,2,32767,-32768),this[l]=f&255,this[l+1]=f>>>8,l+2},u.prototype.writeInt16BE=function(f,l,S){return f=+f,l=l>>>0,S||Nt(this,f,l,2,32767,-32768),this[l]=f>>>8,this[l+1]=f&255,l+2},u.prototype.writeInt32LE=function(f,l,S){return f=+f,l=l>>>0,S||Nt(this,f,l,4,2147483647,-2147483648),this[l]=f&255,this[l+1]=f>>>8,this[l+2]=f>>>16,this[l+3]=f>>>24,l+4},u.prototype.writeInt32BE=function(f,l,S){return f=+f,l=l>>>0,S||Nt(this,f,l,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[l]=f>>>24,this[l+1]=f>>>16,this[l+2]=f>>>8,this[l+3]=f&255,l+4};function jt(_,f,l,S,C,W){if(l+S>_.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function xt(_,f,l,S,C){return f=+f,l=l>>>0,C||jt(_,f,l,4),E.write(_,f,l,S,23,4),l+4}u.prototype.writeFloatLE=function(f,l,S){return xt(this,f,l,!0,S)},u.prototype.writeFloatBE=function(f,l,S){return xt(this,f,l,!1,S)};function k(_,f,l,S,C){return f=+f,l=l>>>0,C||jt(_,f,l,8),E.write(_,f,l,S,52,8),l+8}u.prototype.writeDoubleLE=function(f,l,S){return k(this,f,l,!0,S)},u.prototype.writeDoubleBE=function(f,l,S){return k(this,f,l,!1,S)},u.prototype.copy=function(f,l,S,C){if(S||(S=0),!C&&C!==0&&(C=this.length),l>=f.length&&(l=f.length),l||(l=0),C>0&&C<S&&(C=S),C===S||f.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("sourceStart out of bounds");if(C<0)throw new RangeError("sourceEnd out of bounds");C>this.length&&(C=this.length),f.length-l<C-S&&(C=f.length-l+S);var W=C-S,Y;if(this===f&&S<l&&l<C)for(Y=W-1;Y>=0;--Y)f[Y+l]=this[Y+S];else if(W<1e3)for(Y=0;Y<W;++Y)f[Y+l]=this[Y+S];else Uint8Array.prototype.set.call(f,this.subarray(S,S+W),l);return W},u.prototype.fill=function(f,l,S,C){if(typeof f=="string"){if(typeof l=="string"?(C=l,l=0,S=this.length):typeof S=="string"&&(C=S,S=this.length),f.length===1){var W=f.charCodeAt(0);W<256&&(f=W)}if(C!==void 0&&typeof C!="string")throw new TypeError("encoding must be a string");if(typeof C=="string"&&!u.isEncoding(C))throw new TypeError("Unknown encoding: "+C)}else typeof f=="number"&&(f=f&255);if(l<0||this.length<l||this.length<S)throw new RangeError("Out of range index");if(S<=l)return this;l=l>>>0,S=S===void 0?this.length:S>>>0,f||(f=0);var Y;if(typeof f=="number")for(Y=l;Y<S;++Y)this[Y]=f;else{var Ot=u.isBuffer(f)?f:new u(f,C),Lt=Ot.length;for(Y=0;Y<S-l;++Y)this[Y+l]=Ot[Y%Lt]}return this};var b=/[^+/0-9A-Za-z-_]/g;function X(_){if(_=_.trim().replace(b,""),_.length<2)return"";for(;_.length%4!==0;)_=_+"=";return _}function rt(_){return _<16?"0"+_.toString(16):_.toString(16)}function lt(_,f){f=f||1/0;for(var l,S=_.length,C=null,W=[],Y=0;Y<S;++Y){if(l=_.charCodeAt(Y),l>55295&&l<57344){if(!C){if(l>56319){(f-=3)>-1&&W.push(239,191,189);continue}else if(Y+1===S){(f-=3)>-1&&W.push(239,191,189);continue}C=l;continue}if(l<56320){(f-=3)>-1&&W.push(239,191,189),C=l;continue}l=(C-55296<<10|l-56320)+65536}else C&&(f-=3)>-1&&W.push(239,191,189);if(C=null,l<128){if((f-=1)<0)break;W.push(l)}else if(l<2048){if((f-=2)<0)break;W.push(l>>6|192,l&63|128)}else if(l<65536){if((f-=3)<0)break;W.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((f-=4)<0)break;W.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return W}function _t(_){for(var f=[],l=0;l<_.length;++l)f.push(_.charCodeAt(l)&255);return f}function K(_,f){for(var l,S,C,W=[],Y=0;Y<_.length&&!((f-=2)<0);++Y)l=_.charCodeAt(Y),S=l>>8,C=l%256,W.push(C),W.push(S);return W}function $t(_){return x.toByteArray(X(_))}function yt(_,f,l,S){for(var C=0;C<S&&!(C+l>=f.length||C>=_.length);++C)f[C+l]=_[C];return C}function re(_){return _ instanceof ArrayBuffer||_!=null&&_.constructor!=null&&_.constructor.name==="ArrayBuffer"&&typeof _.byteLength=="number"}function oe(_){return typeof ArrayBuffer.isView=="function"&&ArrayBuffer.isView(_)}function _e(_){return _!==_}}).call(A,F(1))},function(q,A){A.byteLength=u,A.toByteArray=g,A.fromByteArray=m;for(var F=[],I=[],x=typeof Uint8Array<"u"?Uint8Array:Array,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=0,w=E.length;N<w;++N)F[N]=E[N],I[E.charCodeAt(N)]=N;I[45]=62,I[95]=63;function p(O){var T=O.length;if(T%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return O[T-2]==="="?2:O[T-1]==="="?1:0}function u(O){return O.length*3/4-p(O)}function g(O){var T,D,et,j,H,Et,Q=O.length;H=p(O),Et=new x(Q*3/4-H),et=H>0?Q-4:Q;var St=0;for(T=0,D=0;T<et;T+=4,D+=3)j=I[O.charCodeAt(T)]<<18|I[O.charCodeAt(T+1)]<<12|I[O.charCodeAt(T+2)]<<6|I[O.charCodeAt(T+3)],Et[St++]=j>>16&255,Et[St++]=j>>8&255,Et[St++]=j&255;return H===2?(j=I[O.charCodeAt(T)]<<2|I[O.charCodeAt(T+1)]>>4,Et[St++]=j&255):H===1&&(j=I[O.charCodeAt(T)]<<10|I[O.charCodeAt(T+1)]<<4|I[O.charCodeAt(T+2)]>>2,Et[St++]=j>>8&255,Et[St++]=j&255),Et}function c(O){return F[O>>18&63]+F[O>>12&63]+F[O>>6&63]+F[O&63]}function v(O,T,D){for(var et,j=[],H=T;H<D;H+=3)et=(O[H]<<16)+(O[H+1]<<8)+O[H+2],j.push(c(et));return j.join("")}function m(O){for(var T,D=O.length,et=D%3,j="",H=[],Et=16383,Q=0,St=D-et;Q<St;Q+=Et)H.push(v(O,Q,Q+Et>St?St:Q+Et));return et===1?(T=O[D-1],j+=F[T>>2],j+=F[T<<4&63],j+="=="):et===2&&(T=(O[D-2]<<8)+O[D-1],j+=F[T>>10],j+=F[T>>4&63],j+=F[T<<2&63],j+="="),H.push(j),H.join("")}},function(q,A){A.read=function(F,I,x,E,N){var w,p,u=N*8-E-1,g=(1<<u)-1,c=g>>1,v=-7,m=x?N-1:0,O=x?-1:1,T=F[I+m];for(m+=O,w=T&(1<<-v)-1,T>>=-v,v+=u;v>0;w=w*256+F[I+m],m+=O,v-=8);for(p=w&(1<<-v)-1,w>>=-v,v+=E;v>0;p=p*256+F[I+m],m+=O,v-=8);if(w===0)w=1-c;else{if(w===g)return p?NaN:(T?-1:1)*(1/0);p=p+Math.pow(2,E),w=w-c}return(T?-1:1)*p*Math.pow(2,w-E)},A.write=function(F,I,x,E,N,w){var p,u,g,c=w*8-N-1,v=(1<<c)-1,m=v>>1,O=N===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=E?0:w-1,D=E?1:-1,et=I<0||I===0&&1/I<0?1:0;for(I=Math.abs(I),isNaN(I)||I===1/0?(u=isNaN(I)?1:0,p=v):(p=Math.floor(Math.log(I)/Math.LN2),I*(g=Math.pow(2,-p))<1&&(p--,g*=2),p+m>=1?I+=O/g:I+=O*Math.pow(2,1-m),I*g>=2&&(p++,g/=2),p+m>=v?(u=0,p=v):p+m>=1?(u=(I*g-1)*Math.pow(2,N),p=p+m):(u=I*Math.pow(2,m-1)*Math.pow(2,N),p=0));N>=8;F[x+T]=u&255,T+=D,u/=256,N-=8);for(p=p<<N|u,c+=N;c>0;F[x+T]=p&255,T+=D,p/=256,c-=8);F[x+T-D]|=et*128}},function(q,A){q.exports=function(F){return F.webpackPolyfill||(F.deprecate=function(){},F.paths=[],F.children=[],F.webpackPolyfill=1),F}},function(q,A,F){var I=F(7),x=new I,E={};function N(p){E[p]||(typeof x[p]=="function"?E[p]=function(){return x[p].apply(x,arguments)}:E[p]=x[p])}for(var w in x)N(w);E.initializeTTYs=function(){x.stdin===null&&(x.initializeTTYs(),E.stdin=x.stdin,E.stdout=x.stdout,E.stderr=x.stderr)},x.nextTick(function(){E.initializeTTYs()}),q.exports=E},function(q,A,F){(function(I){var x=this&&this.__extends||function(g,c){for(var v in c)c.hasOwnProperty(v)&&(g[v]=c[v]);function m(){this.constructor=g}g.prototype=c===null?Object.create(c):(m.prototype=c.prototype,new m)},E=F(8),N=null,w=function(){function g(c,v){this.fun=c,this.array=v}return g.prototype.run=function(){this.fun.apply(null,this.array)},g}(),p=function(){function g(){this._queue=[],this._draining=!1,this._currentQueue=null,this._queueIndex=-1}return g.prototype.push=function(c){var v=this;this._queue.push(c)===1&&!this._draining&&setTimeout(function(){return v._drainQueue()},0)},g.prototype._cleanUpNextTick=function(){this._draining=!1,this._currentQueue&&this._currentQueue.length?this._queue=this._currentQueue.concat(this._queue):this._queueIndex=-1,this._queue.length&&this._drainQueue()},g.prototype._drainQueue=function(){var c=this;if(!this._draining){var v=setTimeout(function(){return c._cleanUpNextTick()});this._draining=!0;for(var m=this._queue.length;m;){for(this._currentQueue=this._queue,this._queue=[];++this._queueIndex<m;)this._currentQueue&&this._currentQueue[this._queueIndex].run();this._queueIndex=-1,m=this._queue.length}this._currentQueue=null,this._draining=!1,clearTimeout(v)}},g}(),u=function(g){x(c,g);function c(){g.apply(this,arguments),this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[],this.execArgv=[],this.stdout=null,this.stderr=null,this.stdin=null,this.domain=null,this._queue=new p,this.execPath=I,this.env={},this.exitCode=0,this._gid=1,this._uid=1,this.version="v5.0",this.versions={http_parser:"0.0",node:"5.0",v8:"0.0",uv:"0.0",zlib:"0.0",ares:"0.0",icu:"0.0",modules:"0",openssl:"0.0"},this.config={target_defaults:{cflags:[],default_configuration:"Release",defines:[],include_dirs:[],libraries:[]},variables:{clang:0,host_arch:"x32",node_install_npm:!1,node_install_waf:!1,node_prefix:"",node_shared_cares:!1,node_shared_http_parser:!1,node_shared_libuv:!1,node_shared_zlib:!1,node_shared_v8:!1,node_use_dtrace:!1,node_use_etw:!1,node_use_openssl:!1,node_shared_openssl:!1,strict_aliasing:!1,target_arch:"x32",v8_use_snapshot:!1,v8_no_strict_aliasing:0,visibility:""}},this.pid=Math.random()*1e3|0,this.title="node",this.arch="x32",this._mask=18,this.connected=void 0}return c.prototype.chdir=function(v){N===null&&(N=F(9)),this._cwd=N.resolve(v)},c.prototype.cwd=function(){return this._cwd},c.prototype.uptime=function(){return(Date.now()-this.startTime)/1e3|0},c.prototype.nextTick=function(v){for(var m=[],O=1;O<arguments.length;O++)m[O-1]=arguments[O];this._queue.push(new w(v,m))},c.prototype.abort=function(){this.emit("abort")},c.prototype.exit=function(v){this.exitCode=v,this.emit("exit",[v])},c.prototype.getgid=function(){return this._gid},c.prototype.setgid=function(v){typeof v=="number"?this._gid=v:this._gid=1},c.prototype.getuid=function(){return this._uid},c.prototype.setuid=function(v){typeof v=="number"?this._uid=v:this._uid=1},c.prototype.kill=function(v,m){this.emit("kill",[v,m])},c.prototype.memoryUsage=function(){return{rss:0,heapTotal:0,heapUsed:0}},c.prototype.umask=function(v){v===void 0&&(v=this._mask);var m=this._mask;return this._mask=v,this.emit("umask",[v]),m},c.prototype.hrtime=function(){var v;typeof performance<"u"?v=performance.now():Date.now?v=Date.now():v=new Date().getTime();var m=v/1e3|0;return v-=m*1e3,v=v*1e6|0,[m,v]},c.prototype.initializeTTYs=function(){if(this.stdout===null){var v=F(10);this.stdout=new v,this.stderr=new v,this.stdin=new v}},c.prototype.disconnect=function(){},c}(E.EventEmitter);q.exports=u}).call(A,"/")},function(q,A){function F(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}q.exports=F,F.EventEmitter=F,F.prototype._events=void 0,F.prototype._maxListeners=void 0,F.defaultMaxListeners=10,F.prototype.setMaxListeners=function(w){if(!x(w)||w<0||isNaN(w))throw TypeError("n must be a positive number");return this._maxListeners=w,this},F.prototype.emit=function(w){var p,u,g,c,v,m;if(this._events||(this._events={}),w==="error"&&(!this._events.error||E(this._events.error)&&!this._events.error.length)){if(p=arguments[1],p instanceof Error)throw p;var O=new Error('Uncaught, unspecified "error" event. ('+p+")");throw O.context=p,O}if(u=this._events[w],N(u))return!1;if(I(u))switch(arguments.length){case 1:u.call(this);break;case 2:u.call(this,arguments[1]);break;case 3:u.call(this,arguments[1],arguments[2]);break;default:c=Array.prototype.slice.call(arguments,1),u.apply(this,c)}else if(E(u))for(c=Array.prototype.slice.call(arguments,1),m=u.slice(),g=m.length,v=0;v<g;v++)m[v].apply(this,c);return!0},F.prototype.addListener=function(w,p){var u;if(!I(p))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",w,I(p.listener)?p.listener:p),this._events[w]?E(this._events[w])?this._events[w].push(p):this._events[w]=[this._events[w],p]:this._events[w]=p,E(this._events[w])&&!this._events[w].warned&&(N(this._maxListeners)?u=F.defaultMaxListeners:u=this._maxListeners,u&&u>0&&this._events[w].length>u&&(this._events[w].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[w].length),typeof console.trace=="function"&&console.trace())),this},F.prototype.on=F.prototype.addListener,F.prototype.once=function(w,p){if(!I(p))throw TypeError("listener must be a function");var u=!1;function g(){this.removeListener(w,g),u||(u=!0,p.apply(this,arguments))}return g.listener=p,this.on(w,g),this},F.prototype.removeListener=function(w,p){var u,g,c,v;if(!I(p))throw TypeError("listener must be a function");if(!this._events||!this._events[w])return this;if(u=this._events[w],c=u.length,g=-1,u===p||I(u.listener)&&u.listener===p)delete this._events[w],this._events.removeListener&&this.emit("removeListener",w,p);else if(E(u)){for(v=c;v-- >0;)if(u[v]===p||u[v].listener&&u[v].listener===p){g=v;break}if(g<0)return this;u.length===1?(u.length=0,delete this._events[w]):u.splice(g,1),this._events.removeListener&&this.emit("removeListener",w,p)}return this},F.prototype.removeAllListeners=function(w){var p,u;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[w]&&delete this._events[w],this;if(arguments.length===0){for(p in this._events)p!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events={},this}if(u=this._events[w],I(u))this.removeListener(w,u);else if(u)for(;u.length;)this.removeListener(w,u[u.length-1]);return delete this._events[w],this},F.prototype.listeners=function(w){var p;return!this._events||!this._events[w]?p=[]:I(this._events[w])?p=[this._events[w]]:p=this._events[w].slice(),p},F.prototype.listenerCount=function(w){if(this._events){var p=this._events[w];if(I(p))return 1;if(p)return p.length}return 0},F.listenerCount=function(w,p){return w.listenerCount(p)};function I(w){return typeof w=="function"}function x(w){return typeof w=="number"}function E(w){return typeof w=="object"&&w!==null}function N(w){return w===void 0}},function(q,A,F){(function(I){var x=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function E(w){var p=x.exec(w);return p.shift(),p}var N=function(){function w(){}return w.normalize=function(p){p===""&&(p=".");var u=p.charAt(0)===w.sep;p=w._removeDuplicateSeps(p);for(var g=p.split(w.sep),c=[],v=0;v<g.length;v++){var m=g[v];m!=="."&&(m===".."&&(u||!u&&c.length>0&&c[0]!=="..")?c.pop():c.push(m))}if(!u&&c.length<2)switch(c.length){case 1:c[0]===""&&c.unshift(".");break;default:c.push(".")}return p=c.join(w.sep),u&&p.charAt(0)!==w.sep&&(p=w.sep+p),p},w.join=function(){for(var p=[],u=0;u<arguments.length;u++)p[u-0]=arguments[u];for(var g=[],c=0;c<p.length;c++){var v=p[c];if(typeof v!="string")throw new TypeError("Invalid argument type to path.join: "+typeof v);v!==""&&g.push(v)}return w.normalize(g.join(w.sep))},w.resolve=function(){for(var p=[],u=0;u<arguments.length;u++)p[u-0]=arguments[u];for(var g=[],c=0;c<p.length;c++){var v=p[c];if(typeof v!="string")throw new TypeError("Invalid argument type to path.join: "+typeof v);v!==""&&(v.charAt(0)===w.sep&&(g=[]),g.push(v))}var m=w.normalize(g.join(w.sep));if(m.length>1&&m.charAt(m.length-1)===w.sep)return m.substr(0,m.length-1);if(m.charAt(0)!==w.sep){m.charAt(0)==="."&&(m.length===1||m.charAt(1)===w.sep)&&(m=m.length===1?"":m.substr(2));var O=I.cwd();m!==""?m=this.normalize(O+(O!=="/"?w.sep:"")+m):m=O}return m},w.relative=function(p,u){var g;p=w.resolve(p),u=w.resolve(u);var c=p.split(w.sep),v=u.split(w.sep);v.shift(),c.shift();var m=0,O=[];for(g=0;g<c.length;g++){var T=c[g];if(T!==v[g]){m=c.length-g;break}}O=v.slice(g),c.length===1&&c[0]===""&&(m=0),m>c.length&&(m=c.length);var D="";for(g=0;g<m;g++)D+="../";return D+=O.join(w.sep),D.length>1&&D.charAt(D.length-1)===w.sep&&(D=D.substr(0,D.length-1)),D},w.dirname=function(p){p=w._removeDuplicateSeps(p);var u=p.charAt(0)===w.sep,g=p.split(w.sep);return g.pop()===""&&g.length>0&&g.pop(),g.length>1||g.length===1&&!u?g.join(w.sep):u?w.sep:"."},w.basename=function(p,u){if(u===void 0&&(u=""),p==="")return p;p=w.normalize(p);var g=p.split(w.sep),c=g[g.length-1];if(c===""&&g.length>1)return g[g.length-2];if(u.length>0){var v=c.substr(c.length-u.length);if(v===u)return c.substr(0,c.length-u.length)}return c},w.extname=function(p){p=w.normalize(p);var u=p.split(w.sep);if(p=u.pop(),p===""&&u.length>0&&(p=u.pop()),p==="..")return"";var g=p.lastIndexOf(".");return g===-1||g===0?"":p.substr(g)},w.isAbsolute=function(p){return p.length>0&&p.charAt(0)===w.sep},w._makeLong=function(p){return p},w.parse=function(p){var u=E(p);return{root:u[0],dir:u[0]+u[1].slice(0,-1),base:u[2],ext:u[3],name:u[2].slice(0,u[2].length-u[3].length)}},w.format=function(p){if(p===null||typeof p!="object")throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof p);var u=p.root||"";if(typeof u!="string")throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof p.root);var g=p.dir?p.dir+w.sep:"",c=p.base||"";return g+c},w._removeDuplicateSeps=function(p){return p=p.replace(this._replaceRegex,this.sep),p},w.sep="/",w._replaceRegex=new RegExp("//+","g"),w.delimiter=":",w.posix=w,w.win32=w,w}();q.exports=N}).call(A,F(6))},function(q,A,F){(function(I){var x=this&&this.__extends||function(w,p){for(var u in p)p.hasOwnProperty(u)&&(w[u]=p[u]);function g(){this.constructor=w}w.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)},E=F(11),N=function(w){x(p,w);function p(){w.call(this),this.isRaw=!1,this.columns=80,this.rows=120,this.isTTY=!0,this._bufferedWrites=[],this._waitingForWrites=!1}return p.prototype.setRawMode=function(u){this.isRaw!==u&&(this.isRaw=u,this.emit("modeChange"))},p.prototype.changeColumns=function(u){u!==this.columns&&(this.columns=u,this.emit("resize"))},p.prototype.changeRows=function(u){u!==this.rows&&(this.rows=u,this.emit("resize"))},p.isatty=function(u){return u&&u instanceof p},p.prototype._write=function(u,g,c){var v;try{var m;typeof u=="string"?m=new I(u,g):m=u,this._bufferedWrites.push(m),this._waitingForWrites&&this._read(1024)}catch(O){v=O}finally{c(v)}},p.prototype._read=function(u){if(this._bufferedWrites.length===0)this._waitingForWrites=!0;else for(;this._bufferedWrites.length>0&&(this._waitingForWrites=this.push(this._bufferedWrites.shift()),!!this._waitingForWrites););},p}(E.Duplex);q.exports=N}).call(A,F(1))},function(q,A,F){q.exports=E;var I=F(8).EventEmitter,x=F(12);x(E,I),E.Readable=F(13),E.Writable=F(27),E.Duplex=F(28),E.Transform=F(29),E.PassThrough=F(30),E.Stream=E;function E(){I.call(this)}E.prototype.pipe=function(N,w){var p=this;function u(D){N.writable&&N.write(D)===!1&&p.pause&&p.pause()}p.on("data",u);function g(){p.readable&&p.resume&&p.resume()}N.on("drain",g),!N._isStdio&&(!w||w.end!==!1)&&(p.on("end",v),p.on("close",m));var c=!1;function v(){c||(c=!0,N.end())}function m(){c||(c=!0,typeof N.destroy=="function"&&N.destroy())}function O(D){if(T(),I.listenerCount(this,"error")===0)throw D}p.on("error",O),N.on("error",O);function T(){p.removeListener("data",u),N.removeListener("drain",g),p.removeListener("end",v),p.removeListener("close",m),p.removeListener("error",O),N.removeListener("error",O),p.removeListener("end",T),p.removeListener("close",T),N.removeListener("close",T)}return p.on("end",T),p.on("close",T),N.on("close",T),N.emit("pipe",p),N}},function(q,A){typeof Object.create=="function"?q.exports=function(I,x){I.super_=x,I.prototype=Object.create(x.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}})}:q.exports=function(I,x){I.super_=x;var E=function(){};E.prototype=x.prototype,I.prototype=new E,I.prototype.constructor=I}},function(q,A,F){(function(I){var x=function(){try{return F(11)}catch{}}();A=q.exports=F(14),A.Stream=x||A,A.Readable=A,A.Writable=F(22),A.Duplex=F(21),A.Transform=F(25),A.PassThrough=F(26),!I.browser&&I.env.READABLE_STREAM==="disable"&&x&&(q.exports=x)}).call(A,F(6))},function(q,A,F){(function(I){q.exports=j;var x=F(15),E=F(16),N;j.ReadableState=et,F(8).EventEmitter;var w=function(k,b){return k.listeners(b).length},p;(function(){try{p=F(11)}catch{}finally{p||(p=F(8).EventEmitter)}})();var u=F(2).Buffer,g=F(17),c=F(18);c.inherits=F(12);var v=F(19),m=void 0;v&&v.debuglog?m=v.debuglog("stream"):m=function(){};var O=F(20),T;c.inherits(j,p);function D(k,b,X){if(typeof k.prependListener=="function")return k.prependListener(b,X);!k._events||!k._events[b]?k.on(b,X):E(k._events[b])?k._events[b].unshift(X):k._events[b]=[X,k._events[b]]}function et(k,b){N=N||F(21),k=k||{},this.objectMode=!!k.objectMode,b instanceof N&&(this.objectMode=this.objectMode||!!k.readableObjectMode);var X=k.highWaterMark,rt=this.objectMode?16:16*1024;this.highWaterMark=X||X===0?X:rt,this.highWaterMark=~~this.highWaterMark,this.buffer=new O,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=k.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,k.encoding&&(T||(T=F(24).StringDecoder),this.decoder=new T(k.encoding),this.encoding=k.encoding)}function j(k){if(N=N||F(21),!(this instanceof j))return new j(k);this._readableState=new et(k,this),this.readable=!0,k&&typeof k.read=="function"&&(this._read=k.read),p.call(this)}j.prototype.push=function(k,b){var X=this._readableState;return!X.objectMode&&typeof k=="string"&&(b=b||X.defaultEncoding,b!==X.encoding&&(k=g.from(k,b),b="")),H(this,X,k,b,!1)},j.prototype.unshift=function(k){var b=this._readableState;return H(this,b,k,"",!0)},j.prototype.isPaused=function(){return this._readableState.flowing===!1};function H(k,b,X,rt,lt){var _t=U(b,X);if(_t)k.emit("error",_t);else if(X===null)b.reading=!1,$(k,b);else if(b.objectMode||X&&X.length>0)if(b.ended&&!lt){var K=new Error("stream.push() after EOF");k.emit("error",K)}else if(b.endEmitted&&lt){var $t=new Error("stream.unshift() after end event");k.emit("error",$t)}else{var yt;b.decoder&&!lt&&!rt&&(X=b.decoder.write(X),yt=!b.objectMode&&X.length===0),lt||(b.reading=!1),yt||(b.flowing&&b.length===0&&!b.sync?(k.emit("data",X),k.read(0)):(b.length+=b.objectMode?1:X.length,lt?b.buffer.unshift(X):b.buffer.push(X),b.needReadable&&st(k))),dt(k,b)}else lt||(b.reading=!1);return Et(b)}function Et(k){return!k.ended&&(k.needReadable||k.length<k.highWaterMark||k.length===0)}j.prototype.setEncoding=function(k){return T||(T=F(24).StringDecoder),this._readableState.decoder=new T(k),this._readableState.encoding=k,this};var Q=8388608;function St(k){return k>=Q?k=Q:(k--,k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,k|=k>>>16,k++),k}function ht(k,b){return k<=0||b.length===0&&b.ended?0:b.objectMode?1:k!==k?b.flowing&&b.length?b.buffer.head.data.length:b.length:(k>b.highWaterMark&&(b.highWaterMark=St(k)),k<=b.length?k:b.ended?b.length:(b.needReadable=!0,0))}j.prototype.read=function(k){m("read",k),k=parseInt(k,10);var b=this._readableState,X=k;if(k!==0&&(b.emittedReadable=!1),k===0&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return m("read: emitReadable",b.length,b.ended),b.length===0&&b.ended?mt(this):st(this),null;if(k=ht(k,b),k===0&&b.ended)return b.length===0&&mt(this),null;var rt=b.needReadable;m("need readable",rt),(b.length===0||b.length-k<b.highWaterMark)&&(rt=!0,m("length less than watermark",rt)),b.ended||b.reading?(rt=!1,m("reading or ended",rt)):rt&&(m("do read"),b.reading=!0,b.sync=!0,b.length===0&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1,b.reading||(k=ht(X,b)));var lt;return k>0?lt=G(k,b):lt=null,lt===null?(b.needReadable=!0,k=0):b.length-=k,b.length===0&&(b.ended||(b.needReadable=!0),X!==k&&b.ended&&mt(this)),lt!==null&&this.emit("data",lt),lt};function U(k,b){var X=null;return!u.isBuffer(b)&&typeof b!="string"&&b!==null&&b!==void 0&&!k.objectMode&&(X=new TypeError("Invalid non-string/buffer chunk")),X}function $(k,b){if(!b.ended){if(b.decoder){var X=b.decoder.end();X&&X.length&&(b.buffer.push(X),b.length+=b.objectMode?1:X.length)}b.ended=!0,st(k)}}function st(k){var b=k._readableState;b.needReadable=!1,b.emittedReadable||(m("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?x(Rt,k):Rt(k))}function Rt(k){m("emit readable"),k.emit("readable"),M(k)}function dt(k,b){b.readingMore||(b.readingMore=!0,x(Dt,k,b))}function Dt(k,b){for(var X=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(m("maybeReadMore read 0"),k.read(0),X!==b.length);)X=b.length;b.readingMore=!1}j.prototype._read=function(k){this.emit("error",new Error("_read() is not implemented"))},j.prototype.pipe=function(k,b){var X=this,rt=this._readableState;switch(rt.pipesCount){case 0:rt.pipes=k;break;case 1:rt.pipes=[rt.pipes,k];break;default:rt.pipes.push(k);break}rt.pipesCount+=1,m("pipe count=%d opts=%j",rt.pipesCount,b);var lt=(!b||b.end!==!1)&&k!==I.stdout&&k!==I.stderr,_t=lt?$t:oe;rt.endEmitted?x(_t):X.once("end",_t),k.on("unpipe",K);function K(W){m("onunpipe"),W===X&&oe()}function $t(){m("onend"),k.end()}var yt=bt(X);k.on("drain",yt);var re=!1;function oe(){m("cleanup"),k.removeListener("close",l),k.removeListener("finish",S),k.removeListener("drain",yt),k.removeListener("error",f),k.removeListener("unpipe",K),X.removeListener("end",$t),X.removeListener("end",oe),X.removeListener("data",_),re=!0,rt.awaitDrain&&(!k._writableState||k._writableState.needDrain)&&yt()}var _e=!1;X.on("data",_);function _(W){m("ondata"),_e=!1;var Y=k.write(W);Y===!1&&!_e&&((rt.pipesCount===1&&rt.pipes===k||rt.pipesCount>1&&xt(rt.pipes,k)!==-1)&&!re&&(m("false write response, pause",X._readableState.awaitDrain),X._readableState.awaitDrain++,_e=!0),X.pause())}function f(W){m("onerror",W),C(),k.removeListener("error",f),w(k,"error")===0&&k.emit("error",W)}D(k,"error",f);function l(){k.removeListener("finish",S),C()}k.once("close",l);function S(){m("onfinish"),k.removeListener("close",l),C()}k.once("finish",S);function C(){m("unpipe"),X.unpipe(k)}return k.emit("pipe",X),rt.flowing||(m("pipe resume"),X.resume()),k};function bt(k){return function(){var b=k._readableState;m("pipeOnDrain",b.awaitDrain),b.awaitDrain&&b.awaitDrain--,b.awaitDrain===0&&w(k,"data")&&(b.flowing=!0,M(k))}}j.prototype.unpipe=function(k){var b=this._readableState;if(b.pipesCount===0)return this;if(b.pipesCount===1)return k&&k!==b.pipes?this:(k||(k=b.pipes),b.pipes=null,b.pipesCount=0,b.flowing=!1,k&&k.emit("unpipe",this),this);if(!k){var X=b.pipes,rt=b.pipesCount;b.pipes=null,b.pipesCount=0,b.flowing=!1;for(var lt=0;lt<rt;lt++)X[lt].emit("unpipe",this);return this}var _t=xt(b.pipes,k);return _t===-1?this:(b.pipes.splice(_t,1),b.pipesCount-=1,b.pipesCount===1&&(b.pipes=b.pipes[0]),k.emit("unpipe",this),this)},j.prototype.on=function(k,b){var X=p.prototype.on.call(this,k,b);if(k==="data")this._readableState.flowing!==!1&&this.resume();else if(k==="readable"){var rt=this._readableState;!rt.endEmitted&&!rt.readableListening&&(rt.readableListening=rt.needReadable=!0,rt.emittedReadable=!1,rt.reading?rt.length&&st(this):x(wt,this))}return X},j.prototype.addListener=j.prototype.on;function wt(k){m("readable nexttick read 0"),k.read(0)}j.prototype.resume=function(){var k=this._readableState;return k.flowing||(m("resume"),k.flowing=!0,Xt(this,k)),this};function Xt(k,b){b.resumeScheduled||(b.resumeScheduled=!0,x(P,k,b))}function P(k,b){b.reading||(m("resume read 0"),k.read(0)),b.resumeScheduled=!1,b.awaitDrain=0,k.emit("resume"),M(k),b.flowing&&!b.reading&&k.read(0)}j.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function M(k){var b=k._readableState;for(m("flow",b.flowing);b.flowing&&k.read()!==null;);}j.prototype.wrap=function(k){var b=this._readableState,X=!1,rt=this;k.on("end",function(){if(m("wrapped end"),b.decoder&&!b.ended){var K=b.decoder.end();K&&K.length&&rt.push(K)}rt.push(null)}),k.on("data",function(K){if(m("wrapped data"),b.decoder&&(K=b.decoder.write(K)),!(b.objectMode&&K==null)&&!(!b.objectMode&&(!K||!K.length))){var $t=rt.push(K);$t||(X=!0,k.pause())}});for(var lt in k)this[lt]===void 0&&typeof k[lt]=="function"&&(this[lt]=function(K){return function(){return k[K].apply(k,arguments)}}(lt));var _t=["error","close","destroy","pause","resume"];return jt(_t,function(K){k.on(K,rt.emit.bind(rt,K))}),rt._read=function(K){m("wrapped _read",K),X&&(X=!1,k.resume())},rt},j._fromList=G;function G(k,b){if(b.length===0)return null;var X;return b.objectMode?X=b.buffer.shift():!k||k>=b.length?(b.decoder?X=b.buffer.join(""):b.buffer.length===1?X=b.buffer.head.data:X=b.buffer.concat(b.length),b.buffer.clear()):X=ct(k,b.buffer,b.decoder),X}function ct(k,b,X){var rt;return k<b.head.data.length?(rt=b.head.data.slice(0,k),b.head.data=b.head.data.slice(k)):k===b.head.data.length?rt=b.shift():rt=X?kt(k,b):vt(k,b),rt}function kt(k,b){var X=b.head,rt=1,lt=X.data;for(k-=lt.length;X=X.next;){var _t=X.data,K=k>_t.length?_t.length:k;if(K===_t.length?lt+=_t:lt+=_t.slice(0,k),k-=K,k===0){K===_t.length?(++rt,X.next?b.head=X.next:b.head=b.tail=null):(b.head=X,X.data=_t.slice(K));break}++rt}return b.length-=rt,lt}function vt(k,b){var X=g.allocUnsafe(k),rt=b.head,lt=1;for(rt.data.copy(X),k-=rt.data.length;rt=rt.next;){var _t=rt.data,K=k>_t.length?_t.length:k;if(_t.copy(X,X.length-k,0,K),k-=K,k===0){K===_t.length?(++lt,rt.next?b.head=rt.next:b.head=b.tail=null):(b.head=rt,rt.data=_t.slice(K));break}++lt}return b.length-=lt,X}function mt(k){var b=k._readableState;if(b.length>0)throw new Error('"endReadable()" called on non-empty stream');b.endEmitted||(b.ended=!0,x(Nt,b,k))}function Nt(k,b){!k.endEmitted&&k.length===0&&(k.endEmitted=!0,b.readable=!1,b.emit("end"))}function jt(k,b){for(var X=0,rt=k.length;X<rt;X++)b(k[X],X)}function xt(k,b){for(var X=0,rt=k.length;X<rt;X++)if(k[X]===b)return X;return-1}}).call(A,F(6))},function(q,A,F){(function(I){!I.version||I.version.indexOf("v0.")===0||I.version.indexOf("v1.")===0&&I.version.indexOf("v1.8.")!==0?q.exports=x:q.exports=I.nextTick;function x(E,N,w,p){if(typeof E!="function")throw new TypeError('"callback" argument must be a function');var u=arguments.length,g,c;switch(u){case 0:case 1:return I.nextTick(E);case 2:return I.nextTick(function(){E.call(null,N)});case 3:return I.nextTick(function(){E.call(null,N,w)});case 4:return I.nextTick(function(){E.call(null,N,w,p)});default:for(g=new Array(u-1),c=0;c<g.length;)g[c++]=arguments[c];return I.nextTick(function(){E.apply(null,g)})}}}).call(A,F(6))},function(q,A){var F={}.toString;q.exports=Array.isArray||function(I){return F.call(I)=="[object Array]"}},function(q,A,F){(function(I){var x=F(2),E=x.Buffer,N=x.SlowBuffer,w=x.kMaxLength||2147483647;A.alloc=function(u,g,c){if(typeof E.alloc=="function")return E.alloc(u,g,c);if(typeof c=="number")throw new TypeError("encoding must not be number");if(typeof u!="number")throw new TypeError("size must be a number");if(u>w)throw new RangeError("size is too large");var v=c,m=g;m===void 0&&(v=void 0,m=0);var O=new E(u);if(typeof m=="string")for(var T=new E(m,v),D=T.length,et=-1;++et<u;)O[et]=T[et%D];else O.fill(m);return O},A.allocUnsafe=function(u){if(typeof E.allocUnsafe=="function")return E.allocUnsafe(u);if(typeof u!="number")throw new TypeError("size must be a number");if(u>w)throw new RangeError("size is too large");return new E(u)},A.from=function(u,g,c){if(typeof E.from=="function"&&(!I.Uint8Array||Uint8Array.from!==E.from))return E.from(u,g,c);if(typeof u=="number")throw new TypeError('"value" argument must not be a number');if(typeof u=="string")return new E(u,g);if(typeof ArrayBuffer<"u"&&u instanceof ArrayBuffer){var v=g;if(arguments.length===1)return new E(u);typeof v>"u"&&(v=0);var m=c;if(typeof m>"u"&&(m=u.byteLength-v),v>=u.byteLength)throw new RangeError("'offset' is out of bounds");if(m>u.byteLength-v)throw new RangeError("'length' is out of bounds");return new E(u.slice(v,v+m))}if(E.isBuffer(u)){var O=new E(u.length);return u.copy(O,0,0,u.length),O}if(u){if(Array.isArray(u)||typeof ArrayBuffer<"u"&&u.buffer instanceof ArrayBuffer||"length"in u)return new E(u);if(u.type==="Buffer"&&Array.isArray(u.data))return new E(u.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},A.allocUnsafeSlow=function(u){if(typeof E.allocUnsafeSlow=="function")return E.allocUnsafeSlow(u);if(typeof u!="number")throw new TypeError("size must be a number");if(u>=w)throw new RangeError("size is too large");return new N(u)}}).call(A,function(){return this}())},function(q,A,F){(function(I){function x(H){return Array.isArray?Array.isArray(H):j(H)==="[object Array]"}A.isArray=x;function E(H){return typeof H=="boolean"}A.isBoolean=E;function N(H){return H===null}A.isNull=N;function w(H){return H==null}A.isNullOrUndefined=w;function p(H){return typeof H=="number"}A.isNumber=p;function u(H){return typeof H=="string"}A.isString=u;function g(H){return typeof H=="symbol"}A.isSymbol=g;function c(H){return H===void 0}A.isUndefined=c;function v(H){return j(H)==="[object RegExp]"}A.isRegExp=v;function m(H){return typeof H=="object"&&H!==null}A.isObject=m;function O(H){return j(H)==="[object Date]"}A.isDate=O;function T(H){return j(H)==="[object Error]"||H instanceof Error}A.isError=T;function D(H){return typeof H=="function"}A.isFunction=D;function et(H){return H===null||typeof H=="boolean"||typeof H=="number"||typeof H=="string"||typeof H=="symbol"||typeof H>"u"}A.isPrimitive=et,A.isBuffer=I.isBuffer;function j(H){return Object.prototype.toString.call(H)}}).call(A,F(1))},function(q,A){},function(q,A,F){F(2).Buffer;var I=F(17);q.exports=x;function x(){this.head=null,this.tail=null,this.length=0}x.prototype.push=function(E){var N={data:E,next:null};this.length>0?this.tail.next=N:this.head=N,this.tail=N,++this.length},x.prototype.unshift=function(E){var N={data:E,next:this.head};this.length===0&&(this.tail=N),this.head=N,++this.length},x.prototype.shift=function(){if(this.length!==0){var E=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,E}},x.prototype.clear=function(){this.head=this.tail=null,this.length=0},x.prototype.join=function(E){if(this.length===0)return"";for(var N=this.head,w=""+N.data;N=N.next;)w+=E+N.data;return w},x.prototype.concat=function(E){if(this.length===0)return I.alloc(0);if(this.length===1)return this.head.data;for(var N=I.allocUnsafe(E>>>0),w=this.head,p=0;w;)w.data.copy(N,p),p+=w.data.length,w=w.next;return N}},function(q,A,F){var I=Object.keys||function(O){var T=[];for(var D in O)T.push(D);return T};q.exports=c;var x=F(15),E=F(18);E.inherits=F(12);var N=F(14),w=F(22);E.inherits(c,N);for(var p=I(w.prototype),u=0;u<p.length;u++){var g=p[u];c.prototype[g]||(c.prototype[g]=w.prototype[g])}function c(O){if(!(this instanceof c))return new c(O);N.call(this,O),w.call(this,O),O&&O.readable===!1&&(this.readable=!1),O&&O.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,O&&O.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",v)}function v(){this.allowHalfOpen||this._writableState.ended||x(m,this)}function m(O){O.end()}},function(q,A,F){(function(I){q.exports=D;var x=F(15),E=!I.browser&&["v0.10","v0.9."].indexOf(I.version.slice(0,5))>-1?setImmediate:x,N;D.WritableState=O;var w=F(18);w.inherits=F(12);var p={deprecate:F(23)},u;(function(){try{u=F(11)}catch{}finally{u||(u=F(8).EventEmitter)}})();var g=F(2).Buffer,c=F(17);w.inherits(D,u);function v(){}function m(P,M,G){this.chunk=P,this.encoding=M,this.callback=G,this.next=null}function O(P,M){N=N||F(21),P=P||{},this.objectMode=!!P.objectMode,M instanceof N&&(this.objectMode=this.objectMode||!!P.writableObjectMode);var G=P.highWaterMark,ct=this.objectMode?16:16*1024;this.highWaterMark=G||G===0?G:ct,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var kt=P.decodeStrings===!1;this.decodeStrings=!kt,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(vt){U(M,vt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Xt(this)}O.prototype.getBuffer=function(){for(var M=this.bufferedRequest,G=[];M;)G.push(M),M=M.next;return G},function(){try{Object.defineProperty(O.prototype,"buffer",{get:p.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch{}}();var T;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(T=Function.prototype[Symbol.hasInstance],Object.defineProperty(D,Symbol.hasInstance,{value:function(P){return T.call(this,P)?!0:P&&P._writableState instanceof O}})):T=function(P){return P instanceof this};function D(P){if(N=N||F(21),!T.call(D,this)&&!(this instanceof N))return new D(P);this._writableState=new O(P,this),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev)),u.call(this)}D.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function et(P,M){var G=new Error("write after end");P.emit("error",G),x(M,G)}function j(P,M,G,ct){var kt=!0,vt=!1;return G===null?vt=new TypeError("May not write null values to stream"):typeof G!="string"&&G!==void 0&&!M.objectMode&&(vt=new TypeError("Invalid non-string/buffer chunk")),vt&&(P.emit("error",vt),x(ct,vt),kt=!1),kt}D.prototype.write=function(P,M,G){var ct=this._writableState,kt=!1,vt=g.isBuffer(P);return typeof M=="function"&&(G=M,M=null),vt?M="buffer":M||(M=ct.defaultEncoding),typeof G!="function"&&(G=v),ct.ended?et(this,G):(vt||j(this,ct,P,G))&&(ct.pendingcb++,kt=Et(this,ct,vt,P,M,G)),kt},D.prototype.cork=function(){var P=this._writableState;P.corked++},D.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,!P.writing&&!P.corked&&!P.finished&&!P.bufferProcessing&&P.bufferedRequest&&Rt(this,P))},D.prototype.setDefaultEncoding=function(M){if(typeof M=="string"&&(M=M.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((M+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+M);return this._writableState.defaultEncoding=M,this};function H(P,M,G){return!P.objectMode&&P.decodeStrings!==!1&&typeof M=="string"&&(M=c.from(M,G)),M}function Et(P,M,G,ct,kt,vt){G||(ct=H(M,ct,kt),g.isBuffer(ct)&&(kt="buffer"));var mt=M.objectMode?1:ct.length;M.length+=mt;var Nt=M.length<M.highWaterMark;if(Nt||(M.needDrain=!0),M.writing||M.corked){var jt=M.lastBufferedRequest;M.lastBufferedRequest=new m(ct,kt,vt),jt?jt.next=M.lastBufferedRequest:M.bufferedRequest=M.lastBufferedRequest,M.bufferedRequestCount+=1}else Q(P,M,!1,mt,ct,kt,vt);return Nt}function Q(P,M,G,ct,kt,vt,mt){M.writelen=ct,M.writecb=mt,M.writing=!0,M.sync=!0,G?P._writev(kt,M.onwrite):P._write(kt,vt,M.onwrite),M.sync=!1}function St(P,M,G,ct,kt){--M.pendingcb,G?x(kt,ct):kt(ct),P._writableState.errorEmitted=!0,P.emit("error",ct)}function ht(P){P.writing=!1,P.writecb=null,P.length-=P.writelen,P.writelen=0}function U(P,M){var G=P._writableState,ct=G.sync,kt=G.writecb;if(ht(G),M)St(P,G,ct,M,kt);else{var vt=dt(G);!vt&&!G.corked&&!G.bufferProcessing&&G.bufferedRequest&&Rt(P,G),ct?E($,P,G,vt,kt):$(P,G,vt,kt)}}function $(P,M,G,ct){G||st(P,M),M.pendingcb--,ct(),bt(P,M)}function st(P,M){M.length===0&&M.needDrain&&(M.needDrain=!1,P.emit("drain"))}function Rt(P,M){M.bufferProcessing=!0;var G=M.bufferedRequest;if(P._writev&&G&&G.next){var ct=M.bufferedRequestCount,kt=new Array(ct),vt=M.corkedRequestsFree;vt.entry=G;for(var mt=0;G;)kt[mt]=G,G=G.next,mt+=1;Q(P,M,!0,M.length,kt,"",vt.finish),M.pendingcb++,M.lastBufferedRequest=null,vt.next?(M.corkedRequestsFree=vt.next,vt.next=null):M.corkedRequestsFree=new Xt(M)}else{for(;G;){var Nt=G.chunk,jt=G.encoding,xt=G.callback,k=M.objectMode?1:Nt.length;if(Q(P,M,!1,k,Nt,jt,xt),G=G.next,M.writing)break}G===null&&(M.lastBufferedRequest=null)}M.bufferedRequestCount=0,M.bufferedRequest=G,M.bufferProcessing=!1}D.prototype._write=function(P,M,G){G(new Error("_write() is not implemented"))},D.prototype._writev=null,D.prototype.end=function(P,M,G){var ct=this._writableState;typeof P=="function"?(G=P,P=null,M=null):typeof M=="function"&&(G=M,M=null),P!=null&&this.write(P,M),ct.corked&&(ct.corked=1,this.uncork()),!ct.ending&&!ct.finished&&wt(this,ct,G)};function dt(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function Dt(P,M){M.prefinished||(M.prefinished=!0,P.emit("prefinish"))}function bt(P,M){var G=dt(M);return G&&(M.pendingcb===0?(Dt(P,M),M.finished=!0,P.emit("finish")):Dt(P,M)),G}function wt(P,M,G){M.ending=!0,bt(P,M),G&&(M.finished?x(G):P.once("finish",G)),M.ended=!0,P.writable=!1}function Xt(P){var M=this;this.next=null,this.entry=null,this.finish=function(G){var ct=M.entry;for(M.entry=null;ct;){var kt=ct.callback;P.pendingcb--,kt(G),ct=ct.next}P.corkedRequestsFree?P.corkedRequestsFree.next=M:P.corkedRequestsFree=M}}}).call(A,F(6))},function(q,A){(function(F){q.exports=I;function I(E,N){if(x("noDeprecation"))return E;var w=!1;function p(){if(!w){if(x("throwDeprecation"))throw new Error(N);x("traceDeprecation")?console.trace(N):console.warn(N),w=!0}return E.apply(this,arguments)}return p}function x(E){try{if(!F.localStorage)return!1}catch{return!1}var N=F.localStorage[E];return N==null?!1:String(N).toLowerCase()==="true"}}).call(A,function(){return this}())},function(q,A,F){var I=F(2).Buffer,x=I.isEncoding||function(g){switch(g&&g.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function E(g){if(g&&!x(g))throw new Error("Unknown encoding: "+g)}var N=A.StringDecoder=function(g){switch(this.encoding=(g||"utf8").toLowerCase().replace(/[-_]/,""),E(g),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=p;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=u;break;default:this.write=w;return}this.charBuffer=new I(6),this.charReceived=0,this.charLength=0};N.prototype.write=function(g){for(var c="";this.charLength;){var v=g.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:g.length;if(g.copy(this.charBuffer,this.charReceived,0,v),this.charReceived+=v,this.charReceived<this.charLength)return"";g=g.slice(v,g.length),c=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var O=c.charCodeAt(c.length-1);if(O>=55296&&O<=56319){this.charLength+=this.surrogateSize,c="";continue}if(this.charReceived=this.charLength=0,g.length===0)return c;break}this.detectIncompleteChar(g);var m=g.length;this.charLength&&(g.copy(this.charBuffer,0,g.length-this.charReceived,m),m-=this.charReceived),c+=g.toString(this.encoding,0,m);var m=c.length-1,O=c.charCodeAt(m);if(O>=55296&&O<=56319){var T=this.surrogateSize;return this.charLength+=T,this.charReceived+=T,this.charBuffer.copy(this.charBuffer,T,0,T),g.copy(this.charBuffer,0,0,T),c.substring(0,m)}return c},N.prototype.detectIncompleteChar=function(g){for(var c=g.length>=3?3:g.length;c>0;c--){var v=g[g.length-c];if(c==1&&v>>5==6){this.charLength=2;break}if(c<=2&&v>>4==14){this.charLength=3;break}if(c<=3&&v>>3==30){this.charLength=4;break}}this.charReceived=c},N.prototype.end=function(g){var c="";if(g&&g.length&&(c=this.write(g)),this.charReceived){var v=this.charReceived,m=this.charBuffer,O=this.encoding;c+=m.slice(0,v).toString(O)}return c};function w(g){return g.toString(this.encoding)}function p(g){this.charReceived=g.length%2,this.charLength=this.charReceived?2:0}function u(g){this.charReceived=g.length%3,this.charLength=this.charReceived?3:0}},function(q,A,F){q.exports=w;var I=F(21),x=F(18);x.inherits=F(12),x.inherits(w,I);function E(u){this.afterTransform=function(g,c){return N(u,g,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function N(u,g,c){var v=u._transformState;v.transforming=!1;var m=v.writecb;if(!m)return u.emit("error",new Error("no writecb in Transform class"));v.writechunk=null,v.writecb=null,c!=null&&u.push(c),m(g);var O=u._readableState;O.reading=!1,(O.needReadable||O.length<O.highWaterMark)&&u._read(O.highWaterMark)}function w(u){if(!(this instanceof w))return new w(u);I.call(this,u),this._transformState=new E(this);var g=this;this._readableState.needReadable=!0,this._readableState.sync=!1,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(c,v){p(g,c,v)}):p(g)})}w.prototype.push=function(u,g){return this._transformState.needTransform=!1,I.prototype.push.call(this,u,g)},w.prototype._transform=function(u,g,c){throw new Error("_transform() is not implemented")},w.prototype._write=function(u,g,c){var v=this._transformState;if(v.writecb=c,v.writechunk=u,v.writeencoding=g,!v.transforming){var m=this._readableState;(v.needTransform||m.needReadable||m.length<m.highWaterMark)&&this._read(m.highWaterMark)}},w.prototype._read=function(u){var g=this._transformState;g.writechunk!==null&&g.writecb&&!g.transforming?(g.transforming=!0,this._transform(g.writechunk,g.writeencoding,g.afterTransform)):g.needTransform=!0};function p(u,g,c){if(g)return u.emit("error",g);c!=null&&u.push(c);var v=u._writableState,m=u._transformState;if(v.length)throw new Error("Calling transform done when ws.length != 0");if(m.transforming)throw new Error("Calling transform done when still transforming");return u.push(null)}},function(q,A,F){q.exports=E;var I=F(25),x=F(18);x.inherits=F(12),x.inherits(E,I);function E(N){if(!(this instanceof E))return new E(N);I.call(this,N)}E.prototype._transform=function(N,w,p){p(null,N)}},function(q,A,F){q.exports=F(22)},function(q,A,F){q.exports=F(21)},function(q,A,F){q.exports=F(25)},function(q,A,F){q.exports=F(26)},function(q,A,F){var I=F(32),x=F(33),E=F(38),N=F(39),w=F(40),p=F(41),u=F(42),g=Object.prototype.toString;function c(O){if(!(this instanceof c))return new c(O);this.options=x.assign({chunkSize:16384,windowBits:0,to:""},O||{});var T=this.options;T.raw&&T.windowBits>=0&&T.windowBits<16&&(T.windowBits=-T.windowBits,T.windowBits===0&&(T.windowBits=-15)),T.windowBits>=0&&T.windowBits<16&&!(O&&O.windowBits)&&(T.windowBits+=32),T.windowBits>15&&T.windowBits<48&&(T.windowBits&15||(T.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var D=I.inflateInit2(this.strm,T.windowBits);if(D!==N.Z_OK)throw new Error(w[D]);this.header=new u,I.inflateGetHeader(this.strm,this.header)}c.prototype.push=function(O,T){var D=this.strm,et=this.options.chunkSize,j=this.options.dictionary,H,Et,Q,St,ht,U,$=!1;if(this.ended)return!1;Et=T===~~T?T:T===!0?N.Z_FINISH:N.Z_NO_FLUSH,typeof O=="string"?D.input=E.binstring2buf(O):g.call(O)==="[object ArrayBuffer]"?D.input=new Uint8Array(O):D.input=O,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new x.Buf8(et),D.next_out=0,D.avail_out=et),H=I.inflate(D,N.Z_NO_FLUSH),H===N.Z_NEED_DICT&&j&&(typeof j=="string"?U=E.string2buf(j):g.call(j)==="[object ArrayBuffer]"?U=new Uint8Array(j):U=j,H=I.inflateSetDictionary(this.strm,U)),H===N.Z_BUF_ERROR&&$===!0&&(H=N.Z_OK,$=!1),H!==N.Z_STREAM_END&&H!==N.Z_OK)return this.onEnd(H),this.ended=!0,!1;D.next_out&&(D.avail_out===0||H===N.Z_STREAM_END||D.avail_in===0&&(Et===N.Z_FINISH||Et===N.Z_SYNC_FLUSH))&&(this.options.to==="string"?(Q=E.utf8border(D.output,D.next_out),St=D.next_out-Q,ht=E.buf2string(D.output,Q),D.next_out=St,D.avail_out=et-St,St&&x.arraySet(D.output,D.output,Q,St,0),this.onData(ht)):this.onData(x.shrinkBuf(D.output,D.next_out))),D.avail_in===0&&D.avail_out===0&&($=!0)}while((D.avail_in>0||D.avail_out===0)&&H!==N.Z_STREAM_END);return H===N.Z_STREAM_END&&(Et=N.Z_FINISH),Et===N.Z_FINISH?(H=I.inflateEnd(this.strm),this.onEnd(H),this.ended=!0,H===N.Z_OK):(Et===N.Z_SYNC_FLUSH&&(this.onEnd(N.Z_OK),D.avail_out=0),!0)},c.prototype.onData=function(O){this.chunks.push(O)},c.prototype.onEnd=function(O){O===N.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=x.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg};function v(O,T){var D=new c(T);if(D.push(O,!0),D.err)throw D.msg||w[D.err];return D.result}function m(O,T){return T=T||{},T.raw=!0,v(O,T)}A.Inflate=c,A.inflate=v,A.inflateRaw=m,A.ungzip=v},function(q,A,F){var I=F(33),x=F(34),E=F(35),N=F(36),w=F(37),p=0,u=1,g=2,c=4,v=5,m=6,O=0,T=1,D=2,et=-2,j=-3,H=-4,Et=-5,Q=8,St=1,ht=2,U=3,$=4,st=5,Rt=6,dt=7,Dt=8,bt=9,wt=10,Xt=11,P=12,M=13,G=14,ct=15,kt=16,vt=17,mt=18,Nt=19,jt=20,xt=21,k=22,b=23,X=24,rt=25,lt=26,_t=27,K=28,$t=29,yt=30,re=31,oe=32,_e=852,_=592,f=15,l=f;function S(z){return(z>>>24&255)+(z>>>8&65280)+((z&65280)<<8)+((z&255)<<24)}function C(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new I.Buf16(320),this.work=new I.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function W(z){var it;return!z||!z.state?et:(it=z.state,z.total_in=z.total_out=it.total=0,z.msg="",it.wrap&&(z.adler=it.wrap&1),it.mode=St,it.last=0,it.havedict=0,it.dmax=32768,it.head=null,it.hold=0,it.bits=0,it.lencode=it.lendyn=new I.Buf32(_e),it.distcode=it.distdyn=new I.Buf32(_),it.sane=1,it.back=-1,O)}function Y(z){var it;return!z||!z.state?et:(it=z.state,it.wsize=0,it.whave=0,it.wnext=0,W(z))}function Ot(z,it){var y,at;return!z||!z.state||(at=z.state,it<0?(y=0,it=-it):(y=(it>>4)+1,it<48&&(it&=15)),it&&(it<8||it>15))?et:(at.window!==null&&at.wbits!==it&&(at.window=null),at.wrap=y,at.wbits=it,Y(z))}function Lt(z,it){var y,at;return z?(at=new C,z.state=at,at.window=null,y=Ot(z,it),y!==O&&(z.state=null),y):et}function Ct(z){return Lt(z,l)}var Yt=!0,At,Se;function Ke(z){if(Yt){var it;for(At=new I.Buf32(512),Se=new I.Buf32(32),it=0;it<144;)z.lens[it++]=8;for(;it<256;)z.lens[it++]=9;for(;it<280;)z.lens[it++]=7;for(;it<288;)z.lens[it++]=8;for(w(u,z.lens,0,288,At,0,z.work,{bits:9}),it=0;it<32;)z.lens[it++]=5;w(g,z.lens,0,32,Se,0,z.work,{bits:5}),Yt=!1}z.lencode=At,z.lenbits=9,z.distcode=Se,z.distbits=5}function ze(z,it,y,at){var Mt,nt=z.state;return nt.window===null&&(nt.wsize=1<<nt.wbits,nt.wnext=0,nt.whave=0,nt.window=new I.Buf8(nt.wsize)),at>=nt.wsize?(I.arraySet(nt.window,it,y-nt.wsize,nt.wsize,0),nt.wnext=0,nt.whave=nt.wsize):(Mt=nt.wsize-nt.wnext,Mt>at&&(Mt=at),I.arraySet(nt.window,it,y-at,Mt,nt.wnext),at-=Mt,at?(I.arraySet(nt.window,it,y-at,at,0),nt.wnext=at,nt.whave=nt.wsize):(nt.wnext+=Mt,nt.wnext===nt.wsize&&(nt.wnext=0),nt.whave<nt.wsize&&(nt.whave+=Mt))),0}function je(z,it){var y,at,Mt,nt,se,ot,qt,Z,V,Je,Ut,ft,Be,Fe,Bt=0,Ft,te,ae,ee,Qe,We,Vt,ue,Qt=new I.Buf8(4),Ee,ve,mr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!z||!z.state||!z.output||!z.input&&z.avail_in!==0)return et;y=z.state,y.mode===P&&(y.mode=M),se=z.next_out,Mt=z.output,qt=z.avail_out,nt=z.next_in,at=z.input,ot=z.avail_in,Z=y.hold,V=y.bits,Je=ot,Ut=qt,ue=O;t:for(;;)switch(y.mode){case St:if(y.wrap===0){y.mode=M;break}for(;V<16;){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}if(y.wrap&2&&Z===35615){y.check=0,Qt[0]=Z&255,Qt[1]=Z>>>8&255,y.check=E(y.check,Qt,2,0),Z=0,V=0,y.mode=ht;break}if(y.flags=0,y.head&&(y.head.done=!1),!(y.wrap&1)||(((Z&255)<<8)+(Z>>8))%31){z.msg="incorrect header check",y.mode=yt;break}if((Z&15)!==Q){z.msg="unknown compression method",y.mode=yt;break}if(Z>>>=4,V-=4,Vt=(Z&15)+8,y.wbits===0)y.wbits=Vt;else if(Vt>y.wbits){z.msg="invalid window size",y.mode=yt;break}y.dmax=1<<Vt,z.adler=y.check=1,y.mode=Z&512?wt:P,Z=0,V=0;break;case ht:for(;V<16;){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}if(y.flags=Z,(y.flags&255)!==Q){z.msg="unknown compression method",y.mode=yt;break}if(y.flags&57344){z.msg="unknown header flags set",y.mode=yt;break}y.head&&(y.head.text=Z>>8&1),y.flags&512&&(Qt[0]=Z&255,Qt[1]=Z>>>8&255,y.check=E(y.check,Qt,2,0)),Z=0,V=0,y.mode=U;case U:for(;V<32;){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}y.head&&(y.head.time=Z),y.flags&512&&(Qt[0]=Z&255,Qt[1]=Z>>>8&255,Qt[2]=Z>>>16&255,Qt[3]=Z>>>24&255,y.check=E(y.check,Qt,4,0)),Z=0,V=0,y.mode=$;case $:for(;V<16;){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}y.head&&(y.head.xflags=Z&255,y.head.os=Z>>8),y.flags&512&&(Qt[0]=Z&255,Qt[1]=Z>>>8&255,y.check=E(y.check,Qt,2,0)),Z=0,V=0,y.mode=st;case st:if(y.flags&1024){for(;V<16;){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}y.length=Z,y.head&&(y.head.extra_len=Z),y.flags&512&&(Qt[0]=Z&255,Qt[1]=Z>>>8&255,y.check=E(y.check,Qt,2,0)),Z=0,V=0}else y.head&&(y.head.extra=null);y.mode=Rt;case Rt:if(y.flags&1024&&(ft=y.length,ft>ot&&(ft=ot),ft&&(y.head&&(Vt=y.head.extra_len-y.length,y.head.extra||(y.head.extra=new Array(y.head.extra_len)),I.arraySet(y.head.extra,at,nt,ft,Vt)),y.flags&512&&(y.check=E(y.check,at,ft,nt)),ot-=ft,nt+=ft,y.length-=ft),y.length))break t;y.length=0,y.mode=dt;case dt:if(y.flags&2048){if(ot===0)break t;ft=0;do Vt=at[nt+ft++],y.head&&Vt&&y.length<65536&&(y.head.name+=String.fromCharCode(Vt));while(Vt&&ft<ot);if(y.flags&512&&(y.check=E(y.check,at,ft,nt)),ot-=ft,nt+=ft,Vt)break t}else y.head&&(y.head.name=null);y.length=0,y.mode=Dt;case Dt:if(y.flags&4096){if(ot===0)break t;ft=0;do Vt=at[nt+ft++],y.head&&Vt&&y.length<65536&&(y.head.comment+=String.fromCharCode(Vt));while(Vt&&ft<ot);if(y.flags&512&&(y.check=E(y.check,at,ft,nt)),ot-=ft,nt+=ft,Vt)break t}else y.head&&(y.head.comment=null);y.mode=bt;case bt:if(y.flags&512){for(;V<16;){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}if(Z!==(y.check&65535)){z.msg="header crc mismatch",y.mode=yt;break}Z=0,V=0}y.head&&(y.head.hcrc=y.flags>>9&1,y.head.done=!0),z.adler=y.check=0,y.mode=P;break;case wt:for(;V<32;){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}z.adler=y.check=S(Z),Z=0,V=0,y.mode=Xt;case Xt:if(y.havedict===0)return z.next_out=se,z.avail_out=qt,z.next_in=nt,z.avail_in=ot,y.hold=Z,y.bits=V,D;z.adler=y.check=1,y.mode=P;case P:if(it===v||it===m)break t;case M:if(y.last){Z>>>=V&7,V-=V&7,y.mode=_t;break}for(;V<3;){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}switch(y.last=Z&1,Z>>>=1,V-=1,Z&3){case 0:y.mode=G;break;case 1:if(Ke(y),y.mode=jt,it===m){Z>>>=2,V-=2;break t}break;case 2:y.mode=vt;break;case 3:z.msg="invalid block type",y.mode=yt}Z>>>=2,V-=2;break;case G:for(Z>>>=V&7,V-=V&7;V<32;){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}if((Z&65535)!==(Z>>>16^65535)){z.msg="invalid stored block lengths",y.mode=yt;break}if(y.length=Z&65535,Z=0,V=0,y.mode=ct,it===m)break t;case ct:y.mode=kt;case kt:if(ft=y.length,ft){if(ft>ot&&(ft=ot),ft>qt&&(ft=qt),ft===0)break t;I.arraySet(Mt,at,nt,ft,se),ot-=ft,nt+=ft,qt-=ft,se+=ft,y.length-=ft;break}y.mode=P;break;case vt:for(;V<14;){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}if(y.nlen=(Z&31)+257,Z>>>=5,V-=5,y.ndist=(Z&31)+1,Z>>>=5,V-=5,y.ncode=(Z&15)+4,Z>>>=4,V-=4,y.nlen>286||y.ndist>30){z.msg="too many length or distance symbols",y.mode=yt;break}y.have=0,y.mode=mt;case mt:for(;y.have<y.ncode;){for(;V<3;){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}y.lens[mr[y.have++]]=Z&7,Z>>>=3,V-=3}for(;y.have<19;)y.lens[mr[y.have++]]=0;if(y.lencode=y.lendyn,y.lenbits=7,Ee={bits:y.lenbits},ue=w(p,y.lens,0,19,y.lencode,0,y.work,Ee),y.lenbits=Ee.bits,ue){z.msg="invalid code lengths set",y.mode=yt;break}y.have=0,y.mode=Nt;case Nt:for(;y.have<y.nlen+y.ndist;){for(;Bt=y.lencode[Z&(1<<y.lenbits)-1],Ft=Bt>>>24,te=Bt>>>16&255,ae=Bt&65535,!(Ft<=V);){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}if(ae<16)Z>>>=Ft,V-=Ft,y.lens[y.have++]=ae;else{if(ae===16){for(ve=Ft+2;V<ve;){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}if(Z>>>=Ft,V-=Ft,y.have===0){z.msg="invalid bit length repeat",y.mode=yt;break}Vt=y.lens[y.have-1],ft=3+(Z&3),Z>>>=2,V-=2}else if(ae===17){for(ve=Ft+3;V<ve;){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}Z>>>=Ft,V-=Ft,Vt=0,ft=3+(Z&7),Z>>>=3,V-=3}else{for(ve=Ft+7;V<ve;){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}Z>>>=Ft,V-=Ft,Vt=0,ft=11+(Z&127),Z>>>=7,V-=7}if(y.have+ft>y.nlen+y.ndist){z.msg="invalid bit length repeat",y.mode=yt;break}for(;ft--;)y.lens[y.have++]=Vt}}if(y.mode===yt)break;if(y.lens[256]===0){z.msg="invalid code -- missing end-of-block",y.mode=yt;break}if(y.lenbits=9,Ee={bits:y.lenbits},ue=w(u,y.lens,0,y.nlen,y.lencode,0,y.work,Ee),y.lenbits=Ee.bits,ue){z.msg="invalid literal/lengths set",y.mode=yt;break}if(y.distbits=6,y.distcode=y.distdyn,Ee={bits:y.distbits},ue=w(g,y.lens,y.nlen,y.ndist,y.distcode,0,y.work,Ee),y.distbits=Ee.bits,ue){z.msg="invalid distances set",y.mode=yt;break}if(y.mode=jt,it===m)break t;case jt:y.mode=xt;case xt:if(ot>=6&&qt>=258){z.next_out=se,z.avail_out=qt,z.next_in=nt,z.avail_in=ot,y.hold=Z,y.bits=V,N(z,Ut),se=z.next_out,Mt=z.output,qt=z.avail_out,nt=z.next_in,at=z.input,ot=z.avail_in,Z=y.hold,V=y.bits,y.mode===P&&(y.back=-1);break}for(y.back=0;Bt=y.lencode[Z&(1<<y.lenbits)-1],Ft=Bt>>>24,te=Bt>>>16&255,ae=Bt&65535,!(Ft<=V);){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}if(te&&!(te&240)){for(ee=Ft,Qe=te,We=ae;Bt=y.lencode[We+((Z&(1<<ee+Qe)-1)>>ee)],Ft=Bt>>>24,te=Bt>>>16&255,ae=Bt&65535,!(ee+Ft<=V);){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}Z>>>=ee,V-=ee,y.back+=ee}if(Z>>>=Ft,V-=Ft,y.back+=Ft,y.length=ae,te===0){y.mode=lt;break}if(te&32){y.back=-1,y.mode=P;break}if(te&64){z.msg="invalid literal/length code",y.mode=yt;break}y.extra=te&15,y.mode=k;case k:if(y.extra){for(ve=y.extra;V<ve;){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}y.length+=Z&(1<<y.extra)-1,Z>>>=y.extra,V-=y.extra,y.back+=y.extra}y.was=y.length,y.mode=b;case b:for(;Bt=y.distcode[Z&(1<<y.distbits)-1],Ft=Bt>>>24,te=Bt>>>16&255,ae=Bt&65535,!(Ft<=V);){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}if(!(te&240)){for(ee=Ft,Qe=te,We=ae;Bt=y.distcode[We+((Z&(1<<ee+Qe)-1)>>ee)],Ft=Bt>>>24,te=Bt>>>16&255,ae=Bt&65535,!(ee+Ft<=V);){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}Z>>>=ee,V-=ee,y.back+=ee}if(Z>>>=Ft,V-=Ft,y.back+=Ft,te&64){z.msg="invalid distance code",y.mode=yt;break}y.offset=ae,y.extra=te&15,y.mode=X;case X:if(y.extra){for(ve=y.extra;V<ve;){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}y.offset+=Z&(1<<y.extra)-1,Z>>>=y.extra,V-=y.extra,y.back+=y.extra}if(y.offset>y.dmax){z.msg="invalid distance too far back",y.mode=yt;break}y.mode=rt;case rt:if(qt===0)break t;if(ft=Ut-qt,y.offset>ft){if(ft=y.offset-ft,ft>y.whave&&y.sane){z.msg="invalid distance too far back",y.mode=yt;break}ft>y.wnext?(ft-=y.wnext,Be=y.wsize-ft):Be=y.wnext-ft,ft>y.length&&(ft=y.length),Fe=y.window}else Fe=Mt,Be=se-y.offset,ft=y.length;ft>qt&&(ft=qt),qt-=ft,y.length-=ft;do Mt[se++]=Fe[Be++];while(--ft);y.length===0&&(y.mode=xt);break;case lt:if(qt===0)break t;Mt[se++]=y.length,qt--,y.mode=xt;break;case _t:if(y.wrap){for(;V<32;){if(ot===0)break t;ot--,Z|=at[nt++]<<V,V+=8}if(Ut-=qt,z.total_out+=Ut,y.total+=Ut,Ut&&(z.adler=y.check=y.flags?E(y.check,Mt,Ut,se-Ut):x(y.check,Mt,Ut,se-Ut)),Ut=qt,(y.flags?Z:S(Z))!==y.check){z.msg="incorrect data check",y.mode=yt;break}Z=0,V=0}y.mode=K;case K:if(y.wrap&&y.flags){for(;V<32;){if(ot===0)break t;ot--,Z+=at[nt++]<<V,V+=8}if(Z!==(y.total&4294967295)){z.msg="incorrect length check",y.mode=yt;break}Z=0,V=0}y.mode=$t;case $t:ue=T;break t;case yt:ue=j;break t;case re:return H;case oe:default:return et}return z.next_out=se,z.avail_out=qt,z.next_in=nt,z.avail_in=ot,y.hold=Z,y.bits=V,(y.wsize||Ut!==z.avail_out&&y.mode<yt&&(y.mode<_t||it!==c))&&ze(z,z.output,z.next_out,Ut-z.avail_out),Je-=z.avail_in,Ut-=z.avail_out,z.total_in+=Je,z.total_out+=Ut,y.total+=Ut,y.wrap&&Ut&&(z.adler=y.check=y.flags?E(y.check,Mt,Ut,z.next_out-Ut):x(y.check,Mt,Ut,z.next_out-Ut)),z.data_type=y.bits+(y.last?64:0)+(y.mode===P?128:0)+(y.mode===jt||y.mode===ct?256:0),(Je===0&&Ut===0||it===c)&&ue===O&&(ue=Et),ue}function zr(z){if(!z||!z.state)return et;var it=z.state;return it.window&&(it.window=null),z.state=null,O}function jr(z,it){var y;return!z||!z.state||(y=z.state,!(y.wrap&2))?et:(y.head=it,it.done=!1,O)}function Br(z,it){var y=it.length,at,Mt,nt;return!z||!z.state||(at=z.state,at.wrap!==0&&at.mode!==Xt)?et:at.mode===Xt&&(Mt=1,Mt=x(Mt,it,y,0),Mt!==at.check)?j:(nt=ze(z,it,y,y),nt?(at.mode=re,H):(at.havedict=1,O))}A.inflateReset=Y,A.inflateReset2=Ot,A.inflateResetKeep=W,A.inflateInit=Ct,A.inflateInit2=Lt,A.inflate=je,A.inflateEnd=zr,A.inflateGetHeader=jr,A.inflateSetDictionary=Br,A.inflateInfo="pako inflate (from Nodeca project)"},function(q,A){var F=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";A.assign=function(E){for(var N=Array.prototype.slice.call(arguments,1);N.length;){var w=N.shift();if(w){if(typeof w!="object")throw new TypeError(w+"must be non-object");for(var p in w)w.hasOwnProperty(p)&&(E[p]=w[p])}}return E},A.shrinkBuf=function(E,N){return E.length===N?E:E.subarray?E.subarray(0,N):(E.length=N,E)};var I={arraySet:function(E,N,w,p,u){if(N.subarray&&E.subarray){E.set(N.subarray(w,w+p),u);return}for(var g=0;g<p;g++)E[u+g]=N[w+g]},flattenChunks:function(E){var N,w,p,u,g,c;for(p=0,N=0,w=E.length;N<w;N++)p+=E[N].length;for(c=new Uint8Array(p),u=0,N=0,w=E.length;N<w;N++)g=E[N],c.set(g,u),u+=g.length;return c}},x={arraySet:function(E,N,w,p,u){for(var g=0;g<p;g++)E[u+g]=N[w+g]},flattenChunks:function(E){return[].concat.apply([],E)}};A.setTyped=function(E){E?(A.Buf8=Uint8Array,A.Buf16=Uint16Array,A.Buf32=Int32Array,A.assign(A,I)):(A.Buf8=Array,A.Buf16=Array,A.Buf32=Array,A.assign(A,x))},A.setTyped(F)},function(q,A){function F(I,x,E,N){for(var w=I&65535|0,p=I>>>16&65535|0,u=0;E!==0;){u=E>2e3?2e3:E,E-=u;do w=w+x[N++]|0,p=p+w|0;while(--u);w%=65521,p%=65521}return w|p<<16|0}q.exports=F},function(q,A){function F(){for(var E,N=[],w=0;w<256;w++){E=w;for(var p=0;p<8;p++)E=E&1?3988292384^E>>>1:E>>>1;N[w]=E}return N}var I=F();function x(E,N,w,p){var u=I,g=p+w;E^=-1;for(var c=p;c<g;c++)E=E>>>8^u[(E^N[c])&255];return E^-1}q.exports=x},function(q,A){var F=30,I=12;q.exports=function(E,N){var w,p,u,g,c,v,m,O,T,D,et,j,H,Et,Q,St,ht,U,$,st,Rt,dt,Dt,bt,wt;w=E.state,p=E.next_in,bt=E.input,u=p+(E.avail_in-5),g=E.next_out,wt=E.output,c=g-(N-E.avail_out),v=g+(E.avail_out-257),m=w.dmax,O=w.wsize,T=w.whave,D=w.wnext,et=w.window,j=w.hold,H=w.bits,Et=w.lencode,Q=w.distcode,St=(1<<w.lenbits)-1,ht=(1<<w.distbits)-1;t:do{H<15&&(j+=bt[p++]<<H,H+=8,j+=bt[p++]<<H,H+=8),U=Et[j&St];e:for(;;){if($=U>>>24,j>>>=$,H-=$,$=U>>>16&255,$===0)wt[g++]=U&65535;else if($&16){st=U&65535,$&=15,$&&(H<$&&(j+=bt[p++]<<H,H+=8),st+=j&(1<<$)-1,j>>>=$,H-=$),H<15&&(j+=bt[p++]<<H,H+=8,j+=bt[p++]<<H,H+=8),U=Q[j&ht];r:for(;;){if($=U>>>24,j>>>=$,H-=$,$=U>>>16&255,$&16){if(Rt=U&65535,$&=15,H<$&&(j+=bt[p++]<<H,H+=8,H<$&&(j+=bt[p++]<<H,H+=8)),Rt+=j&(1<<$)-1,Rt>m){E.msg="invalid distance too far back",w.mode=F;break t}if(j>>>=$,H-=$,$=g-c,Rt>$){if($=Rt-$,$>T&&w.sane){E.msg="invalid distance too far back",w.mode=F;break t}if(dt=0,Dt=et,D===0){if(dt+=O-$,$<st){st-=$;do wt[g++]=et[dt++];while(--$);dt=g-Rt,Dt=wt}}else if(D<$){if(dt+=O+D-$,$-=D,$<st){st-=$;do wt[g++]=et[dt++];while(--$);if(dt=0,D<st){$=D,st-=$;do wt[g++]=et[dt++];while(--$);dt=g-Rt,Dt=wt}}}else if(dt+=D-$,$<st){st-=$;do wt[g++]=et[dt++];while(--$);dt=g-Rt,Dt=wt}for(;st>2;)wt[g++]=Dt[dt++],wt[g++]=Dt[dt++],wt[g++]=Dt[dt++],st-=3;st&&(wt[g++]=Dt[dt++],st>1&&(wt[g++]=Dt[dt++]))}else{dt=g-Rt;do wt[g++]=wt[dt++],wt[g++]=wt[dt++],wt[g++]=wt[dt++],st-=3;while(st>2);st&&(wt[g++]=wt[dt++],st>1&&(wt[g++]=wt[dt++]))}}else if($&64){E.msg="invalid distance code",w.mode=F;break t}else{U=Q[(U&65535)+(j&(1<<$)-1)];continue r}break}}else if($&64)if($&32){w.mode=I;break t}else{E.msg="invalid literal/length code",w.mode=F;break t}else{U=Et[(U&65535)+(j&(1<<$)-1)];continue e}break}}while(p<u&&g<v);st=H>>3,p-=st,H-=st<<3,j&=(1<<H)-1,E.next_in=p,E.next_out=g,E.avail_in=p<u?5+(u-p):5-(p-u),E.avail_out=g<v?257+(v-g):257-(g-v),w.hold=j,w.bits=H}},function(q,A,F){var I=F(33),x=15,E=852,N=592,w=0,p=1,u=2,g=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],v=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];q.exports=function(T,D,et,j,H,Et,Q,St){var ht=St.bits,U=0,$=0,st=0,Rt=0,dt=0,Dt=0,bt=0,wt=0,Xt=0,P=0,M,G,ct,kt,vt,mt=null,Nt=0,jt,xt=new I.Buf16(x+1),k=new I.Buf16(x+1),b=null,X=0,rt,lt,_t;for(U=0;U<=x;U++)xt[U]=0;for($=0;$<j;$++)xt[D[et+$]]++;for(dt=ht,Rt=x;Rt>=1&&xt[Rt]===0;Rt--);if(dt>Rt&&(dt=Rt),Rt===0)return H[Et++]=1<<24|64<<16|0,H[Et++]=1<<24|64<<16|0,St.bits=1,0;for(st=1;st<Rt&&xt[st]===0;st++);for(dt<st&&(dt=st),wt=1,U=1;U<=x;U++)if(wt<<=1,wt-=xt[U],wt<0)return-1;if(wt>0&&(T===w||Rt!==1))return-1;for(k[1]=0,U=1;U<x;U++)k[U+1]=k[U]+xt[U];for($=0;$<j;$++)D[et+$]!==0&&(Q[k[D[et+$]]++]=$);if(T===w?(mt=b=Q,jt=19):T===p?(mt=g,Nt-=257,b=c,X-=257,jt=256):(mt=v,b=m,jt=-1),P=0,$=0,U=st,vt=Et,Dt=dt,bt=0,ct=-1,Xt=1<<dt,kt=Xt-1,T===p&&Xt>E||T===u&&Xt>N)return 1;for(;;){rt=U-bt,Q[$]<jt?(lt=0,_t=Q[$]):Q[$]>jt?(lt=b[X+Q[$]],_t=mt[Nt+Q[$]]):(lt=96,_t=0),M=1<<U-bt,G=1<<Dt,st=G;do G-=M,H[vt+(P>>bt)+G]=rt<<24|lt<<16|_t|0;while(G!==0);for(M=1<<U-1;P&M;)M>>=1;if(M!==0?(P&=M-1,P+=M):P=0,$++,--xt[U]===0){if(U===Rt)break;U=D[et+Q[$]]}if(U>dt&&(P&kt)!==ct){for(bt===0&&(bt=dt),vt+=st,Dt=U-bt,wt=1<<Dt;Dt+bt<Rt&&(wt-=xt[Dt+bt],!(wt<=0));)Dt++,wt<<=1;if(Xt+=1<<Dt,T===p&&Xt>E||T===u&&Xt>N)return 1;ct=P&kt,H[ct]=dt<<24|Dt<<16|vt-Et|0}}return P!==0&&(H[vt+P]=U-bt<<24|64<<16|0),St.bits=dt,0}},function(q,A,F){var I=F(33),x=!0,E=!0;try{String.fromCharCode.apply(null,[0])}catch{x=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{E=!1}for(var N=new I.Buf8(256),w=0;w<256;w++)N[w]=w>=252?6:w>=248?5:w>=240?4:w>=224?3:w>=192?2:1;N[254]=N[254]=1,A.string2buf=function(u){var g,c,v,m,O,T=u.length,D=0;for(m=0;m<T;m++)c=u.charCodeAt(m),(c&64512)===55296&&m+1<T&&(v=u.charCodeAt(m+1),(v&64512)===56320&&(c=65536+(c-55296<<10)+(v-56320),m++)),D+=c<128?1:c<2048?2:c<65536?3:4;for(g=new I.Buf8(D),O=0,m=0;O<D;m++)c=u.charCodeAt(m),(c&64512)===55296&&m+1<T&&(v=u.charCodeAt(m+1),(v&64512)===56320&&(c=65536+(c-55296<<10)+(v-56320),m++)),c<128?g[O++]=c:c<2048?(g[O++]=192|c>>>6,g[O++]=128|c&63):c<65536?(g[O++]=224|c>>>12,g[O++]=128|c>>>6&63,g[O++]=128|c&63):(g[O++]=240|c>>>18,g[O++]=128|c>>>12&63,g[O++]=128|c>>>6&63,g[O++]=128|c&63);return g};function p(u,g){if(g<65537&&(u.subarray&&E||!u.subarray&&x))return String.fromCharCode.apply(null,I.shrinkBuf(u,g));for(var c="",v=0;v<g;v++)c+=String.fromCharCode(u[v]);return c}A.buf2binstring=function(u){return p(u,u.length)},A.binstring2buf=function(u){for(var g=new I.Buf8(u.length),c=0,v=g.length;c<v;c++)g[c]=u.charCodeAt(c);return g},A.buf2string=function(u,g){var c,v,m,O,T=g||u.length,D=new Array(T*2);for(v=0,c=0;c<T;){if(m=u[c++],m<128){D[v++]=m;continue}if(O=N[m],O>4){D[v++]=65533,c+=O-1;continue}for(m&=O===2?31:O===3?15:7;O>1&&c<T;)m=m<<6|u[c++]&63,O--;if(O>1){D[v++]=65533;continue}m<65536?D[v++]=m:(m-=65536,D[v++]=55296|m>>10&1023,D[v++]=56320|m&1023)}return p(D,v)},A.utf8border=function(u,g){var c;for(g=g||u.length,g>u.length&&(g=u.length),c=g-1;c>=0&&(u[c]&192)===128;)c--;return c<0||c===0?g:c+N[u[c]]>g?c:g}},function(q,A){q.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(q,A){q.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(q,A){function F(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}q.exports=F},function(q,A){function F(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}q.exports=F}])})})(on);var Mr=on.exports;async function _i(){await new Promise((me,Ie)=>{Mr.configure({fs:"InMemory"},q=>{q?Ie(q):me()})})}let Ce,Ur,Pr,Me,an=!1;async function Si(){if(await _i(),Ce=Mr.BFSRequire("fs"),Ur=Mr.BFSRequire("buffer").Buffer,wi(Ce,Ur),Me=new nn,!Me){postMessage({type:"error",data:{message:"Failed to initialize Go wasm runtime",description:"Unknown error, you can try refreshing the page"}});return}Pr=(await WebAssembly.instantiateStreaming(fetch("/pdfcpu.wasm"),Me.importObject)).module,an=!0}async function Ei(me,Ie){if(postMessage({type:"progress",data:0}),an||await Si(),postMessage({type:"progress",data:10}),!Ce){postMessage({type:"error",data:{message:"BrowserFS is not initialized",description:"Unknown error, you can try refreshing the page"}});return}if(!Me){postMessage({type:"error",data:{message:"Go wasm runtime is not initialized",description:"Unknown error, you can try refreshing the page"}});return}if(!Pr){postMessage({type:"error",data:{message:"pdfcpu wasm module is not initialized",description:"Unknown error, you can try refreshing the page"}});return}Ce.writeFileSync("/input.pdf",Ur.from(await me.arrayBuffer())),postMessage({type:"progress",data:20});const q=await WebAssembly.instantiate(Pr,Me.importObject);postMessage({type:"progress",data:30}),Ie?Me.argv=["pdfcpu.wasm","decrypt","-upw",Ie,"/input.pdf","/output.pdf"]:Me.argv=["pdfcpu.wasm","decrypt","/input.pdf","/output.pdf"],await Me.run(q),postMessage({type:"progress",data:80});try{Ce.statSync("/output.pdf")}catch(I){if(sr.includes("This file is not encrypted")){postMessage({type:"error",data:{message:"Failed to decrypt PDF",description:"The file is not encrypted"}});return}if(sr.includes("Please provide the correct password")){postMessage(Ie?{type:"error",data:{message:"Failed to decrypt PDF",description:"Invalid password"}}:{type:"error",data:{message:"Failed to decrypt PDF",description:"Password is required to decrypt this file"}});return}if(sr.includes("JavaScript error")){postMessage({type:"error",data:{message:"Failed to decrypt PDF",description:"Unknown JavaScript error, refresh the page and try again"}}),console.error(I);return}postMessage({type:"error",data:{message:"Failed to decrypt PDF",description:"Unknown error, check the developer console for more information"}}),console.error(I);return}postMessage({type:"progress",data:90});let A=Ce.readFileSync("/output.pdf");Ce.unlinkSync("/input.pdf"),Ce.unlinkSync("/output.pdf");let F=new Blob([A],{type:"application/pdf"});postMessage({type:"progress",data:100}),postMessage({type:"success",data:F})}onmessage=me=>{const{type:Ie,file:q,password:A}=me.data;switch(Ie){case"decrypt":Ei(q,A);break;default:postMessage({type:"error",data:{message:"Invalid message type",description:"Unknown error, you can try refreshing the page"}});break}}})();
